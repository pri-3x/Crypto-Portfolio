import {
    r as d,
    aj as Ma,
    d8 as js,
    j as e,
    a$ as Te,
    b as W,
    dH as An,
    dp as rs,
    ha as je,
    hb as Be,
    aC as ee,
    fN as En,
    hc as ss,
    hd as ns,
    df as K,
    he as ys,
    hf as ls,
    hg as Bt,
    z as se,
    hh as Cn,
    dA as Ze,
    hi as yn,
    hj as Rn,
    a7 as oe,
    hk as Yl,
    ca as In,
    aP as Xt,
    aM as le,
    hl as ua,
    M as ie,
    hm as Ln,
    u as _,
    hn as vn,
    ho as Qt,
    H as _e,
    T as f,
    hp as st,
    t as Ie,
    hq as ce,
    hr as Dn,
    k as B,
    hs as ve,
    dk as S,
    ht as xa,
    hu as Ms,
    hv as Wa,
    cG as Zl,
    hw as ha,
    d9 as Ws,
    D as Jl,
    hx as Pn,
    db as Fs,
    dc as ei,
    i as L,
    hy as Mt,
    hz as Rs,
    e9 as On,
    ea as Mn,
    hA as Vt,
    eR as ti,
    fv as Bs,
    aq as Yt,
    dR as Wn,
    dz as rt,
    e2 as si,
    ar as jt,
    as as lt,
    el as Ht,
    L as ae,
    d$ as we,
    hB as Fn,
    hC as ds,
    hD as fa,
    hE as ai,
    O as Ye,
    hF as F,
    hG as ht,
    hH as it,
    dK as Je,
    dt as ft,
    hI as Bn,
    hJ as Vn,
    hK as Hn,
    fR as ms,
    dy as $n,
    hL as ni,
    hM as li,
    hN as Re,
    hO as xe,
    hP as ii,
    hQ as ci,
    hR as oi,
    ao as Pe,
    hS as Fa,
    ap as ct,
    f0 as Un,
    hT as Ba,
    hU as Es,
    fe as us,
    Z as Ae,
    hV as ri,
    di as Va,
    hW as Ha,
    hX as di,
    hY as Gn,
    hZ as wt,
    h_ as Zt,
    h$ as mi,
    i0 as ui,
    i1 as xi,
    i2 as hi,
    i3 as fi,
    i4 as gi,
    gd as at,
    aa as ki,
    i5 as pi,
    i6 as ji,
    az as Jt,
    i7 as Is,
    i8 as Ls,
    em as xs,
    dT as Kn,
    i9 as gt,
    cA as Tt,
    dw as qn,
    dx as zn,
    aL as hs,
    fW as Vs,
    ds as C,
    ia as Xn,
    ib as wi,
    ic as ga,
    id as Ti,
    bB as is,
    ie as bt,
    ig as Oe,
    du as bi,
    ih as es,
    ii as Ni,
    gJ as fs,
    ij as Hs,
    ik as $s,
    eq as Qn,
    il as dt,
    im as Si,
    dg as We,
    io as _i,
    ip as Nt,
    iq as kt,
    ir as Ai,
    is as Ei,
    it as $a,
    iu as ws,
    dl as St,
    dm as _t,
    dn as At,
    iv as gs,
    iw as Ua,
    gU as ka,
    eN as Ke,
    ix as Ci,
    aH as Le,
    iy as pt,
    iz as pa,
    iA as Yn,
    iB as yi,
    iC as Ri,
    iD as Us,
    iE as ks,
    iF as Ii,
    iG as et,
    iH as Gs,
    iI as Li,
    a0 as ja,
    aE as Ks,
    aF as Ne,
    cc as $t,
    iJ as vi,
    iK as Di,
    cd as qs,
    iL as Pi,
    iM as J,
    iN as Ga,
    iO as Ka,
    iP as qa,
    iQ as Qe,
    iR as ta,
    iS as mt,
    iT as Oi,
    iU as Mi,
    iV as Wi,
    iW as za,
    iX as Zn,
    eC as wa,
    iY as Fi,
    iZ as Bi,
    dV as Jn,
    ff as el,
    i_ as Vi,
    aD as Ta,
    a6 as Et,
    dq as ps,
    dr as tl,
    i$ as sl,
    j0 as Ct,
    j1 as Ve,
    j2 as qe,
    j3 as nt,
    j4 as al,
    j5 as Xa,
    j6 as Qa,
    j7 as Ya,
    j8 as Za,
    j9 as Ja,
    ja as Hi,
    jb as ba,
    jc as Ut,
    jd as yt,
    je as zs,
    jf as Gt,
    jg as Fe,
    jh as Xs,
    ji as nl,
    jj as $i,
    jk as Na,
    jl as Sa,
    jm as ll,
    jn as Kt,
    jo as ia,
    jp as Ui,
    jq as sa,
    jr as Gi,
    js as Ki,
    fC as qi,
    jt as zi,
    fB as Xi,
    cP as il,
    cQ as cl,
    cR as ol,
    fj as rl,
    fk as as,
    dv as qt,
    ju as vs,
    jv as en,
    jw as dl,
    d5 as ml,
    d6 as ul,
    jx as Qi,
    jy as Yi,
    jz as Zi,
    jA as Ji,
    bq as ec,
    jB as tn,
    jC as sn,
    jD as tc,
    jE as sc,
    fh as an,
    jF as ac,
    jG as _a,
    jH as xl,
    jI as hl,
    jJ as nc,
    jK as ca,
    cB as lc,
    jL as ic,
    jM as cc,
    jN as oc,
    jO as rc,
    jP as fl,
    jQ as dc,
    fJ as gl,
    jR as oa,
    aV as kl,
    jS as mc,
    jT as uc,
    jU as pl,
    gI as cs,
    jV as he,
    jW as Ds,
    N as $e,
    cV as Dt,
    jX as Ue,
    jY as Wt,
    bm as Aa,
    jZ as ut,
    j_ as xc,
    j$ as Ea,
    k0 as jl,
    k1 as hc,
    k2 as fc,
    k3 as Qs,
    gS as Ys,
    k4 as Ca,
    k5 as wl,
    k6 as Tl,
    k7 as ya,
    k8 as gc,
    fO as kc,
    k9 as bl,
    ka as nn,
    kb as Ts,
    cK as pc,
    kc as jc,
    kd as wc,
    ke as ln,
    kf as cn,
    kg as Tc,
    kh as Nl,
    fy as Sl,
    ki as bc,
    kj as Nc,
    kk as _l,
    Q as Sc,
    av as _c,
    kl as Ac,
    km as Ec,
    kn as Cc,
    gL as yc,
    w as Al,
    gF as Cs,
    ko as Rc,
    kp as Ic,
    g_ as Lc,
    kq as vc,
    kr as Dc,
    ks as Pc,
    kt as Oc,
    ku as Ra,
    kv as Mc,
    gR as Wc,
    kw as Fc,
    kx as Bc,
    ky as Vc,
    kz as Hc,
    kA as $c,
    fG as Uc,
    kB as El,
    kC as Cl,
    kD as yl,
    kE as Gc,
    kF as Kc,
    kG as qc,
    aA as zc,
    kH as Xc
} from "./bootstrap-7c5c33c8.js";
import {
    M as Ia
} from "./Maintenance-ae1f892f.js";
import {
    u as La,
    A as Ps
} from "./useSortTableData-53faf8b9.js";
import {
    B as xt
} from "./BalanceConversionText-e8458c4f.js";
import {
    P as va,
    a as Rl
} from "./AccountsMultiSelectDropdown-9e2b61d0.js";
import {
    _ as Qc
} from "./index-184b0bea.js";
import {
    S as Yc
} from "./SparklesIcon-d4c4fb1e.js";

function ra() {
    return ra = Object.assign || function(t) {
        for (var s = 1; s < arguments.length; s++) {
            var n = arguments[s];
            for (var l in n) Object.prototype.hasOwnProperty.call(n, l) && (t[l] = n[l])
        }
        return t
    }, ra.apply(this, arguments)
}

function Zc(t, s) {
    if (t == null) return {};
    var n = Jc(t, s),
        l, a;
    if (Object.getOwnPropertySymbols) {
        var c = Object.getOwnPropertySymbols(t);
        for (a = 0; a < c.length; a++) l = c[a], !(s.indexOf(l) >= 0) && Object.prototype.propertyIsEnumerable.call(t, l) && (n[l] = t[l])
    }
    return n
}

function Jc(t, s) {
    if (t == null) return {};
    var n = {},
        l = Object.keys(t),
        a, c;
    for (c = 0; c < l.length; c++) a = l[c], !(s.indexOf(a) >= 0) && (n[a] = t[a]);
    return n
}
var Da = d.forwardRef(function(t, s) {
    var n = t.color,
        l = n === void 0 ? "currentColor" : n,
        a = t.size,
        c = a === void 0 ? 24 : a,
        i = Zc(t, ["color", "size"]);
    return Ma.createElement("svg", ra({
        ref: s,
        xmlns: "http://www.w3.org/2000/svg",
        width: c,
        height: c,
        viewBox: "0 0 24 24",
        fill: "none",
        stroke: l,
        strokeWidth: "2",
        strokeLinecap: "round",
        strokeLinejoin: "round"
    }, i), Ma.createElement("circle", {
        cx: "12",
        cy: "12",
        r: "10"
    }))
});
Da.propTypes = {
    color: js.string,
    size: js.oneOfType([js.string, js.number])
};
Da.displayName = "Circle";
const Il = Da,
    eo = ({
        className: t
    }) => e.jsxs("svg", {
        width: "20",
        height: "20",
        viewBox: "0 0 20 20",
        className: t,
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg",
        children: [e.jsx("path", {
            d: "M11.8848 12.8654H7.71814",
            strokeWidth: "1.5",
            strokeMiterlimit: "10",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        }), e.jsx("path", {
            d: "M9.80139 10.8317V14.9984",
            strokeWidth: "1.5",
            strokeMiterlimit: "10",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        }), e.jsx("path", {
            d: "M10.55 2.09845L10.525 2.15678L8.1083 7.76512H5.7333C5.16663 7.76512 4.62497 7.88178 4.1333 8.09012L5.59163 4.60679L5.62497 4.52345L5.6833 4.39012C5.69997 4.34012 5.71663 4.29012 5.74163 4.24845C6.8333 1.72345 8.06663 1.14845 10.55 2.09845Z",
            strokeWidth: "1.5",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        }), e.jsx("path", {
            d: "M15.0416 7.93178C14.6666 7.81512 14.2666 7.76512 13.8666 7.76512H8.10828L10.5249 2.15678L10.5499 2.09845C10.6749 2.14012 10.7916 2.19845 10.9166 2.24845L12.7583 3.02345C13.7833 3.44845 14.4999 3.89012 14.9333 4.42345C15.0166 4.52345 15.0833 4.61512 15.1416 4.72345C15.2166 4.84012 15.2749 4.95678 15.3083 5.08178C15.3416 5.15678 15.3666 5.23178 15.3833 5.29845C15.6083 5.99845 15.4749 6.85678 15.0416 7.93178Z",
            strokeWidth: "1.5",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        }), e.jsx("path", {
            d: "M17.9347 11.832V13.457C17.9347 13.6236 17.9264 13.7903 17.9181 13.957C17.7597 16.8653 16.1347 18.332 13.0514 18.332H6.55139C6.35139 18.332 6.15139 18.3153 5.95972 18.2903C3.30972 18.1153 1.89306 16.6986 1.71806 14.0486C1.69306 13.857 1.67639 13.657 1.67639 13.457V11.832C1.67639 10.157 2.69306 8.7153 4.14306 8.0903C4.64306 7.88197 5.17639 7.7653 5.74306 7.7653H13.8764C14.2847 7.7653 14.6847 7.82364 15.0514 7.93197C16.7097 8.44031 17.9347 9.9903 17.9347 11.832Z",
            strokeWidth: "1.5",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        }), e.jsx("path", {
            d: "M5.59163 4.60678L4.13329 8.09011C2.68329 8.71511 1.66663 10.1568 1.66663 11.8318V9.39011C1.66663 7.02345 3.34996 5.04845 5.59163 4.60678Z",
            strokeWidth: "1.5",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        }), e.jsx("path", {
            d: "M17.9322 9.38971V11.8314C17.9322 9.99804 16.7155 8.43971 15.0488 7.93971C15.4822 6.85638 15.6072 6.00638 15.3988 5.29804C15.3822 5.22304 15.3572 5.14804 15.3238 5.08138C16.8738 5.88138 17.9322 7.52304 17.9322 9.38971Z",
            strokeWidth: "1.5",
            strokeLinecap: "round",
            strokeLinejoin: "round"
        })]
    }),
    Ll = ({
        tokenSymbol: t,
        analyticsProps: s,
        onClick: n
    }) => {
        const l = Te(),
            a = W(),
            c = i => {
                const r = `/stake/${t}`;
                i.stopPropagation(), je({
                    selected_token: t,
                    action_type: Be.STAKE,
                    ...s
                }), n == null || n(), ee && a(En()), l(r)
            };
        return e.jsx(An, {
            Icon: e.jsx(rs, {}),
            text: "Stake more",
            onClick: c
        })
    },
    vl = ({
        tokenSymbol: t,
        analyticsProps: s,
        onClick: n
    }) => {
        const l = Te(),
            a = W(),
            c = i => {
                const r = `/stake/withdraw/${t}`;
                i.stopPropagation(), n == null || n(), je({
                    selected_token: t,
                    action_type: Be.WITHDRAW,
                    ...s
                }), ee && a(En()), l(r)
            };
        return e.jsx(An, {
            Icon: e.jsx(eo, {}),
            text: "Withdraw",
            onClick: c
        })
    },
    to = () => {
        const t = ss(ys),
            s = ss(ls),
            n = ss(yn),
            l = ss(Rn),
            {
                maxEthAvailable: a
            } = ns(ys, K.ETH),
            {
                maxEthAvailable: c
            } = ns(ls, K.ETH),
            {
                tokenData: i
            } = Bt(se.ZERO_ADDRESS, "ethereum"),
            {
                tokenData: r
            } = Bt(Ze, Cn),
            o = i.price,
            m = d.useRef(o),
            u = m.current,
            h = r.price,
            j = d.useRef(h),
            T = j.current,
            g = r.balance || 0,
            b = d.useRef(g),
            k = b.current;
        return d.useEffect(() => {
            o && !u && (m.current = o), h && !T && (j.current = h), g && !k && (b.current = g)
        }, [o, u, g, k, h, T]), d.useMemo(() => {
            if (u && T && t && s && n && l) {
                const E = t * u,
                    R = s * u,
                    w = Number(a.multipliedBy(u)),
                    y = Number(c.multipliedBy(u)),
                    p = n * u,
                    x = l * u,
                    v = g * T;
                return {
                    staking_max_available_steth_eth: a,
                    staking_max_available_steth_usd: w,
                    staking_max_available_reth_eth: c,
                    staking_max_available_reth_usd: y,
                    staking_gas_fees_reth_eth: s,
                    staking_gas_fees_reth_usd: R,
                    staking_gas_fees_steth_eth: t,
                    staking_gas_fees_steth_usd: E,
                    staking_max_available_matic: g,
                    staking_max_available_matic_usd: v,
                    staking_gas_fees_stmatic_eth: n,
                    staking_gas_fees_stmatic_usd: p,
                    staking_gas_fees_maticx_eth: l,
                    staking_gas_fees_maticx_usd: x
                }
            }
        }, [u, t, s, n, l, a, c, g, T])
    },
    so = () => {
        const {
            t
        } = oe(), s = W(), [n, l] = d.useState(!1);
        d.useEffect(() => Yl({}), []);
        const a = () => {
            s(le(ie.Swap, {
                swapUrl: ua(se.ZERO_ADDRESS, ls),
                fromTokenSymbol: "ETH",
                isRocketPoolCapacitySwap: !0
            }, {
                content: {
                    maxWidth: "30rem"
                }
            })), Ln({
                location: "Rocket Pool Capacity Badge",
                selected_provider: "rocketpool"
            })
        };
        return e.jsxs("div", {
            "data-tooltip-id": "max-capacity-tooltip",
            onMouseOver: () => l(!0),
            onMouseOut: () => l(!1),
            onFocus: () => l(!0),
            onBlur: () => l(!1),
            className: "ml-1 max-w-max",
            children: [e.jsx(In, {
                withAlert: !0,
                variant: "warning",
                onClick: a,
                children: t(n ? "stake.swapInstead" : "stake.maxCapacity")
            }), e.jsx(Xt, {
                id: "max-capacity-tooltip",
                className: "max-w-xs text-sm",
                children: t("stake.rocketPoolTooltip")
            })]
        })
    },
    ao = ({
        provider: t,
        isRecommended: s = !1,
        sortCategory: n
    }) => {
        const {
            apy: l,
            logoUrl: a,
            minimumStakeInWei: c,
            name: i,
            networkControl: r,
            providerId: o,
            tokenSymbol: m,
            totalStakedBalance: u,
            nativeToken: h
        } = t, j = W(), T = Te(), g = _(vn()), {
            contractConstants: b
        } = _(Qt), {
            baseCurrency: k,
            exchangeRate: N
        } = _e();
        return e.jsxs("div", {
            className: "group",
            children: [s && n && e.jsx("div", {
                className: "flex items-center h-10 w-max rounded-t-lg bg-primary-default text-primary-inverse p-2 font-bold",
                children: e.jsx(f, {
                    bold: !0,
                    className: "text-inverse",
                    children: st[n].badgeTitle
                })
            }), e.jsxs("div", {
                className: Ie("flex flex-col relative bg-inherit group group-hover:bg-info-muted rounded-lg min-w-[15rem] w-content border-2 border-default p-4", {
                    "rounded-tl-none border-primary-default": s
                }),
                children: [e.jsxs("span", {
                    className: "flex justify-between",
                    children: [e.jsx("img", {
                        src: a,
                        className: "rounded-full w-10 h-10",
                        alt: ""
                    }), o === ce.ROCKETPOOL && g && e.jsx(so, {})]
                }), e.jsx("p", {
                    className: "mt-2 font-bold",
                    children: i
                }), e.jsx("p", {
                    className: "text-alternative text-sm",
                    children: m
                }), e.jsxs("p", {
                    className: "flex items-end mt-8 group-hover:opacity-0",
                    children: [e.jsx("span", {
                        className: "font-bold text-3xl",
                        children: Dn(n, l, u * N, r, k)
                    }), e.jsx("span", {
                        className: "text-2xl text-alternative ml-2",
                        children: st[n].unit
                    })]
                }), e.jsxs("span", {
                    className: "mt-8 opacity-0 group-hover:opacity-100 flex gap-2 absolute left-0 top-[106px] px-4 w-full",
                    children: [e.jsx(B, {
                        onClick: () => {
                            ve({
                                text: "Stake",
                                selected_provider: o,
                                location: S.STAKE_PROVIDER_CARD,
                                token_to_stake: h.toLowerCase(),
                                token_to_receive: m.toLowerCase()
                            }), T(`/stake/${m}`)
                        },
                        children: e.jsx("span", {
                            className: "text-sm min-w-max",
                            children: "Stake"
                        }),
                        width: "full"
                    }), e.jsx(B, {
                        onClick: () => {
                            j(le(ie.StakingInfo, {
                                stakeInfo: {
                                    stakedToken: m,
                                    providerId: o,
                                    minimum: xa(b.metaMaskFee || 0, c),
                                    nativeStakingToken: h
                                }
                            }, {
                                content: {
                                    maxWidth: "32rem"
                                }
                            })), Ms({
                                text: "More info",
                                selected_provider: o,
                                app_source: "stake"
                            })
                        },
                        "aria-label": "Open staking information modal",
                        children: e.jsx("span", {
                            className: "text-sm min-w-max",
                            children: "More info"
                        }),
                        variant: "outline",
                        width: "full"
                    })]
                })]
            })]
        })
    },
    no = ({
        provider: t,
        isRecommended: s = !1,
        sortCategory: n
    }) => {
        const {
            apy: l,
            logoUrl: a,
            providerId: c,
            minimumStakeInWei: i,
            name: r,
            networkControl: o,
            nativeToken: m,
            tokenSymbol: u,
            totalStakedBalance: h
        } = t, j = W(), T = Te(), {
            exchangeRate: g,
            baseCurrency: b
        } = _e(), {
            contractConstants: k
        } = _(Qt);
        return e.jsxs("div", {
            children: [s && n && e.jsx("div", {
                className: "flex items-center h-10 w-max rounded-t-lg bg-primary-default text-primary-inverse p-2 text-sm font-bold",
                children: st[n].badgeTitle
            }), e.jsxs("button", {
                onClick: () => j(le(ie.MobileActionMenu, {
                    actions: [{
                        content: e.jsx(Wa, {
                            Icon: rs,
                            text: "Stake"
                        }),
                        onClick: () => {
                            ve({
                                text: "Stake",
                                selected_provider: c,
                                location: S.STAKE_PROVIDER_CARD,
                                token_to_stake: m.toLowerCase(),
                                token_to_receive: u.toLowerCase()
                            }), T(`/stake/${u}`)
                        }
                    }, {
                        content: e.jsx(Wa, {
                            Icon: Zl,
                            text: "More info"
                        }),
                        onClick: () => {
                            j(le(ie.StakingInfo, {
                                stakeInfo: {
                                    stakedToken: u,
                                    providerId: c,
                                    minimum: xa(k.metaMaskFee || 0, i),
                                    nativeStakingToken: m
                                }
                            }, {
                                content: {
                                    height: "100%",
                                    borderRadius: 0
                                }
                            })), Ms({
                                text: "More info",
                                selected_provider: c
                            })
                        }
                    }],
                    buttonVariant: "outline",
                    actionsClassName: "flex justify-center"
                })),
                className: Ie("flex justify-between items-center bg-inherit rounded-lg border-2 border-default p-4 truncate w-full", {
                    "rounded-tl-none border-primary-default": s
                }),
                children: [e.jsx(ha, {
                    iconUrl: a,
                    eyebrowText: r,
                    text: u,
                    className: "max-w-[8rem] text-sm"
                }), e.jsxs("p", {
                    className: "flex items-end",
                    children: [e.jsx("span", {
                        className: "font-bold text-2xl",
                        children: Dn(n, l, h * g, o, b)
                    }), e.jsx("span", {
                        className: "text-xl text-alternative ml-2",
                        children: st[n].unit
                    })]
                })]
            })]
        })
    },
    lo = ({
        providers: t,
        sortCategory: s
    }) => {
        const [n, l] = d.useState(t);
        return d.useEffect(() => {
            l(t)
        }, [t]), ee ? e.jsx("ol", {
            className: "flex flex-col gap-4 w-full",
            children: n.map((a, c) => e.jsx("li", {
                children: e.jsx(no, {
                    provider: a,
                    isRecommended: c === 0,
                    sortCategory: s
                })
            }, `${a.providerId}-${a.tokenSymbol}`))
        }) : e.jsx("ol", {
            className: "flex gap-4 items-end",
            children: n.map((a, c) => e.jsx("li", {
                children: e.jsx(ao, {
                    provider: a,
                    isRecommended: c === 0,
                    sortCategory: s
                })
            }, `${a.providerId}-${a.tokenSymbol}`))
        })
    },
    io = ({
        items: t,
        selected: s,
        onSelect: n
    }) => {
        const {
            t: l
        } = oe(), {
            filterProvidersBy: a
        } = _(m => m.stake.thirdPartyStaking), [c, i] = d.useState(!1), r = d.useRef(null);
        Ws(r, () => i(!1));
        const o = t.find(m => m.id === s);
        return e.jsxs("div", {
            ref: r,
            className: "relative",
            children: [e.jsx(Jl, {
                onClick: () => {
                    i(!c), Pn({
                        current_sort: s,
                        token_to_stake: a.toLowerCase()
                    })
                },
                isOpen: c,
                value: l("stake.sortBySelected", {
                    selectedItemName: o == null ? void 0 : o.name
                })
            }), e.jsxs(Fs, {
                isOpen: c,
                className: "w-[21rem] py-1 sm:text-sm",
                position: "right",
                children: [e.jsx("p", {
                    className: "text-xl font-bold p-4",
                    children: l("stake.sortBy")
                }), t.map((m, u) => e.jsx(ei, {
                    onClick: () => {
                        n(m), i(!1)
                    },
                    className: "mx-3 py-0",
                    showCheck: !1,
                    children: e.jsx("div", {
                        className: "whitespace-normal",
                        children: m.value
                    })
                }, u))]
            })]
        })
    },
    ze = ({
        type: t,
        displayHeader: s = !0
    }) => e.jsxs(e.Fragment, {
        children: [s && e.jsx(f, {
            scale: L.ParagraphBase,
            bold: !0,
            children: Mt[t].title
        }), e.jsx(f, {
            scale: L.ParagraphSm,
            children: Mt[t].text
        }), Mt[t].additionalText && e.jsx(f, {
            scale: L.ParagraphSm,
            className: "mt-4 sm:mt-2 text-disabled",
            children: Mt[t].additionalText
        })]
    }),
    on = ({
        providerId: t
    }) => e.jsxs(e.Fragment, {
        children: [e.jsx(f, {
            scale: L.ParagraphBase,
            bold: !0,
            className: "mb-4 sm:mb-2",
            children: "Expected ready by"
        }), e.jsxs(f, {
            scale: L.ParagraphSm,
            children: ["This is ", Rs(t), "'s estimate of when your withdrawal will be ready to claim. This date varies based on ", Rs(t), "'s withdrawal processing queue."]
        })]
    }),
    rn = () => e.jsxs(e.Fragment, {
        children: [e.jsx(f, {
            scale: L.ParagraphBase,
            bold: !0,
            className: "mb-4 sm:mb-2",
            children: "Receiving"
        }), e.jsx(f, {
            scale: L.ParagraphSm,
            children: "This is the rewards amount you can claim. Keep in mind that you pay gas fees on rewards."
        })]
    }),
    co = ({
        token: t,
        analyticsProps: s,
        iconOrientation: n = "horizontal"
    }) => {
        const l = W();
        return e.jsx("button", {
            className: "rounded-lg hover:bg-hover",
            onClick: a => {
                a.preventDefault(), a.stopPropagation(), je({ ...s
                }), l(le(ie.MobileActionMenu, {
                    actions: [{
                        content: e.jsx(On, {
                            address: t.address,
                            urlType: Mn.TOKEN,
                            chainId: t.chainId,
                            tokenSymbol: t.symbol,
                            analyticsProps: s
                        })
                    }, {
                        content: e.jsx(Ll, {
                            tokenSymbol: t.symbol,
                            onClick: () => l(Vt(t.account.accountAddress)),
                            analyticsProps: s
                        })
                    }, {
                        content: e.jsx(vl, {
                            tokenSymbol: t.symbol,
                            onClick: () => l(Vt(t.account.accountAddress)),
                            analyticsProps: s
                        })
                    }],
                    bottomButton: !1
                }))
            },
            children: n === "horizontal" ? e.jsx(ti, {
                className: "w-4 h-4"
            }) : e.jsx(Bs, {
                className: "w-4 h-4"
            })
        })
    },
    ts = {
        location: S.YOUR_HOLDINGS,
        app_source: "stake"
    },
    oo = ({
        token: t,
        isLoading: s,
        showLifetimeRewards: n
    }) => {
        var u;
        const {
            formatPriceWithCurrency: l
        } = _e(), a = W(), c = s.stakingTokenBalances || s.stakingProviders, i = s.stakingRewards, r = _(Yt), {
            accounts: o
        } = _(Wn, rt), m = o == null ? void 0 : o.find(h => h.address.toLowerCase() === t.account.accountAddress.toLowerCase());
        return e.jsxs("div", {
            className: "flex flex-col rounded-2xl p-2 md:p-5 bg-default h-[156px] md:h-[200px] w-[248px] md:w-[440px] shadow-card",
            children: [e.jsxs("div", {
                className: "flex justify-between items-start",
                children: [e.jsx(ha, {
                    iconUrl: `https://static.cx.metamask.io/api/v1/tokenIcons/1/${t.address.toLowerCase()}.png`,
                    eyebrowText: t.symbol,
                    text: t.name,
                    iconSize: "large"
                }), ee ? e.jsx(co, {
                    token: t,
                    analyticsProps: ts
                }) : e.jsx(si, {
                    token: t,
                    position: window.matchMedia("(max-width: 767px)").matches ? "bottomLeft" : "topLeft",
                    analyticsProps: ts,
                    iconOrientation: "horizontal",
                    children: () => e.jsxs(e.Fragment, {
                        children: [e.jsx(On, {
                            address: t.address,
                            urlType: Mn.TOKEN,
                            chainId: t.chainId,
                            tokenSymbol: t.symbol,
                            analyticsProps: ts
                        }), e.jsx(Ll, {
                            tokenSymbol: t.symbol,
                            onClick: () => a(Vt(t.account.accountAddress)),
                            analyticsProps: ts
                        }), e.jsx(vl, {
                            tokenSymbol: t.symbol,
                            onClick: () => a(Vt(t.account.accountAddress)),
                            analyticsProps: ts
                        })]
                    })
                })]
            }), e.jsxs("div", {
                className: "flex items-center mt-1 p-1 ml-11 border border-default rounded-full w-min",
                children: [e.jsx(jt, {
                    accountIdenticonType: r,
                    address: t.account.accountAddress,
                    avatarUri: m == null ? void 0 : m.ensAvatar,
                    size: 4,
                    className: "rounded-full flex items-center mr-2"
                }), e.jsx(f, {
                    subdued: !0,
                    scale: L.ParagraphXs,
                    className: "text-xxs",
                    children: lt(Ht(t.account.name), 15)
                })]
            }), e.jsx("div", {
                className: "border-t border-default my-2 md:my-4 w-full"
            }), e.jsxs("div", {
                className: "flex justify-around items-center gap-2",
                children: [e.jsxs("div", {
                    className: "flex flex-col justify-center h-full w-[108px] md:w-[130px]",
                    children: [c ? e.jsx(ae, {
                        className: "mt-0 mb-1 h-5 md:h-6 w-24 md:w-28"
                    }) : e.jsx("p", {
                        className: "md:text-xl text-center truncate",
                        children: l(t.account.balance * ((u = t.value) == null ? void 0 : u.price))
                    }), e.jsx(we, {
                        text: "Current Balance",
                        id: "balance-tooltip",
                        tooltipText: e.jsx(ze, {
                            type: "currentBalance",
                            displayHeader: !0
                        }),
                        mobileTooltip: e.jsx(ze, {
                            type: "currentBalance"
                        }),
                        className: "!text-xxs md:!text-xs text-alternative"
                    })]
                }), e.jsx("div", {
                    className: Ie("border-l border-default h-12 hidden", {
                        flex: n
                    })
                }), n && e.jsxs("div", {
                    className: "flex flex-col justify-center h-full w-[108px] md:w-[130px]",
                    children: [i ? e.jsx(ae, {
                        className: "mt-0 mb-1 h-5 md:h-6 w-24 md:w-28"
                    }) : e.jsx("p", {
                        className: Ie("md:text-xl text-center truncate", {
                            "text-success-default": t.totalRewardToUsd || 0 > 0
                        }),
                        children: typeof(t == null ? void 0 : t.totalRewardToUsd) == "number" ? `+${l(t.totalRewardToUsd)}` : "--"
                    }), e.jsx(we, {
                        text: "Lifetime Rewards",
                        id: "rewards-tooltip",
                        tooltipText: e.jsx(ze, {
                            type: "lifeTimeRewards",
                            displayHeader: !0
                        }),
                        mobileTooltip: e.jsx(ze, {
                            type: "lifeTimeRewards"
                        }),
                        className: "!text-xxs md:!text-xs text-alternative"
                    })]
                }), e.jsx("div", {
                    className: Ie("border-l border-default h-12", {
                        "hidden md:flex": n
                    })
                }), e.jsxs("div", {
                    className: Ie("flex flex-col justify-center h-full w-[108px] md:w-[130px]", {
                        "hidden md:flex": n
                    }),
                    children: [c ? e.jsx(ae, {
                        className: "mt-0 mb-1 h-5 md:h-6 w-24 md:w-28"
                    }) : e.jsx("p", {
                        className: "md:text-xl text-center truncate",
                        children: typeof(t == null ? void 0 : t.apy) == "number" ? Fn(t.apy, 2) : "--"
                    }), e.jsx(we, {
                        text: "Current Rewards %",
                        id: "rewards-percentage-tooltip",
                        tooltipText: e.jsx(ze, {
                            type: "currentRewards",
                            displayHeader: !0
                        }),
                        mobileTooltip: e.jsx(ze, {
                            type: "currentRewards"
                        }),
                        className: "!text-xxs md:!text-xs text-alternative"
                    })]
                })]
            })]
        })
    },
    ro = {
        year: void 0,
        month: "numeric",
        weekday: "short",
        day: "numeric"
    },
    mo = {
        hour: "numeric",
        minute: "2-digit",
        hour12: !0,
        timeZoneName: "short"
    },
    uo = ({
        withdrawalRequest: t,
        stakedTokenIconUrl: s,
        isLoading: n
    }) => {
        const {
            amountOfStakedToken: l = 0,
            isFinalized: a,
            owner: c,
            requestId: i,
            claimDate: r,
            stakedToken: o,
            stakedTokenAddress: m,
            nativeToken: u
        } = t, h = Te(), {
            convertToNativeToken: j
        } = ds(m), T = fa(l), g = _(Yt), {
            nativeTokenAmount: b
        } = j(T), k = ai(o), {
            accounts: N
        } = _(Wn, rt), E = N == null ? void 0 : N.find(y => y.address.toLowerCase() === c.toLowerCase()), R = d.useCallback(() => {
            h(`/stake/withdraw/${o}/claim`, {
                state: {
                    requestId: i
                }
            })
        }, [h, i, o]), w = d.useCallback(() => a ? "Now" : r.toLocaleDateString(void 0, ro) + " " + r.toLocaleTimeString(void 0, mo), [a, r]);
        return e.jsxs("div", {
            className: "flex flex-col items-center rounded-2xl p-2 md:p-5 bg-default h-[156px] md:h-[200px] w-[248px] md:w-[440px] shadow-card",
            children: [e.jsx(we, {
                text: "Expected ready by",
                id: `${k}-expected-ready-by`,
                tooltipText: e.jsx(on, {
                    providerId: k
                }),
                mobileTooltip: e.jsx(on, {
                    providerId: k
                }),
                className: "!text-xxs md:!text-xs text-alternative"
            }), e.jsx(f, {
                scale: L.ParagraphBase,
                bold: !0,
                children: w()
            }), e.jsx("div", {
                className: "border-t border-default my-1 md:my-4 w-full"
            }), e.jsxs("div", {
                className: "flex justify-around items-center gap-2",
                children: [e.jsxs("div", {
                    className: "hidden md:flex items-center",
                    children: [e.jsxs("div", {
                        className: "flex flex-col items-center justify-center gap-1 h-full w-[130px] px-1",
                        children: [n ? e.jsx(ae, {
                            className: "m-0 h-5 md:h-6 w-24 md:w-28"
                        }) : e.jsxs("span", {
                            className: "flex gap-1 items-center w-full justify-center",
                            children: [e.jsx("img", {
                                src: s,
                                className: "w-4 h-4 md:w-5 md:h-5 rounded-full",
                                alt: ""
                            }), e.jsxs("p", {
                                className: "text-xs md:text-sm truncate",
                                children: [Ye(F(T, 4), {
                                    thousandSeparator: !0
                                }), " ", o]
                            })]
                        }), e.jsx(f, {
                            className: "!text-xxs md:!text-xs text-alternative",
                            children: "Withdrawing"
                        })]
                    }), e.jsx("div", {
                        className: "border-l border-default h-12"
                    })]
                }), e.jsxs("div", {
                    className: "flex flex-col items-center justify-center gap-1 h-full w-[108px] md:w-[130px] px-1",
                    children: [n ? e.jsx(ae, {
                        className: "m-0 h-5 md:h-6 w-24 md:w-28"
                    }) : e.jsxs("span", {
                        className: "flex gap-1 items-center w-full justify-center",
                        children: [e.jsx("img", {
                            src: ht[u] || "",
                            className: "w-4 h-4 md:w-5 md:h-5 rounded-full",
                            alt: ""
                        }), e.jsxs("p", {
                            className: "text-xs md:text-sm truncate",
                            children: [Ye(F(b, 4), {
                                thousandSeparator: !0
                            }), " ", u]
                        })]
                    }), e.jsx(we, {
                        text: "Receiving",
                        id: "receiving-rewards-tooltip",
                        tooltipText: e.jsx(rn, {}),
                        mobileTooltip: e.jsx(rn, {}),
                        className: "!text-xxs md:!text-xs text-alternative"
                    })]
                }), e.jsx("div", {
                    className: "border-l border-default h-12"
                }), e.jsxs("div", {
                    className: "flex flex-col items-center justify-center h-full gap-1 w-[108px] md:w-[130px] px-1",
                    children: [e.jsxs("div", {
                        className: "flex items-center w-min",
                        children: [e.jsx(jt, {
                            accountIdenticonType: g,
                            address: c,
                            avatarUri: E == null ? void 0 : E.ensAvatar,
                            className: "rounded-full items-center mr-1 block md:hidden !w-4 !h-4",
                            size: 4
                        }), e.jsx(jt, {
                            accountIdenticonType: g,
                            address: c,
                            avatarUri: E == null ? void 0 : E.ensAvatar,
                            className: "rounded-full items-center mr-1 hidden md:block !w-5 !h-5",
                            size: 5
                        }), e.jsx(f, {
                            className: "!text-xs md:!text-sm",
                            children: lt(Ht(c), 13)
                        })]
                    }), e.jsx(f, {
                        className: "!text-xxs md:!text-xs text-alternative",
                        children: "Receiver"
                    })]
                })]
            }), e.jsx(B, {
                width: "full",
                className: "mt-1 md:mt-3",
                disabled: !a,
                onClick: R,
                children: "Claim rewards"
            })]
        })
    },
    dn = (t, s) => `${t}-${s}`,
    mn = (t, s, n) => `${t}-${s}-${n}`,
    xo = "flex gap-2 overflow-x-scroll overflow-y-hidden whitespace-nowrap p-8 -ml-8 -mr-4",
    ho = "md:flex-wrap md:gap-3 md:overflow-x-visible md:overflow-y-visible md:mt-6 md:mx-0 md:p-0",
    fo = () => {
        const t = W(),
            {
                formatPriceWithCurrency: s
            } = _e(),
            {
                stakeRewardsFeatureFlag: n
            } = it(),
            {
                connectedAccounts: l,
                connectedAccountAddresses: a
            } = Je(),
            {
                stakingChainId: c,
                shouldUseTestnet: i
            } = ft(Vn, Bn),
            {
                stakingTokenBalances: r,
                isLoadingStakingTokenBalances: o
            } = _(Hn(l, i)),
            {
                data: m = [],
                isLoading: u
            } = ms(void 0),
            {
                nativeTokens: h
            } = _($n(), (p, x) => p.nativeTokens.length === x.nativeTokens.length),
            j = d.useMemo(() => m.reduce((p, x) => (p[x.tokenSymbol.toLowerCase()] = x.logoUrl, p), {}), [m]),
            {
                withdrawalRequests: T,
                isLoadingWithdrawalRequests: g
            } = _(ni),
            b = o || g,
            k = !o && !g && r.length < 1 && T.length < 1,
            N = r.reduce((p, x) => {
                var v, D;
                return p + ((D = (v = x.account) == null ? void 0 : v.value) == null ? void 0 : D.marketValue)
            }, 0),
            {
                data: E = [],
                isLoading: R
            } = li({
                addresses: a
            }, {
                skip: !n || !l.length
            }),
            w = E.reduce((p, x) => p.plus(Re(x.totalRewardToUsd)), xe).toNumber();
        d.useEffect(() => {
            a.length > 0 && h.length > 0 && t(ii({
                accountAddresses: a,
                chainId: c,
                nativeTokens: h
            }))
        }, [t, a, h, c]);
        const y = d.useMemo(() => {
            const p = m.reduce((D, A) => (D[dn(A.chainId, A.tokenAddress)] = A, D), {}),
                x = E.reduce((D, A) => {
                    const I = ci(A.tokenSymbol);
                    return D[mn(A.chainId, A.address, I)] = {
                        totalReward: A.totalReward,
                        totalRewardToUsd: A.totalRewardToUsd
                    }, D
                }, {}),
                v = r.map(D => {
                    const A = p[dn(D.chainId.toString(), D.address)],
                        I = x[mn(D.chainId, D.account.accountAddress, D.address)];
                    return { ...D,
                        name: (A == null ? void 0 : A.name) || "",
                        apy: A == null ? void 0 : A.apy,
                        totalReward: I != null && I.totalReward ? Number(I == null ? void 0 : I.totalReward) : void 0,
                        totalRewardToUsd: I != null && I.totalRewardToUsd ? Number(I == null ? void 0 : I.totalRewardToUsd) : void 0
                    }
                });
            return oi(v, [D => {
                var A;
                return (A = D.account.value) == null ? void 0 : A.marketValue
            }], "desc")
        }, [m, r, E]);
        return e.jsxs("div", {
            className: "grid",
            children: [e.jsx(f, {
                scale: L.HeadingMd,
                bold: !0,
                className: "text-lg sm:text-xl",
                children: "Your holdings"
            }), e.jsxs("div", {
                className: "flex mt-6 gap-4 sm:px-6 md:px-0",
                children: [e.jsxs("div", {
                    children: [e.jsx(we, {
                        text: Mt.currentBalance.title,
                        id: "currentBalance",
                        tooltipText: e.jsx(ze, {
                            type: "currentBalance"
                        }),
                        mobileTooltip: e.jsx(ze, {
                            type: "currentBalance"
                        })
                    }), o ? e.jsx(ae, {
                        className: "h-6 sm:h-7"
                    }) : e.jsx("div", {
                        className: "text-2xl sm:text-3xl font-semibold",
                        children: s(N)
                    })]
                }), n ? e.jsxs("div", {
                    children: [e.jsx(we, {
                        id: "lifeTimeRewards",
                        text: Mt.lifeTimeRewards.title,
                        tooltipText: e.jsx(ze, {
                            type: "lifeTimeRewards"
                        }),
                        mobileTooltip: e.jsx(ze, {
                            type: "lifeTimeRewards"
                        })
                    }), R ? e.jsx(ae, {
                        className: "h-6 sm:h-7"
                    }) : e.jsx("div", {
                        className: Ie("text-2xl sm:text-3xl font-semibold", {
                            "text-success-default": w > 0
                        }),
                        children: isNaN(w) ? "--" : `+${s(w)}`
                    })]
                }) : null]
            }), k ? e.jsx("p", {
                className: "mt-6 text-alternative text-sm",
                children: "You don't have any holdings yet. Get started by selecting a staking provider."
            }) : b ? e.jsx(ae, {
                className: "mt-8 md:mt-6 h-[156px] sm:h-[200px] w-full"
            }) : e.jsxs("div", {
                className: `${xo} ${ho}`,
                children: [T.map(p => e.jsx(uo, {
                    withdrawalRequest: p,
                    isLoading: g,
                    stakedTokenIconUrl: j[p.stakedToken.toLowerCase()] || ""
                }, p.requestId.toString())), y.map(p => e.jsx(oo, {
                    token: p,
                    isLoading: {
                        stakingTokenBalances: o,
                        stakingProviders: u,
                        stakingRewards: R
                    },
                    showLifetimeRewards: n
                }, `${p.account.accountAddress}-${p.address}-${p.chainId}`))]
            })]
        })
    },
    go = ({
        children: t,
        className: s,
        iconUrl: n,
        showActiveStyle: l,
        onClick: a
    }) => e.jsx(e.Fragment, {
        children: e.jsxs("button", {
            onClick: a,
            className: Ie("flex max-w-max items-center rounded-full text-xs sm:text-sm px-2 py-1 sm:py-1.5", {
                "bg-primary-default font-medium text-primary-inverse": l,
                "bg-transparent text-alternative border border-default": !l
            }, s),
            children: [e.jsx("img", {
                src: n,
                className: "rounded-full flex-shrink-0 h-6 w-6 mr-1 border border-muted dark:border-0",
                alt: ""
            }), t]
        })
    }),
    ko = ({
        filters: t,
        currentFilter: s,
        setCurrentFilter: n,
        className: l
    }) => {
        const a = c => {
            n(c)
        };
        return e.jsx("div", {
            className: "flex gap-2",
            children: t.map(({
                iconUrl: c,
                id: i,
                children: r
            }) => e.jsx(go, {
                className: l,
                iconUrl: c,
                onClick: () => a(i),
                showActiveStyle: s === i,
                children: r
            }, i))
        })
    },
    Pa = ({
        className: t,
        location: s
    }) => {
        const {
            t: n
        } = oe();
        return e.jsx(Pe, {
            href: Fa,
            className: t,
            target: "_blank",
            onClick: () => {
                ct({
                    external_link: Fa,
                    location: s,
                    app_source: "stake",
                    link_text: n("stake.faq")
                })
            },
            children: n("stake.faq")
        })
    },
    po = () => {
        const {
            t
        } = oe();
        return e.jsx(Pe, {
            href: Ba,
            target: "_blank",
            onClick: () => {
                ct({
                    external_link: Ba,
                    location: S.STAKE_HOME,
                    app_source: "stake",
                    link_text: t("stake.riskDisclosures")
                })
            },
            children: t("stake.riskDisclosures")
        })
    },
    jo = () => {
        const {
            thirdPartyStakingOutOfBetaFeatureFlag: t
        } = it(), {
            t: s
        } = oe();
        return e.jsxs("div", {
            className: "mr-3",
            children: [e.jsxs("span", {
                className: "flex items-center gap-2",
                children: [e.jsx("h2", {
                    className: "text-l sm:text-xl font-semibold text-default w-max",
                    children: s("stake.stakingProviders")
                }), !t && e.jsx(In, {
                    variant: "infoSubdued",
                    children: s("stake.beta")
                })]
            }), e.jsx("p", {
                className: "hidden text-alternative text-sm sm:inline",
                children: e.jsx(Un, {
                    i18nKey: "stake.learnMoreAboutStaking",
                    components: [e.jsx(Pa, {
                        location: S.STAKE_HOME
                    }), e.jsx(po, {})]
                })
            })]
        })
    },
    un = [Es.REWARDS, Es.CONTROl, Es.POPULARITY],
    xn = "stakeBasicsShown",
    hn = () => {
        const t = W(),
            {
                search: s
            } = us(),
            n = d.useMemo(() => {
                const x = new URLSearchParams(s).get("providersFilter");
                return x ? x.toLowerCase() === "matic" ? K.MATIC : x.toLowerCase() === "eth" ? K.ETH : null : null
            }, [s]),
            {
                nativeTokens: l
            } = _($n(), (p, x) => p.nativeTokens.length === x.nativeTokens.length),
            {
                connectedAccounts: a
            } = Ae(),
            [c] = ri.useLocalStorage(xn),
            {
                stakingChainId: i,
                shouldUseTestnet: r
            } = ft(Vn, Bn),
            [o, m] = d.useState(Es.REWARDS),
            {
                filterProvidersBy: u
            } = _(p => p.stake.thirdPartyStaking),
            {
                isLoadingContractConstants: h
            } = _(Qt),
            {
                stakingTokenBalances: j,
                isLoadingStakingTokenBalances: T
            } = _(Hn(a, r), (p, x) => p.stakingTokenBalances.length === x.stakingTokenBalances.length);
        d.useEffect(() => {
            n && l.includes(n) && t(Va(n))
        }, [n, l, t]);
        const g = d.useMemo(() => {
                const p = l.find(v => v === Ha),
                    x = l.filter(v => v !== Ha);
                return p ? [p, ...x] : l
            }, [l]),
            {
                data: b = [],
                isLoading: k
            } = ms(void 0);
        di.map(p => Gn.endpoints.getStakingTokenBalances.useQuery({
            accounts: a,
            tokenAddress: p,
            useTestnet: r
        }, {
            skip: !a.length,
            refetchOnMountOrArgChange: !0
        })), d.useEffect(() => {
            t(wt({
                chainId: i,
                providerId: ce.LIDO
            })), t(wt({
                chainId: i,
                providerId: ce.STADER
            })), t(Zt({
                chainId: i
            }))
        }, [t, i]);
        const N = d.useMemo(() => mi(o, b, u), [o, b, u]),
            E = d.useMemo(() => ui(b), [b]),
            R = d.useMemo(() => {
                const p = b.map(x => x.tokenAddress);
                return xi(j, p)
            }, [b, j]);
        d.useEffect(() => {
            c || t(le(ie.ExperienceOnboarding, {
                id: "stake-basics-modal",
                title: "New to staking?",
                localStorageKey: xn,
                analyticsModalName: S.STAKE_ONBOARDING_MODAL,
                content: hi,
                footerLink: {
                    href: fi,
                    text: "Learn more with MetaMask Learn"
                }
            }, {
                content: {
                    maxWidth: "30rem"
                }
            }))
        }, [t, c]), d.useEffect(() => {
            b.length && !T && gi({
                provider_data: b.map(p => ({
                    provider_id: p.providerId,
                    provider_token: p.tokenSymbol,
                    native_token: p.nativeToken,
                    control: p.networkControl,
                    control_rank: E.control[p.tokenSymbol],
                    popularity: p.totalStakedBalance,
                    popularity_rank: E.popularity[p.tokenSymbol],
                    rewards_rate: p.apy,
                    rewards_rank: E.rewards[p.tokenSymbol],
                    number_accounts_for_provider_token: R[p.tokenAddress]
                }))
            })
        }, [b, E, T, R]);
        const w = ({
                id: p
            }) => {
                pi({
                    current_sort: o,
                    new_sort: p,
                    token_to_stake: u.toLowerCase()
                }), m(p)
            },
            y = () => ee ? e.jsx(B, {
                endIcon: e.jsx(ki, {
                    className: "h-4 w-4"
                }),
                variant: "outline",
                className: "text-xs max-w-[150px] px-4",
                onClick: () => {
                    t(le(ie.MobileActionMenu, {
                        title: "Sort by",
                        actions: un.map(p => ({
                            content: st[p].dropdownText(u),
                            onClick: () => w({
                                id: p
                            })
                        })),
                        buttonVariant: "filled"
                    })), Pn({
                        current_sort: o,
                        token_to_stake: u.toLowerCase()
                    })
                },
                children: e.jsxs("p", {
                    className: "truncate",
                    children: ["Sort by ", st[o].dropdownName]
                })
            }) : e.jsx(io, {
                items: un.map(p => ({
                    id: st[p].dropdownId,
                    value: st[p].dropdownText(u),
                    name: st[p].dropdownName
                })),
                selected: o,
                onSelect: w
            });
        return e.jsxs("div", {
            className: "gap-6 grid",
            children: [e.jsx(jo, {}), e.jsxs("div", {
                className: "rounded-2xl p-0 sm:py-5 sm:px-6 bg-inherit md:bg-default",
                children: [e.jsxs("div", {
                    className: at("flex xs:justify-between items-center w-full mb-7 gap-2", g.length < 2 ? "xs:mb-0 gap-0" : null),
                    children: [g.length > 1 ? e.jsx(ko, {
                        currentFilter: u,
                        setCurrentFilter: p => {
                            t(Va(p)), ve({
                                text: p,
                                location: S.STAKE_TOKEN_FILTER
                            })
                        },
                        filters: g.map(p => ({
                            iconUrl: ht[p] || "",
                            id: p,
                            children: p
                        }))
                    }) : e.jsx("div", {}), e.jsx(y, {})]
                }), N.length ? e.jsx(lo, {
                    providers: N,
                    sortCategory: o
                }) : k || h ? e.jsx(ae, {
                    className: Ie("!w-full !h-[232px]", {
                        "!h-[208px]": ee
                    })
                }) : e.jsx("div", {
                    children: "No staking providers found"
                })]
            }), e.jsx(fo, {})]
        })
    },
    Dl = ({
        location: t
    }) => {
        const {
            t: s
        } = oe();
        return e.jsx("div", {
            "data-testid": "stake-holdings-error-state",
            className: "rounded-lg p-8 flex justify-center md:bg-default",
            children: e.jsxs("div", {
                className: "flex flex-col items-center gap-2 max-w-[360px]",
                children: [e.jsx(ji, {
                    className: "stroke-primary-inverse fill-error-default w-8 h-8"
                }), e.jsx(f, {
                    scale: L.HeadingXs,
                    bold: !0,
                    center: !0,
                    children: s("stake.unableToDisplay")
                }), e.jsx(f, {
                    center: !0,
                    children: s("stake.errorState")
                }), e.jsx(Jt, {
                    href: Is,
                    target: "_blank",
                    className: "mt-2",
                    onClick: () => {
                        ct({
                            link_text: s("stake.supportLink"),
                            location: t,
                            external_link: Is,
                            app_source: "stake"
                        })
                    },
                    children: s("stake.supportLink")
                })]
            })
        })
    },
    Pl = () => {
        const {
            t
        } = oe();
        return e.jsxs("div", {
            className: "flex rounded-lg justify-center items-center text-center flex-col px-8 h-48 md:h-60 md:bg-default mt-6",
            children: [e.jsx(Il, {
                className: "stroke-icon-alternative mb-3"
            }), e.jsx(f, {
                subdued: !0,
                children: t("stake.noHoldingsYet")
            })]
        })
    },
    wo = () => {
        const {
            t
        } = oe();
        return e.jsxs("div", {
            "data-testid": "mobile-stake-empty-state",
            className: "flex flex-col justify-center items-center px-4",
            children: [e.jsx("div", {
                className: "bg-primary-muted rounded-full p-2",
                children: e.jsx(rs, {
                    className: "w-4 h-4 stroke-info-default stroke-6"
                })
            }), e.jsx(f, {
                bold: !0,
                scale: L.HeadingSm,
                className: "text-center my-2",
                children: t("stake.stakeAnyAmountEarnReward")
            }), e.jsx(f, {
                scale: L.ParagraphBase,
                className: "text-center",
                children: t("stake.stakeSmarter")
            }), e.jsx("div", {
                className: "flex justify-center ",
                children: e.jsxs(Jt, {
                    className: "text-center text-sm mt-4",
                    variant: "outline",
                    target: "_blank",
                    href: Ls,
                    onClick: () => {
                        ct({
                            link_text: t("stake.learnMore"),
                            location: S.POOLED_STAKE_EMPTY_STATE,
                            external_link: Ls
                        })
                    },
                    children: [t("stake.learnMore"), e.jsx(xs, {
                        className: "ml-2",
                        size: 14
                    })]
                })
            })]
        })
    },
    To = () => {
        const {
            t
        } = oe();
        return e.jsxs("div", {
            "data-testid": "stake-empty-state",
            children: [e.jsxs("div", {
                className: "flex flex-col md:flex-row rounded-lg justify-center p-6 h-12 gap-6 md:h-full md:bg-default",
                children: [e.jsxs("div", {
                    className: "w-3/4 relative lg:block hidden",
                    children: [e.jsx("div", {
                        style: {
                            paddingTop: "56.25%"
                        }
                    }), e.jsx("iframe", {
                        className: "absolute top-0 left-0 w-full h-full",
                        height: "360",
                        src: "https://youtube.com/embed/eHEymH5s97o?rel=0",
                        title: "YouTube video player",
                        allow: "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen"
                    })]
                }), e.jsxs("div", {
                    className: "flex-col lg:w-1/4 md:w-full md:text-center lg:text-left",
                    children: [e.jsx(f, {
                        scale: L.HeadingXs,
                        bold: !0,
                        children: t("stake.stakeSmarter")
                    }), e.jsx(f, {
                        subdued: !0,
                        className: "mt-2",
                        children: t("stake.stakeAnyAmountEarnReward")
                    }), e.jsx(Pe, {
                        href: Ls,
                        target: "_blank",
                        className: "flex mt-6 md:items-center md:justify-center lg:justify-start",
                        onClick: () => {
                            ct({
                                link_text: t("stake.learnMore"),
                                location: S.POOLED_STAKE_EMPTY_STATE,
                                external_link: Ls,
                                app_source: "stake"
                            })
                        },
                        children: e.jsxs("span", {
                            className: "flex gap-1 items-center md:text-center lg:text-left",
                            children: [t("stake.learnMore"), " ", e.jsx(xs, {
                                className: "w-4 h-4"
                            })]
                        })
                    })]
                })]
            }), e.jsx(Pl, {})]
        })
    },
    bo = () => {
        const [t, s] = d.useState(""), [n, l] = d.useState(0), a = W(), i = _(Kn, rt).exchangeRates, {
            isLoadingExchangeRates: r,
            transformWithExchangeRates: o
        } = gt(), m = r ? void 0 : 1 / i.eth.value, {
            selectedAccountAddress: u
        } = _(ye => ye.stake), {
            accountAddresses: h,
            connectedAccounts: j,
            connectedAccountAddresses: T
        } = Je(), {
            activeAccount: g,
            isActive: b
        } = Ae(), k = j.find(ye => Tt(ye.address, u)) || g, N = Tt(k == null ? void 0 : k.address, g == null ? void 0 : g.address), {
            stakingChainId: E,
            shouldUseTestnet: R
        } = ft(zn, qn), {
            isOnNetwork: w
        } = hs(E), y = _(Vs, rt), [p, x] = d.useState(0), v = new C(p).multipliedBy(Xn), [D, A] = d.useState(!1), I = _(wi), O = d.useMemo(() => ga(async (ye, ot, Pt) => {
            try {
                A(!0);
                const Ge = await Ti(ot, ye, se.ZERO_ADDRESS, Pt);
                x(Ge), A(!1)
            } catch (Ge) {
                is(Ge), A(!1)
            }
        }, 300), []), Y = K.ETH, H = bt[Y].tokenAddress, {
            isLoadingTokenData: G
        } = Bt(H, "ethereum", R), {
            estimatedGasFeeInEth: U,
            maxEthAvailable: q,
            ethBalance: ne,
            isLoadingTokenBalance: z
        } = ns(H, Y, R, v.toNumber());
        d.useEffect(() => {
            l(U)
        }, [U]);
        const {
            refetch: $
        } = Oe({
            accounts: j,
            tokenAddress: H,
            useTestnet: R
        }, {
            skip: !j.length
        }), {
            data: M,
            isLoading: fe
        } = bi({
            chainId: E
        }), P = (M == null ? void 0 : M.apy) || "", re = (M == null ? void 0 : M.feePercent) || 0, X = new C(t || "").gt(xe), Ee = new C(t || "").minus(new C(q)), de = X && Ee.gt(xe), Se = !X || de || G || !N || !w || z || fe, me = b && !w && X, Z = b && de && !z, [ge, te] = d.useState(!1), V = D || I, Ce = d.useCallback(async () => {
            te(!0);
            try {
                if (window.ethereum) {
                    const ye = {
                            accountAddresses: h,
                            chainIds: y
                        },
                        ot = new es(window.ethereum, E),
                        Ge = await new Ni(E).encodeDepositData(F(t || "", 18), u, se.ZERO_ADDRESS);
                    Ge && (Q => a(fs({
                        provider: ot,
                        transactionData: Q,
                        transactionFailedCallback: (pe, He) => {
                            te(!1), He || is(pe), Hs({
                                app_source: "stake",
                                location: S.POOLED_STAKE_INPUT,
                                is_tx_signed: !He
                            })
                        },
                        tokensToUpdate: [{
                            accountAddress: u,
                            tokenAddress: H,
                            chainId: E
                        }],
                        request: ye,
                        transactionConfirmedCallback: () => {
                            te(!1), $s({
                                app_source: "stake",
                                location: S.POOLED_STAKE_INPUT
                            }), $(), a(Gn.endpoints.getPooledStakes.initiate({
                                accounts: T,
                                chainId: E,
                                resetCache: !0
                            }, {
                                forceRefetch: !0
                            })), s("")
                        },
                        metadata: {
                            chainId: E,
                            transactionCategory: Qn.Contract,
                            valueUsd: o(t || "", "eth", "usd").toNumber(),
                            nativeAssetPriceUsd: m
                        }
                    })))(Ge)
                } else throw Error("Ethereum provider not found")
            } catch {
                te(!1), a(dt({
                    message: "Transaction could not be submitted",
                    type: "error"
                }))
            }
        }, [h, y, a, m, $, s, E, t, u, H, o, T]), {
            runAction: ke,
            isActionPendingConfirmation: De
        } = Si(Ce, We.POOLED);
        d.useEffect(() => {
            de && U ? l(U) : !de && X && O(u, t, E)
        }, [U, X, de, O, u, t, E]);
        const Me = d.useCallback(() => {
            ke(), _i({
                location: S.POOLED_STAKE_INPUT,
                text: Nt,
                selected_provider: kt
            })
        }, [ke]);
        return {
            additionalFundsRequired: Ee,
            ethBalance: ne,
            ethPriceUsd: m,
            fee: re,
            fetchTokenBalances: $,
            gasFee: n,
            handleOnClickConfirm: Me,
            isActive: b,
            isLoadingGasValues: V,
            isNonZeroAmount: X,
            isOverMaximum: de,
            isButtonDisabled: Se,
            isLoadingTokenBalance: z,
            isTransactionSubmitted: ge,
            isTransactionPendingEligibilityConfirmation: De,
            isLoadingVaultData: fe,
            maxEthAvailable: q,
            nativeStakingToken: Y,
            rewardsRate: P,
            setStakeAmount: s,
            showAddMoreFundsWarning: Z,
            showSwitchNetworkWarning: me,
            stakeAmount: t,
            stakingChainId: E
        }
    },
    No = ({
        rate: t,
        gasFee: s,
        isLoadingGasValues: n,
        isLoadingRate: l,
        nativeStakingToken: a,
        stakeAmount: c
    }) => {
        const {
            toggleCurrency: i,
            formatValue: r,
            isLoadingExchangeRates: o,
            currencySetting: m
        } = Ai({
            tokenSymbol: a,
            tokenDecimals: 4
        }), u = n || m !== "token" && o, h = s + c;
        return e.jsxs("div", {
            className: "flex flex-col gap-2 w-full m-auto rounded-lg p-4 border border-muted",
            id: "pooled-staking-quote-summary",
            children: [e.jsxs("div", {
                className: "flex justify-between",
                children: [e.jsx(f, {
                    bold: !0,
                    children: "Staking info"
                }), c > 0 && e.jsx(Ei, {
                    dataTooltipId: "stake-quote-summary-currency-toggle-button",
                    onClick: i
                })]
            }), e.jsxs("div", {
                className: "flex justify-between items-center",
                children: [e.jsx(we, {
                    id: "rewards",
                    text: e.jsx(f, {
                        scale: L.ParagraphSm,
                        children: "Rewards rate"
                    }),
                    tooltipText: e.jsx($a, {}),
                    mobileTooltip: e.jsx($a, {})
                }), e.jsx(ws, {
                    className: "text-success-default",
                    isLoading: l,
                    text: t ? St(t, {
                        inputFormat: _t.PERCENTAGE,
                        outputFormat: At.PERCENT_SIGN,
                        fixed: 1
                    }) : void 0
                })]
            }), e.jsxs("div", {
                className: "flex justify-between items-center",
                children: [e.jsx(f, {
                    scale: L.ParagraphSm,
                    children: "Est. annual rewards"
                }), e.jsx(ws, {
                    isLoading: u,
                    text: t && c ? r({
                        value: t / 100 * c
                    }) : gs,
                    className: "truncate"
                })]
            }), c > 0 && e.jsxs(e.Fragment, {
                children: [e.jsx("div", {
                    className: "border-b border-muted -ml-4 -mr-4 h-1"
                }), e.jsxs("div", {
                    className: "flex justify-between items-center gap-2",
                    children: [e.jsx(we, {
                        id: "gas-fee-review-quote",
                        text: e.jsx(f, {
                            scale: L.ParagraphSm,
                            children: "Est. gas fee"
                        }),
                        tooltipText: e.jsx(Ua, {}),
                        mobileTooltip: e.jsx(Ua, {})
                    }), e.jsx(ws, {
                        isLoading: u,
                        text: s ? r({
                            value: s
                        }) : void 0
                    })]
                }), e.jsxs("div", {
                    className: "flex justify-between items-center gap-2",
                    children: [e.jsx(f, {
                        scale: L.ParagraphSm,
                        children: "Total"
                    }), e.jsx(ws, {
                        isLoading: u,
                        text: h ? r({
                            value: h
                        }) : void 0,
                        className: "truncate"
                    })]
                })]
            })]
        })
    },
    Ol = () => {
        const {
            additionalFundsRequired: t,
            ethBalance: s,
            ethPriceUsd: n,
            fee: l,
            fetchTokenBalances: a,
            gasFee: c,
            handleOnClickConfirm: i,
            isActive: r,
            isLoadingGasValues: o,
            isLoadingTokenBalance: m,
            isNonZeroAmount: u,
            isOverMaximum: h,
            isButtonDisabled: j,
            isLoadingVaultData: T,
            maxEthAvailable: g,
            rewardsRate: b,
            setStakeAmount: k,
            nativeStakingToken: N,
            showAddMoreFundsWarning: E,
            showSwitchNetworkWarning: R,
            stakeAmount: w,
            stakingChainId: y,
            isTransactionSubmitted: p,
            isTransactionPendingEligibilityConfirmation: x
        } = bo(), v = W(), {
            transactionReceipt: D,
            transactionStatus: A,
            transactionError: I
        } = _(ka), O = () => {
            v(le(ie.PooledStakingInfo, {
                fee: l
            }, {
                content: {
                    maxWidth: "420px",
                    maxHeight: "100vh",
                    overflowY: "auto"
                }
            })), Ms({
                text: "More info",
                selected_provider: kt,
                app_source: "stake",
                location: S.POOLED_STAKE_INPUT
            })
        };
        return d.useEffect(() => {
            p && (A === Ke.Fetched ? v(le(ie.TransactionInProgress, {
                analyticsLocation: S.POOLED_STAKE_DEPOSIT_TRANSACTION_IN_PROGRESS
            }, {
                content: {
                    width: "420px"
                }
            })) : A === Ke.Confirmed && (D != null && D.transactionHash) ? (v(le(ie.TransactionSuccess, {
                analyticsLocation: S.POOLED_STAKE_DEPOSIT_TRANSACTION_COMPLETE,
                content: Ci,
                hash: D == null ? void 0 : D.transactionHash,
                transactionChain: y,
                redirectUrl: ee ? `${Le.STAKE}?tab=${We.POOLED}` : void 0
            }, {
                content: {
                    width: "420px"
                }
            })), v(pt())) : A === Ke.Error && ((I == null ? void 0 : I.code) === pa.ACTION_REJECTED ? v(pt()) : (v(le(ie.TransactionFailure, {
                analyticsLocation: S.POOLED_STAKE_DEPOSIT_TRANSACTION_FAILED
            }, {
                content: {
                    height: "312px",
                    width: "420px"
                }
            })), v(pt()))))
        }, [v, p, y, I == null ? void 0 : I.code, D == null ? void 0 : D.transactionHash, A]), d.useEffect(() => () => {
            v(pt())
        }, [v]), e.jsx("div", {
            "data-testid": "pooled-staking-input-card",
            children: e.jsxs("div", {
                className: "flex flex-col gap-6 w-full md:w-[320px] mb-12 xs:m-auto rounded-lg p-0 md:py-6 md:px-4 bg-inherit md:bg-default",
                children: [e.jsxs("div", {
                    className: "flex justify-between items-center content-center",
                    children: [e.jsx("div", {
                        className: "w-4"
                    }), e.jsx(Yn, {
                        location: S.POOLED_STAKE_INPUT,
                        providerId: kt
                    }), e.jsxs("div", {
                        "data-tooltip-id": "pooled-staking-more-info",
                        className: "flex",
                        children: [e.jsx("button", {
                            "aria-label": "More information",
                            onClick: O,
                            children: e.jsx(yi, {
                                className: "h-4 w-4 rounded-full"
                            })
                        }), e.jsx(Xt, {
                            id: "pooled-staking-more-info",
                            className: "max-w-[275px] sm:max-w-xs",
                            children: "More info"
                        })]
                    })]
                }), e.jsxs("div", {
                    children: [e.jsxs(f, {
                        scale: L.ParagraphBase,
                        className: "font-medium pb-2",
                        children: ["Stake ", N]
                    }), e.jsx(Ri, {
                        analyticsProps: {
                            location: S.POOLED_STAKE_INPUT,
                            selected_provider: kt,
                            app_source: "stake"
                        },
                        estimatedGasFeeInEth: c,
                        handleValueUpdate: a,
                        imageUrl: ht[N],
                        inputValue: w,
                        isLoadingBalances: m,
                        isNonZeroAmount: u,
                        isOverMaximum: h,
                        maxTokenBalanceAvailable: g,
                        nativeToken: N,
                        setInputValue: k,
                        tokenBalance: s,
                        tokenPriceInUsd: n || 0,
                        tokenSymbol: N
                    })]
                }), e.jsx(No, {
                    rate: Number(b),
                    gasFee: c,
                    isLoadingGasValues: o,
                    isLoadingRate: T,
                    nativeStakingToken: N,
                    stakeAmount: Number(w || "")
                }), E && e.jsx(Us, {
                    nativeStakingToken: N,
                    providerId: kt,
                    maxEthAvailable: g,
                    additionalEthRequired: t,
                    location: S.POOLED_STAKE_INPUT
                }), R && e.jsx(ks, {
                    chainId: y,
                    analyticsProps: {
                        location: S.POOLED_STAKE_INPUT,
                        app_source: "stake"
                    }
                }), e.jsx(Ii, {}), e.jsx(et, {
                    children: r ? e.jsxs(e.Fragment, {
                        children: [e.jsx(B, {
                            className: "mb-4",
                            disabled: j,
                            isLoading: p || x,
                            loadingText: "Sign transaction in wallet",
                            onClick: i,
                            width: "full",
                            children: "Confirm"
                        }), e.jsx(Gs, {
                            experience: Li.POOLED_STAKE
                        })]
                    }) : e.jsx(ja, {})
                })]
            })
        })
    };
var Rt = (t => (t.ROOT = "pooled-staking", t.UNSTAKE = "unstake", t.CLAIM = "claim", t))(Rt || {});
const da = ({
        text: t
    }) => {
        const {
            t: s
        } = oe();
        return e.jsx("div", {
            className: "mb-6",
            children: e.jsx(qs, {
                title: e.jsx("div", {
                    className: "flex justify-center",
                    children: e.jsx(f, {
                        bold: !0,
                        center: !0,
                        className: "mr-6",
                        children: t
                    })
                }),
                titleClassName: "w-full",
                hideGlobalActions: !0,
                pagination: [{
                    title: s("stake.goBack"),
                    href: `${Le.STAKE}?tab=${We.POOLED}`
                }, {
                    title: s("stake.pooledStakingWithStakingLowercase"),
                    href: location.pathname
                }]
            })
        })
    },
    So = () => {
        const {
            t
        } = oe();
        return e.jsxs($t, {
            children: [e.jsx(da, {
                text: t("stake.stake")
            }), e.jsx(Ol, {})]
        })
    },
    _o = () => {
        const {
            t
        } = oe();
        return e.jsxs(Ks, {
            children: [e.jsx(Ne, {
                path: "unstake",
                element: e.jsxs($t, {
                    children: [e.jsx(da, {
                        text: t("stake.unstakeETH")
                    }), e.jsx(vi, {})]
                })
            }), e.jsx(Ne, {
                path: "claim",
                element: e.jsxs($t, {
                    children: [e.jsx(da, {
                        text: t("stake.reviewYourClaim")
                    }), e.jsx(Di, {})]
                })
            }), e.jsx(Ne, {
                path: "*",
                element: e.jsx(So, {})
            })]
        })
    },
    Ao = _o,
    Eo = "overflow-x-scroll whitespace-nowrap -mr-4 pr-4 pb-4 mb-4",
    Co = "md:auto-cols-fr md:overflow-x-visible md:mr-0 md:pr-0",
    Ml = ({
        summaryItems: t,
        isLoading: s,
        isLoadingFooter: n,
        isLoadingHeader: l
    }) => e.jsx("div", {
        className: `grid grid-flow-col w-full gap-4 ${Eo} ${Co}`,
        children: t.map((a, c) => e.jsxs("div", {
            className: "flex flex-col gap-1 rounded-lg md:p-4 md:bg-default",
            children: [e.jsx(f, {
                as: "div",
                scale: L.ParagraphSm,
                className: "md:truncate",
                children: a.title
            }), s ? e.jsx(ae, {
                className: "h-12 w-full"
            }) : e.jsxs(e.Fragment, {
                children: [l ? e.jsx(ae, {
                    className: "w-full h-7 md:h-8 mt-0"
                }) : e.jsx(f, {
                    className: "text-lg md:text-2xl md:truncate",
                    bold: !0,
                    children: a.value
                }), n ? e.jsx(ae, {
                    className: "w-full h-5 mt-0"
                }) : e.jsx(f, {
                    scale: L.ParagraphSm,
                    className: "md:truncate",
                    children: a.footer
                })]
            })]
        }, c))
    }),
    yo = ({
        data: t,
        selectedAccounts: s
    }) => {
        const {
            formatEtherWithCurrency: n
        } = _e(), {
            isLoadingExchangeRates: l
        } = gt(), a = d.useMemo(() => {
            const m = s.map(j => j.address.toLowerCase()),
                h = t.filter(({
                    account: j
                }) => m.includes(j)).reduce((j, T) => (j.lifetimeRewards = j.lifetimeRewards.plus(T.lifetimeRewards), j.stakedBalance = j.stakedBalance.plus(T.assets).plus(Pi(T.unstakingRequests)), T.aggregatedClaimableRequest && (j.availableToClaim = j.availableToClaim.plus(T.aggregatedClaimableRequest.claimedAssets)), j), {
                    stakedBalance: xe,
                    availableToClaim: xe,
                    lifetimeRewards: xe
                });
            return {
                stakedBalance: J(h.stakedBalance, -18),
                availableToClaim: J(h.availableToClaim, -18),
                lifetimeRewards: J(h.lifetimeRewards, -18)
            }
        }, [t, s]), c = {
            title: e.jsx(we, {
                id: "stakedBalance",
                text: e.jsx(f, {
                    scale: L.ParagraphSm,
                    className: "sm:truncate",
                    children: "Staked balance"
                }),
                tooltipText: e.jsx(Ga, {}),
                mobileTooltip: e.jsx(Ga, {})
            }),
            value: `${F(a.stakedBalance,4)} ${K.ETH}`,
            footer: n(a.stakedBalance.toNumber())
        }, i = {
            title: e.jsx(we, {
                id: "availableToClaim",
                text: e.jsx(f, {
                    scale: L.ParagraphSm,
                    className: "sm:truncate",
                    children: "Available to claim"
                }),
                tooltipText: e.jsx(Ka, {}),
                mobileTooltip: e.jsx(Ka, {})
            }),
            value: `${F(a.availableToClaim,4)} ${K.ETH}`,
            footer: n(a.availableToClaim.toNumber())
        }, r = {
            title: e.jsx(we, {
                id: "lifetimeRewards",
                text: e.jsx(f, {
                    scale: L.ParagraphSm,
                    className: "sm:truncate",
                    children: "Lifetime rewards"
                }),
                tooltipText: e.jsx(qa, {}),
                mobileTooltip: e.jsx(qa, {})
            }),
            value: `${F(a.lifetimeRewards,4)} ${K.ETH}`,
            footer: n(a.lifetimeRewards.toNumber())
        };
        let o;
        return a.availableToClaim.eq(xe) ? o = [c, r] : o = [c, i, r], e.jsx(Ml, {
            isLoadingHeader: l,
            summaryItems: o
        })
    },
    aa = {
        [Qe.ACTIVE]: ta.ACTIVE,
        [mt.CLAIMABLE]: ta.CLAIMABLE,
        [mt.UNSTAKING]: ta.UNSTAKING
    },
    It = ({
        status: t,
        withdrawalTimestamp: s,
        showIcon: n = !0,
        className: l
    }) => {
        const a = s ? Oi(Date.now(), Number(s)) : "11 days";
        switch (t) {
            case Qe.ACTIVE:
                return e.jsxs("span", {
                    className: Ie("flex items-center gap-1 md:gap-2", l),
                    children: [n && e.jsx(za, {
                        className: "text-default min-h-[20px] min-w-[20px] max-h-[20px] max-w-[20px]"
                    }), e.jsx("p", {
                        className: "text-sm truncate",
                        children: aa[t]
                    })]
                });
            case mt.CLAIMABLE:
                return e.jsxs("span", {
                    className: Ie("flex items-center gap-1 md:gap-2", l),
                    children: [n && e.jsx(za, {
                        className: "text-success-default min-h-[20px] min-w-[20px] max-h-[20px] max-w-[20px]"
                    }), e.jsx("p", {
                        className: "text-sm truncate text-success-default",
                        children: aa[t]
                    })]
                });
            case mt.UNSTAKING:
                return e.jsx(Mi, {
                    className: Ie("w-full", l),
                    id: `pooledStakingUnstakingToolTip-${a}`,
                    text: e.jsx("p", {
                        className: "text-sm text-warning-default whitespace-nowrap md:whitespace-normal truncate",
                        children: aa[t]
                    }),
                    tooltipText: e.jsxs(f, {
                        children: ["Ready in ", a]
                    }),
                    mobileTooltip: e.jsxs(f, {
                        children: ["Ready in ", a]
                    }),
                    icon: n ? e.jsx(Wi, {
                        className: "fill-warning-default min-h-[20px] min-w-[20px] max-h-[20px] max-w-[20px]"
                    }) : null
                });
            default:
                return e.jsx("p", {
                    className: "text-sm",
                    children: gs
                })
        }
    },
    Lt = ({
        account: t,
        type: s
    }) => e.jsxs("span", {
        className: "flex gap-2 items-center",
        children: [e.jsx(jt, {
            className: "flex items-center",
            accountIdenticonType: s,
            address: t,
            size: 6
        }, t), e.jsx("p", {
            className: "truncate text-sm",
            children: lt(Ht(t), 15)
        })]
    }),
    Ro = ({
        analyticsProps: t,
        data: s,
        getEthValueInFiat: n,
        nativeStakingToken: l
    }) => {
        const a = W(),
            c = Te(),
            i = _(Yt);
        return e.jsx("button", {
            className: "flex w-full justify-center rounded-lg hover:bg-hover",
            onClick: () => {
                je({ ...t
                }), a(le(ie.MobileActionMenu, {
                    title: "Stake info",
                    children: e.jsxs("div", {
                        className: "flex flex-col gap-4",
                        children: [e.jsxs("span", {
                            className: "flex justify-between",
                            children: [e.jsx(f, {
                                children: "Account"
                            }), e.jsx(Lt, {
                                account: s.account,
                                type: i
                            })]
                        }), e.jsxs("span", {
                            className: "flex justify-between",
                            children: [e.jsx(f, {
                                children: "Status"
                            }), e.jsx(It, {
                                status: s.status
                            })]
                        }), e.jsxs("span", {
                            className: "flex justify-between",
                            children: [e.jsx(f, {
                                children: "Balance"
                            }), e.jsxs("span", {
                                className: "flex gap-2",
                                children: [e.jsxs(f, {
                                    className: "text-alternative",
                                    children: [F(J(new C(s.assets), -18), 4), " ", l]
                                }), e.jsx(f, {
                                    children: n(new C(s.assets))
                                })]
                            })]
                        }), e.jsxs("span", {
                            className: "flex justify-between",
                            children: [e.jsx(f, {
                                children: "Lifetime rewards"
                            }), e.jsxs("span", {
                                className: "flex gap-2",
                                children: [e.jsxs(f, {
                                    className: "text-success-default",
                                    children: [F(J(new C(s.lifetimeRewards), -18), 4), " ", l]
                                }), e.jsx(f, {
                                    className: "text-success-default",
                                    children: n(new C(s.lifetimeRewards))
                                })]
                            })]
                        })]
                    }),
                    actions: [{
                        content: e.jsx(B, {
                            variant: "link",
                            size: "lg",
                            children: "Unstake"
                        }),
                        onClick: () => {
                            a(Zn(s)), c(`${Rt.ROOT}/${Rt.UNSTAKE}`), je({
                                action_type: Be.WITHDRAW_BALANCE,
                                ...t
                            })
                        }
                    }],
                    buttonVariant: "outline",
                    actionsClassName: "flex justify-center py-2"
                }))
            },
            children: e.jsx(wa, {
                className: "w-6 h-6"
            })
        })
    },
    Io = ({
        analyticsProps: t,
        data: s
    }) => {
        const n = W(),
            [l, a] = d.useState(!1),
            c = d.useRef(null);
        return Ws(c, () => a(!1)), e.jsxs("div", {
            id: "pooled-staking-rewards-table-more-menu",
            ref: c,
            className: "relative sm:inline-block text-left",
            children: [e.jsx("button", {
                className: "inline-flex justify-center items-center w-6 h-6 text-icon-alternative transition-colors rounded-lg hover:bg-hover",
                onClick: () => {
                    je({ ...t
                    }), a(!l)
                },
                children: e.jsx(Bs, {
                    className: "w-4 h-4"
                })
            }), e.jsx(Fs, {
                isOpen: l,
                className: "p-1 text-sm right-0 sm:w-max bottom-8",
                position: "right",
                children: e.jsx("div", {
                    className: "flex flex-col items-start gap-6 p-6",
                    children: e.jsx(B, {
                        variant: "link",
                        onClick: () => {
                            n(Zn(s)), n(le(ie.PooledStakingUnstake, void 0, {
                                content: {
                                    width: "420px"
                                }
                            })), je({
                                action_type: Be.POOLED_STAKE_UNSTAKE,
                                ...t
                            })
                        },
                        children: "Unstake"
                    })
                })
            })]
        })
    },
    fn = ({
        analyticsProps: t,
        data: s,
        getEthValueInFiat: n,
        nativeStakingToken: l
    }) => ee ? e.jsx(Ro, {
        analyticsProps: t,
        data: s,
        getEthValueInFiat: n,
        nativeStakingToken: l
    }) : e.jsx(Io, {
        analyticsProps: t,
        data: s
    }),
    gn = ({
        analyticsProps: t,
        exitRequest: s
    }) => {
        const n = W(),
            l = Te(),
            {
                t: a
            } = oe(),
            c = a("explore.airdrops.claim");
        return e.jsx(B, {
            variant: "outline",
            size: "sm",
            onClick: () => {
                ve({
                    text: c,
                    ...t
                }), n(Fi(s)), ee ? l(`${Rt.ROOT}/${Rt.CLAIM}`) : n(le(ie.PooledStakingClaim, void 0, {
                    content: {
                        width: "420px"
                    }
                }))
            },
            children: a("explore.airdrops.claim")
        })
    },
    na = 10,
    kn = [{
        id: "account-header",
        name: "Account",
        className: "hidden lg:table-cell col-span-2 pr-0",
        sortId: "account",
        sortSelector: () => t => t.account
    }, {
        id: "balance-header",
        name: "Balance",
        className: "col-span-3 lg:col-span-2 xl:col-span-2 pr-0",
        sortId: "balance",
        sortSelector: () => t => new C(t.assets).toNumber()
    }, {
        id: "rewards-header",
        name: "Lifetime rewards",
        className: "hidden xl:table-cell col-span-2 pr-0",
        sortId: "rewards",
        sortSelector: () => t => new C(t.lifetimeRewards).toNumber()
    }, {
        id: "status-header",
        name: "Status",
        className: "col-span-3 lg:col-span-2 pr-0",
        sortId: "status",
        sortSelector: () => t => Bi(t),
        sortDefault: !0
    }],
    Xe = K.ETH,
    Os = {
        app_source: "stake",
        selected_token: Xe,
        location: S.POOLED_STAKE_REWARDS_TABLE
    },
    Lo = ({
        data: t,
        selectedAccounts: s
    }) => {
        const {
            formatEtherWithCurrency: n
        } = _e(), {
            isLoadingExchangeRates: l
        } = gt(), a = _(Yt), c = g => n(Number(J(g, -18))), i = d.useMemo(() => {
            const g = s.map(b => b.address.toLowerCase());
            return t.filter(({
                account: b
            }) => g.includes(b))
        }, [t, s]), {
            sortedData: r
        } = La({
            defaultValue: "status asc",
            columns: kn,
            data: i
        }), [o, m] = d.useState(1), u = o * na, h = u - na, j = r.slice(h, u), T = ({
            nextPage: g
        }) => {
            m(g)
        };
        return e.jsxs(e.Fragment, {
            children: [e.jsxs("table", {
                id: "pooled-staking-rewards-table-accounts-view",
                children: [e.jsx("thead", {
                    className: "border-y border-muted hidden md:table-header-group",
                    children: e.jsx("tr", {
                        className: "grid grid-cols-8 xl:grid-cols-9",
                        children: kn.map(g => e.jsx("th", {
                            id: g.id,
                            className: at(g.className, "text-alternative"),
                            children: e.jsx("div", {
                                id: `${g.id}-data`,
                                className: "flex items-center",
                                children: e.jsx("span", {
                                    className: "truncate",
                                    children: g.name
                                })
                            })
                        }, g.id))
                    })
                }), e.jsx("tbody", {
                    className: "md:divide-y",
                    children: j.map(g => {
                        const b = g.status === Qe.ACTIVE ? "activeBalance" : g.aggregatedClaimableRequest ? "claimableRequest" : "unstakingRequest";
                        return g.status === Qe.NEVER_STAKED || g.status === Qe.INACTIVE_WITH_REWARDS_ONLY ? null : e.jsxs(e.Fragment, {
                            children: [g.status === Qe.ACTIVE && e.jsx(Po, {
                                dataByAccountAndStatus: g,
                                accountIdenticonType: a,
                                isLoadingExchangeRates: l,
                                getEthValueInFiat: c
                            }), g.aggregatedClaimableRequest && e.jsx(vo, {
                                account: g.account,
                                accountIdenticonType: a,
                                isLoadingExchangeRates: l,
                                getEthValueInFiat: c,
                                aggregatedClaimableRequest: g.aggregatedClaimableRequest,
                                showAccountName: b === "claimableRequest"
                            }), g.unstakingRequests.map((k, N) => e.jsx(Do, {
                                account: g.account,
                                accountIdenticonType: a,
                                isLoadingExchangeRates: l,
                                getEthValueInFiat: c,
                                unstakingRequest: k,
                                showAccountName: b === "unstakingRequest" && N === 0
                            }, k.positionTicket))]
                        })
                    })
                })]
            }), e.jsx(va, {
                totalCount: i.length,
                pageSize: na,
                currentPage: o,
                onChange: T
            })]
        })
    },
    vo = ({
        account: t,
        accountIdenticonType: s,
        isLoadingExchangeRates: n,
        getEthValueInFiat: l,
        aggregatedClaimableRequest: a,
        showAccountName: c
    }) => e.jsxs("tr", {
        className: "items-center md:h-20 md:grid grid-cols-8 xl:grid-cols-9 border-muted",
        children: [e.jsx("td", {
            className: "hidden lg:table-cell col-span-2 text-sm pr-0",
            children: c && e.jsx(Lt, {
                account: t,
                type: s
            })
        }), e.jsx("td", {
            className: "hidden md:table-cell col-span-3 lg:col-span-2 text-sm pr-0",
            children: e.jsx(xt, {
                className: "!text-sm",
                symbol: Xe,
                balance: F(J(new C(a.claimedAssets), -18), 4),
                isLoadingMarketValue: n,
                formattedMarketValue: l(new C(a.claimedAssets))
            })
        }), e.jsx("td", {
            className: "hidden xl:table-cell col-span-2 text-sm pr-0"
        }), e.jsx("td", {
            className: "hidden md:table-cell col-span-3 xl:col-span-2 pr-0",
            children: e.jsx(It, {
                status: mt.CLAIMABLE
            })
        }), e.jsx("td", {
            className: "hidden md:table-cell col-span-2 lg:col-span-1",
            children: e.jsx("div", {
                className: "flex items-center justify-center w-6",
                children: e.jsx(gn, {
                    analyticsProps: Os,
                    exitRequest: {
                        account: t,
                        ...a
                    }
                })
            })
        }), e.jsx("td", {
            className: "table-cell px-0 md:hidden text-sm",
            children: e.jsx(Lt, {
                account: t,
                type: s
            })
        }), e.jsx("td", {
            className: "table-cell md:hidden w-full text-sm",
            children: n ? e.jsx(ae, {
                className: "w-full h-8 float-right"
            }) : e.jsxs(e.Fragment, {
                children: [e.jsxs("p", {
                    className: "text-right",
                    children: [F(J(new C(a.claimedAssets), -18), 4), " ", Xe]
                }), e.jsx(It, {
                    status: mt.CLAIMABLE,
                    className: "justify-end",
                    showIcon: !1
                })]
            })
        }), e.jsx("td", {
            className: "table-cell md:hidden px-0 w-6",
            children: e.jsx(gn, {
                analyticsProps: Os,
                exitRequest: {
                    account: t,
                    ...a
                }
            })
        })]
    }),
    Do = ({
        accountIdenticonType: t,
        account: s,
        isLoadingExchangeRates: n,
        getEthValueInFiat: l,
        unstakingRequest: a,
        showAccountName: c
    }) => e.jsxs("tr", {
        className: "items-center md:h-20 md:grid grid-cols-8 xl:grid-cols-9 border-muted",
        children: [e.jsx("td", {
            className: "hidden lg:table-cell col-span-2 text-sm pr-0",
            children: c && e.jsx(Lt, {
                account: s,
                type: t
            })
        }), e.jsx("td", {
            className: "hidden md:table-cell col-span-3 lg:col-span-2 text-sm pr-0",
            children: e.jsx(xt, {
                className: "!text-sm",
                symbol: Xe,
                balance: F(J(new C(a.assetsToDisplay), -18), 4),
                isLoadingMarketValue: n,
                formattedMarketValue: l(new C(a.assetsToDisplay))
            })
        }), e.jsx("td", {
            className: "hidden xl:table-cell col-span-2 text-sm pr-0"
        }), e.jsx("td", {
            className: "hidden md:table-cell col-span-3 xl:col-span-2 pr-0",
            children: e.jsx(It, {
                status: mt.UNSTAKING,
                withdrawalTimestamp: a.withdrawalTimestamp
            })
        }), e.jsx("td", {
            className: "hidden md:table-cell col-span-2 lg:col-span-1"
        }), e.jsx("td", {
            className: "table-cell px-0 md:hidden text-sm",
            children: e.jsx(Lt, {
                account: s,
                type: t
            })
        }), e.jsx("td", {
            className: "table-cell md:hidden w-full text-sm",
            children: n ? e.jsx(ae, {
                className: "w-full h-8 float-right"
            }) : e.jsxs(e.Fragment, {
                children: [e.jsxs("p", {
                    className: "text-right",
                    children: [F(J(new C(a.assetsToDisplay), -18), 4), " ", Xe]
                }), e.jsx(It, {
                    status: mt.UNSTAKING,
                    withdrawalTimestamp: a.withdrawalTimestamp,
                    className: "justify-end",
                    showIcon: !1
                })]
            })
        }), e.jsx("td", {
            className: "table-cell md:hidden px-0 w-6"
        })]
    }),
    Po = ({
        dataByAccountAndStatus: t,
        accountIdenticonType: s,
        isLoadingExchangeRates: n,
        getEthValueInFiat: l
    }) => e.jsxs("tr", {
        className: "items-center md:h-20 md:grid grid-cols-8 xl:grid-cols-9 border-muted",
        children: [e.jsx("td", {
            className: "hidden lg:table-cell col-span-2 text-sm pr-0",
            children: e.jsx(Lt, {
                account: t.account,
                type: s
            })
        }), e.jsx("td", {
            className: "hidden md:table-cell col-span-3 lg:col-span-2 text-sm pr-0",
            children: e.jsx(xt, {
                className: "!text-sm",
                symbol: Xe,
                balance: F(J(new C(t.assets), -18), 4),
                isLoadingMarketValue: n,
                formattedMarketValue: l(new C(t.assets))
            })
        }), e.jsx("td", {
            className: "hidden xl:table-cell col-span-2 text-sm pr-0",
            children: e.jsx(xt, {
                className: "!text-sm text-success-default",
                symbol: Xe,
                isLoadingMarketValue: n,
                balance: F(J(new C(t.lifetimeRewards), -18), 4),
                formattedMarketValue: l(new C(t.lifetimeRewards))
            })
        }), e.jsx("td", {
            className: "hidden md:table-cell col-span-3 xl:col-span-2 pr-0",
            children: e.jsx(It, {
                status: t.status
            })
        }), e.jsx("td", {
            className: "hidden md:table-cell col-span-2 lg:col-span-1",
            children: e.jsx("div", {
                className: "flex items-center justify-center w-6",
                children: e.jsx(fn, {
                    analyticsProps: Os,
                    data: t,
                    getEthValueInFiat: l,
                    nativeStakingToken: Xe
                })
            })
        }), e.jsx("td", {
            className: "table-cell px-0 md:hidden text-sm",
            children: e.jsx(Lt, {
                account: t.account,
                type: s
            })
        }), e.jsx("td", {
            className: "table-cell md:hidden w-full text-sm",
            children: n ? e.jsx(ae, {
                className: "w-full h-8 float-right"
            }) : e.jsxs(e.Fragment, {
                children: [e.jsxs("p", {
                    className: "text-right",
                    children: [F(J(new C(t.assets), -18), 4), " ", Xe]
                }), e.jsx(It, {
                    status: t.status,
                    className: "justify-end",
                    showIcon: !1
                })]
            })
        }), e.jsx("td", {
            className: "table-cell md:hidden px-0 w-6",
            children: e.jsx(fn, {
                analyticsProps: Os,
                data: t,
                getEthValueInFiat: l,
                nativeStakingToken: Xe
            })
        })]
    }),
    Oo = ({
        data: t,
        selectedAccounts: s,
        allAccounts: n,
        handleItemSelect: l,
        handleAccountSelect: a
    }) => {
        const {
            data: c
        } = Jn(el);
        return e.jsxs("div", {
            className: "flex flex-col gap-1 rounded-lg p-0 md:p-4 md:bg-default",
            children: [e.jsx(f, {
                scale: L.HeadingXs,
                bold: !0,
                children: "Your holdings"
            }), e.jsx(Rl, {
                accountValues: c,
                className: "sm:h-[42px] my-4",
                dropdownClassName: "sm:!left-0",
                selectedAccounts: s,
                allAccounts: n,
                handleItemSelect: l,
                handleAccountSelect: a
            }), e.jsx(Lo, {
                data: t,
                selectedAccounts: s
            })]
        })
    },
    Wl = () => {
        const {
            ownedAccounts: t
        } = Je(), [s, n] = d.useState([]);
        d.useEffect(() => {
            n(t.map(c => ({ ...c,
                selected: !0
            })))
        }, [t]);
        const l = d.useCallback(c => {
            const i = s.map(r => r.address === c ? { ...r,
                selected: !r.selected
            } : r);
            n(i)
        }, [s, n]);
        return {
            accountsDropdownState: s,
            handleItemSelect: l,
            handleAccountGroupSelect: c => {
                if (s.every(i => i.selected)) {
                    const i = c.map(r => ({ ...r,
                        selected: !1
                    }));
                    n(i)
                } else {
                    const i = c.map(r => ({ ...r,
                        selected: !0
                    }));
                    n(i)
                }
            }
        }
    },
    Mo = () => {
        const t = Te(),
            {
                connectedAccountAddresses: s,
                ownedAccounts: n
            } = Je(),
            {
                accountsDropdownState: l,
                handleItemSelect: a,
                handleAccountGroupSelect: c
            } = Wl(),
            {
                stakeDisasterRecoveryPooledStakingFeatureFlag: i
            } = it(),
            {
                stakingChainId: r
            } = ft(zn, qn),
            {
                data: o = [],
                isLoading: m,
                isError: u
            } = Vi({
                accounts: s,
                chainId: r
            }),
            h = o.some(({
                status: b
            }) => b === Qe.INACTIVE_WITH_REWARDS_ONLY),
            j = o.some(({
                status: b
            }) => b === Qe.ACTIVE || b === Qe.INACTIVE_WITH_EXIT_REQUESTS),
            T = h && !j,
            g = o.every(({
                status: b
            }) => b === Qe.NEVER_STAKED);
        return i ? e.jsx("div", {
            className: "w-full h-[100vh] -mt-7 -mb-20",
            children: e.jsx(Ia, {
                routeName: Ta.STAKE
            })
        }) : m ? e.jsx("div", {
            className: "flex justify-center items-center h-[420px]",
            children: e.jsx(Et, {})
        }) : e.jsx("div", {
            className: "w-full max-w-[1344px]",
            children: e.jsxs("div", {
                className: "flex flex-col grow md:flex-row gap-6 w-full mt-4",
                children: [ee ? e.jsx("div", {
                    className: "fixed bottom-0 left-0 right-0 w-full bg-default border-t border-default p-4 z-10",
                    children: e.jsx(B, {
                        width: "full",
                        onClick: () => {
                            ve({
                                text: "Stake",
                                location: S.POOLED_STAKE_MOBILE_HOME,
                                selected_provider: kt
                            }), t(`${Rt.ROOT}`)
                        },
                        children: "Stake"
                    })
                }) : e.jsx(Ol, {}), e.jsx("div", {
                    className: "flex flex-col w-full gap-2",
                    children: u ? e.jsx("div", {
                        className: "pb-12 xs:pb-0",
                        children: e.jsx(Dl, {
                            location: S.POOLED_STAKE_HOLDINGS_ERROR_STATE
                        })
                    }) : g ? e.jsx(Wo, {}) : e.jsxs("div", {
                        className: "pb-12 xs:pb-0",
                        children: [e.jsx(yo, {
                            data: o,
                            selectedAccounts: l.filter(b => b.selected)
                        }), T ? e.jsx(Pl, {}) : e.jsx(Oo, {
                            data: o,
                            selectedAccounts: l.filter(b => b.selected),
                            allAccounts: n,
                            handleItemSelect: a,
                            handleAccountSelect: c
                        })]
                    })
                })]
            })
        })
    },
    Wo = () => ee ? e.jsx("div", {
        className: "flex items-center justify-center mt-40",
        children: e.jsx(wo, {})
    }) : e.jsx("div", {
        className: "hidden md:block",
        children: e.jsx(To, {})
    }),
    Fo = ({
        validatorsDataFromSelectedAccounts: t,
        isLoadingValidatorData: s
    }) => {
        const {
            t: n
        } = oe(), l = ps(), {
            nativeStakingToken: a
        } = _(b => b.stake.validatorStaking), {
            formatEtherWithCurrency: c
        } = _e(), {
            isLoadingExchangeRates: i
        } = gt(), {
            data: r,
            isLoading: o
        } = tl({
            env: l
        }), {
            data: m,
            isLoading: u
        } = sl({
            env: l
        }), h = u ? null : (m == null ? void 0 : m.activeValidatorsCount) ? ? null, j = typeof h == "number" ? Hi(h) : null, T = (m == null ? void 0 : m.blockProposerAverageRewardWei) ? ? null, g = d.useMemo(() => {
            const b = t.map(({
                validators: k
            }) => k).flat().reduce((k, N) => {
                k.totalBalance = !Ct(N.status) && !Ve(N.status) ? k.totalBalance.plus(N.balance) : k.totalBalance;
                const E = !qe(N.status) && !Ve(N.status) ? new C(N.availableCLRewards).plus(N.availableELRewards) : xe;
                if (k.totalRewards = k.totalRewards.plus(E), N.status === nt.ACTIVE && typeof(N == null ? void 0 : N.rate) == "string") {
                    const R = ((N == null ? void 0 : N.daysActive) ? ? 0) + 1;
                    k.activeValidatorsTotalDaysActive += R, k.rateData.push({
                        daysActive: R,
                        rate: N.rate
                    })
                }
                return k
            }, {
                totalBalance: xe,
                totalRewards: xe,
                rateData: [],
                activeValidatorsTotalDaysActive: 0
            });
            return {
                totalBalance: J(b.totalBalance, -18),
                totalRewards: J(b.totalRewards, -18),
                avgActiveValidatorRate: al(b.rateData, b.activeValidatorsTotalDaysActive)
            }
        }, [t]);
        return e.jsx(Ml, {
            isLoadingHeader: i || s,
            summaryItems: [{
                title: e.jsx(we, {
                    id: "totalBalance",
                    text: e.jsx(f, {
                        scale: L.ParagraphSm,
                        className: "sm:truncate",
                        children: "Balance on validators"
                    }),
                    tooltipText: e.jsx(Xa, {}),
                    mobileTooltip: e.jsx(Xa, {})
                }),
                value: c(Number(g.totalBalance)),
                footer: `${F(g.totalBalance,4)} ${a}`
            }, {
                title: e.jsx(we, {
                    id: "totalRewards",
                    text: e.jsx(f, {
                        scale: L.ParagraphSm,
                        className: "sm:truncate",
                        children: "Available rewards"
                    }),
                    tooltipText: e.jsx(Qa, {}),
                    mobileTooltip: e.jsx(Qa, {})
                }),
                value: c(Number(g.totalRewards)),
                footer: `${F(g.totalRewards,4)} ${a}`
            }, {
                title: e.jsx(we, {
                    id: "overallRate",
                    text: e.jsx(f, {
                        scale: L.ParagraphSm,
                        className: "sm:truncate",
                        children: "Overall rate"
                    }),
                    tooltipText: e.jsx(Ya, {
                        avgDaysToProposeBlock: j,
                        averageProposerRewardWei: T
                    }),
                    mobileTooltip: e.jsxs("div", {
                        children: [e.jsx(Ya, {
                            avgDaysToProposeBlock: j,
                            averageProposerRewardWei: T
                        }), e.jsx(f, {
                            scale: L.ParagraphSm,
                            children: e.jsx(Pe, {
                                href: Za,
                                onClick: () => {
                                    Ja({
                                        text: n("stake.learnMoreAboutExpectedRate"),
                                        location: S.VALIDATOR_STAKE_EXPECTED_RATE_CARD,
                                        selected_provider: "consensys"
                                    })
                                },
                                target: "_blank",
                                children: n("stake.learnMoreAboutExpectedRate")
                            })
                        })]
                    })
                }),
                value: g.avgActiveValidatorRate ? St(g.avgActiveValidatorRate.toString(), {
                    inputFormat: _t.PERCENTAGE,
                    outputFormat: At.PERCENT_SIGN,
                    fixed: 2
                }) : "n/a",
                footer: e.jsxs(e.Fragment, {
                    children: [n("stake.expectedAsFirstWordOfSentence"), " ", o ? e.jsx(Et, {
                        size: "xs",
                        className: "ml-3"
                    }) : St(r, {
                        inputFormat: _t.PERCENTAGE,
                        outputFormat: At.PERCENT_SIGN,
                        fixed: 1
                    }), ". ", !ee && e.jsx(Pe, {
                        href: Za,
                        onClick: () => {
                            Ja({
                                text: n("stake.learnMoreAboutExpectedRate"),
                                location: S.VALIDATOR_STAKE_EXPECTED_RATE_CARD,
                                selected_provider: "consensys"
                            })
                        },
                        target: "_blank",
                        children: n("stake.learnMoreAboutExpectedRate")
                    })]
                })
            }]
        })
    },
    Bo = ({
        analyticsProps: t,
        getEthValueInFiat: s,
        chainId: n = se.ChainId.ETHEREUM,
        nativeStakingToken: l,
        validator: a
    }) => {
        const c = W(),
            i = Te(),
            r = ba(a);
        return e.jsx("button", {
            className: "flex w-full justify-center rounded-lg hover:bg-hover",
            onClick: () => {
                je({ ...t
                }), c(le(ie.MobileActionMenu, {
                    title: "Rewards info",
                    children: e.jsxs("div", {
                        className: "flex flex-col gap-4",
                        children: [e.jsxs("span", {
                            className: "flex justify-between",
                            children: [e.jsx(f, {
                                children: "Validator"
                            }), r ? e.jsx(f, {
                                children: a.index || lt(a.publicKey, 10)
                            }) : e.jsx(Et, {
                                size: "sm"
                            })]
                        }), e.jsxs("span", {
                            className: "flex justify-between",
                            children: [e.jsx(f, {
                                children: "Status"
                            }), e.jsx(Ut, {
                                validator: a
                            })]
                        }), e.jsxs("span", {
                            className: "flex justify-between",
                            children: [e.jsx(f, {
                                children: "Balance"
                            }), Ct(a.status) ? null : Ve(a.status) ? e.jsx(f, {
                                subdued: !0,
                                children: "N/A"
                            }) : e.jsxs("span", {
                                className: "flex gap-2",
                                children: [e.jsxs(f, {
                                    className: "text-alternative",
                                    children: [F(J(new C(a.balance), -18), 4), " ", l]
                                }), e.jsx(f, {
                                    children: s(new C(a.balance))
                                })]
                            })]
                        }), e.jsxs("span", {
                            className: "flex justify-between",
                            children: [e.jsx(f, {
                                children: "Rewards"
                            }), qe(a.status) ? null : Ve(a.status) ? e.jsx(f, {
                                subdued: !0,
                                children: "N/A"
                            }) : e.jsxs("span", {
                                className: "flex gap-2",
                                children: [e.jsxs(f, {
                                    className: "text-success-default",
                                    children: [F(J(new C(a.availableCLRewards).plus(a.availableELRewards), -18), 4), " ", l]
                                }), e.jsx(f, {
                                    className: "text-success-default",
                                    children: s(new C(a.availableCLRewards).plus(a.availableELRewards))
                                })]
                            })]
                        }), e.jsxs("span", {
                            className: "flex justify-between",
                            children: [e.jsx(f, {
                                children: "Rate"
                            }), yt(a.status) ? null : Ve(a.status) ? e.jsx(f, {
                                subdued: !0,
                                children: "N/A"
                            }) : typeof(a == null ? void 0 : a.rate) != "string" ? e.jsx(f, {
                                children: "Pending"
                            }) : e.jsx(f, {
                                children: St(a.rate, {
                                    inputFormat: _t.PERCENTAGE,
                                    outputFormat: At.PERCENT_SIGN,
                                    fixed: 2
                                })
                            })]
                        })]
                    }),
                    actions: [{
                        content: e.jsx(B, {
                            disabled: !zs(a) || !r,
                            variant: "link",
                            size: "lg",
                            children: "Withdraw rewards only"
                        }),
                        onClick: () => {
                            c(Gt(a)), je({
                                action_type: Be.WITHDRAW_REWARDS,
                                ...t
                            }), i(`${Fe.ROOT}/${Fe.REWARDS_WITHDRAWAL}`)
                        }
                    }, {
                        content: e.jsx(B, {
                            disabled: !Xs(a) || !r,
                            variant: "link",
                            size: "lg",
                            children: "Withdraw total balance"
                        }),
                        onClick: () => {
                            c(Gt(a)), je({
                                action_type: Be.WITHDRAW_BALANCE,
                                ...t
                            }), i(`${Fe.ROOT}/${Fe.BALANCE_WITHDRAWAL}`)
                        }
                    }, {
                        content: e.jsx(Jt, {
                            variant: "link",
                            size: "lg",
                            disabled: !r,
                            href: `${nl(n)}validator/${r?a.publicKey:""}`,
                            target: "_blank",
                            children: "View on beacon chain"
                        }),
                        onClick: () => {
                            je({
                                action_type: Be.VIEW_ON_EXPLORER,
                                ...t
                            })
                        }
                    }],
                    buttonVariant: "outline",
                    actionsClassName: "flex justify-center py-2"
                }))
            },
            children: e.jsx(wa, {
                className: "w-6 h-6"
            })
        })
    },
    pn = ({
        analyticsProps: t,
        chainId: s = se.ChainId.ETHEREUM,
        validator: n
    }) => {
        const l = d.useRef($i()).current,
            a = ba(n),
            c = a ? n.publicKey : l,
            [i, r] = d.useState(!1),
            o = d.useRef(null),
            m = W();
        return Ws(o, () => r(!1)), e.jsxs("div", {
            id: "validator-staking-validators-view-more-menu",
            ref: o,
            className: "relative sm:inline-block text-left",
            children: [e.jsxs("button", {
                className: "inline-flex justify-center items-center w-6 h-6 text-icon-alternative transition-colors rounded-lg hover:bg-hover",
                onClick: () => {
                    je({ ...t
                    }), r(!i)
                },
                "data-tooltip-id": `more-menu-${n.index}-${c}-${s}`,
                children: [e.jsx(Bs, {
                    className: "w-4 h-4"
                }), e.jsx(Xt, {
                    id: `more-menu-${n.index}-${c}-${s}`,
                    content: "Validator actions"
                })]
            }), e.jsx(Fs, {
                isOpen: i,
                className: "p-1 text-sm right-0 sm:w-max bottom-8",
                position: "right",
                children: e.jsxs("div", {
                    className: "flex flex-col items-start gap-6 p-6",
                    children: [e.jsx(B, {
                        disabled: !zs(n) || !a,
                        variant: "link",
                        onClick: () => {
                            m(Gt(n)), je({
                                action_type: Be.WITHDRAW_REWARDS,
                                ...t
                            }), m(le(ie.ValidatorStakingRewardsWithdrawal, void 0, {
                                content: {
                                    width: "420px"
                                }
                            }))
                        },
                        children: "Withdraw rewards only"
                    }), e.jsx(B, {
                        disabled: !Xs(n) || !a,
                        variant: "link",
                        onClick: () => {
                            m(Gt(n)), je({
                                action_type: Be.WITHDRAW_BALANCE,
                                ...t
                            }), m(le(ie.ValidatorStakingBalanceWithdrawal, void 0, {
                                content: {
                                    width: "420px"
                                }
                            }))
                        },
                        children: "Withdraw total balance"
                    }), e.jsx(Jt, {
                        target: "_blank",
                        variant: "link",
                        disabled: !a,
                        href: `${nl(s)}validator/${a?n.publicKey:""}`,
                        onClick: () => je({
                            action_type: Be.VIEW_ON_EXPLORER,
                            ...t
                        }),
                        children: "View on beacon chain"
                    })]
                })
            })]
        })
    },
    jn = [{
        id: "validator-header",
        name: "Validator",
        className: "hidden xl:table-cell col-span-2 pr-0",
        sortId: "validator",
        sortSelector: () => t => (t == null ? void 0 : t.index) ? ? 0
    }, {
        id: "status-header",
        name: "Status",
        className: "col-span-3 lg:col-span-2 pr-0",
        sortId: "status",
        sortSelector: () => t => ll(t),
        sortDefault: !0
    }, {
        id: "balance-header",
        name: "Balance",
        className: "col-span-3 lg:col-span-2 xl:col-span-2 pr-0",
        sortId: "balance",
        sortSelector: () => t => new C(t.balance).toNumber()
    }, {
        id: "rewards-header",
        name: "Available rewards",
        className: "hidden lg:table-cell col-span-2 pr-0",
        sortId: "rewards",
        sortSelector: () => t => qe(t.status) ? -1 : new C(t.availableCLRewards).plus(t.availableELRewards).toNumber()
    }, {
        id: "rate-header",
        name: "Rate",
        className: "hidden xl:table-cell col-span-1 pr-0",
        sortId: "rate",
        sortSelector: () => t => yt(t.status) ? 0 : t.rate ? ? 0
    }],
    bs = "Claim",
    Vo = ({
        validatorsDataFromSelectedAccounts: t
    }) => {
        const s = W(),
            n = Te(),
            {
                formatEtherWithCurrency: l
            } = _e(),
            {
                isLoadingExchangeRates: a
            } = gt(),
            {
                nativeStakingToken: c
            } = _(w => w.stake.validatorStaking),
            i = {
                app_source: "stake",
                selected_token: c,
                location: S.VALIDATOR_STAKE_REWARDS_TABLE_VALIDATORS_VIEW
            },
            r = w => l(Number(J(w, -18))),
            {
                stakingChainId: o
            } = ft(Sa, Na),
            m = d.useMemo(() => t.map(({
                validators: w
            }) => w).flat(), [t]),
            {
                sortType: u,
                sortDirection: h,
                handleSort: j,
                sortedData: T
            } = La({
                defaultValue: "status asc",
                columns: jn,
                data: m
            }),
            [g, b] = d.useState(1),
            k = g * Ft,
            N = k - Ft,
            E = T.slice(N, k),
            R = ({
                nextPage: w
            }) => {
                b(w)
            };
        return e.jsxs(e.Fragment, {
            children: [e.jsxs("table", {
                id: "validator-staking-rewards-table-validators-view",
                children: [e.jsx("thead", {
                    className: "border-y border-muted hidden md:table-header-group cursor-pointer",
                    children: e.jsx("tr", {
                        className: "grid grid-cols-8 xl:grid-cols-10",
                        children: jn.map(w => e.jsx("th", {
                            id: w.id,
                            onClick: j(w.sortId),
                            className: at(w.className, "text-alternative", u === w.sortId && "text-primary-default font-semibold"),
                            children: e.jsxs("div", {
                                id: `${w.id}-data`,
                                className: "flex items-center",
                                children: [e.jsx("span", {
                                    className: "truncate",
                                    children: w.name
                                }), u === w.sortId && e.jsxs("div", {
                                    className: "flex flex-col items-center ml-2",
                                    children: [e.jsx(Ps, {
                                        className: at("mb-1", h === "asc" ? "!fill-primary-default" : "fill-icon-alternative")
                                    }), e.jsx(Ps, {
                                        className: at("rotate-180", h === "desc" ? "!fill-primary-default" : "fill-icon-alternative")
                                    })]
                                })]
                            })
                        }, w.id))
                    })
                }), e.jsx("tbody", {
                    className: "md:divide-y divide-border-muted",
                    children: E.map((w, y) => {
                        const p = ba(w),
                            x = p ? w.publicKey : y;
                        return e.jsxs("tr", {
                            className: "items-center md:h-20 md:grid grid-cols-8 xl:grid-cols-10",
                            children: [e.jsx("td", {
                                className: "hidden xl:table-cell col-span-2 text-sm pr-0",
                                children: p ? w.index || lt(w.publicKey, 10) : e.jsx(Et, {
                                    size: "sm"
                                })
                            }), e.jsx("td", {
                                className: "hidden md:table-cell col-span-3 lg:col-span-2 pr-0",
                                children: e.jsx(Ut, {
                                    validator: w
                                })
                            }), e.jsx("td", {
                                className: "hidden md:table-cell col-span-3 lg:col-span-2 pr-0",
                                children: Ct(w.status) ? null : Ve(w.status) ? e.jsx("p", {
                                    className: "text-alternative",
                                    children: "N/A"
                                }) : e.jsx(xt, {
                                    className: "!text-sm",
                                    symbol: c,
                                    balance: F(J(new C(w.balance), -18), 4),
                                    isLoadingMarketValue: a,
                                    formattedMarketValue: r(new C(w.balance))
                                })
                            }), e.jsx("td", {
                                className: "hidden lg:table-cell col-span-2 pr-0 text-sm",
                                children: qe(w.status) ? null : Ve(w.status) ? e.jsx("p", {
                                    className: "text-alternative",
                                    children: "N/A"
                                }) : e.jsx(xt, {
                                    className: "!text-sm text-success-default",
                                    symbol: c,
                                    isLoadingMarketValue: a,
                                    balance: F(J(new C(w.availableCLRewards).plus(w.availableELRewards), -18), 4),
                                    formattedMarketValue: r(new C(w.availableCLRewards).plus(w.availableELRewards))
                                })
                            }), e.jsx("td", {
                                className: "hidden xl:table-cell col-span-1 text-sm pr-0",
                                children: yt(w.status) ? null : w.status === nt.REMOVED ? e.jsx("p", {
                                    className: "text-alternative",
                                    children: "N/A"
                                }) : typeof(w == null ? void 0 : w.rate) != "string" ? e.jsxs(e.Fragment, {
                                    children: [e.jsx("p", {
                                        "data-tooltip-id": `${w.index}-${x}-rate-tooltip`,
                                        children: "Pending"
                                    }), e.jsx(Xt, {
                                        id: `${w.index}-${x}-rate-tooltip`,
                                        className: "max-w-xs",
                                        content: "Rates are usually available within 2 days of your validator becoming active"
                                    })]
                                }) : St(w.rate, {
                                    inputFormat: _t.PERCENTAGE,
                                    outputFormat: At.PERCENT_SIGN,
                                    fixed: 2
                                })
                            }), e.jsx("td", {
                                className: "hidden md:table-cell col-span-2 xl:col-span-1",
                                children: e.jsx("div", {
                                    className: "flex items-center justify-center w-6",
                                    children: w.status === nt.CLAIMABLE ? e.jsx(B, {
                                        variant: "outline",
                                        disabled: !p,
                                        size: "sm",
                                        onClick: () => {
                                            ve({
                                                text: bs,
                                                ...i
                                            }), s(Gt(w)), s(le(ie.ValidatorStakingBalanceClaim, void 0, {
                                                content: {
                                                    width: "420px"
                                                }
                                            }))
                                        },
                                        children: bs
                                    }) : e.jsx(pn, {
                                        analyticsProps: i,
                                        chainId: o,
                                        validator: w
                                    })
                                })
                            }), e.jsxs("td", {
                                className: "table-cell px-0 md:hidden text-sm",
                                children: [e.jsx("p", {
                                    children: p ? w.index || lt(w.publicKey, 10) : e.jsx(Et, {
                                        size: "xs"
                                    })
                                }), e.jsx(Ut, {
                                    validator: w
                                })]
                            }), e.jsx("td", {
                                className: "table-cell md:hidden w-full text-sm",
                                children: Ct(w.status) && qe(w.status) || Ve(w.status) ? null : a ? e.jsx(ae, {
                                    className: "w-full h-8 float-right"
                                }) : e.jsxs(e.Fragment, {
                                    children: [e.jsx("p", {
                                        className: "text-right",
                                        children: r(new C(w.balance))
                                    }), qe(w.status) ? null : e.jsxs("p", {
                                        className: "text-success-default text-right",
                                        children: ["+", r(new C(w.availableCLRewards).plus(w.availableELRewards))]
                                    })]
                                })
                            }), e.jsx("td", {
                                className: "table-cell md:hidden px-0 w-6",
                                children: w.status === nt.CLAIMABLE ? e.jsx(B, {
                                    variant: "outline",
                                    disabled: !p,
                                    size: "sm",
                                    onClick: () => {
                                        ve({
                                            text: bs,
                                            ...i
                                        }), s(Gt(w)), ee ? n(`${Fe.ROOT}/${Fe.BALANCE_CLAIM}`) : s(le(ie.ValidatorStakingBalanceClaim, void 0, {
                                            content: {
                                                width: "420px"
                                            }
                                        }))
                                    },
                                    children: bs
                                }) : ee ? e.jsx(Bo, {
                                    analyticsProps: i,
                                    getEthValueInFiat: r,
                                    chainId: o,
                                    nativeStakingToken: c,
                                    validator: w
                                }) : e.jsx(pn, {
                                    analyticsProps: i,
                                    chainId: o,
                                    validator: w
                                })
                            })]
                        }, `${w.index}-${x}-${o}`)
                    })
                })]
            }), e.jsx(va, {
                totalCount: m.length,
                pageSize: Ft,
                currentPage: g,
                onChange: R
            })]
        })
    },
    wn = ({
        analyticsProps: t,
        chainId: s = se.ChainId.ETHEREUM,
        batchValidators: n
    }) => {
        const [l, a] = d.useState(!1), c = d.useRef(null), i = W();
        return Ws(c, () => a(!1)), e.jsxs("div", {
            id: "validator-staking-accounts-view-more-menu",
            ref: c,
            className: "relative sm:inline-block text-left",
            children: [e.jsxs("button", {
                className: "inline-flex justify-center items-center w-6 h-6 text-icon-alternative transition-colors rounded-lg hover:bg-hover",
                onClick: () => {
                    je({ ...t
                    }), a(!l)
                },
                "data-tooltip-id": `more-menu-${n.account}-${n.statusText}-${s}`,
                children: [e.jsx(Bs, {
                    className: "w-4 h-4"
                }), e.jsx(Xt, {
                    id: `more-menu-${n.account}-${n.statusText}-${s}`,
                    content: "Validator actions"
                })]
            }), e.jsx(Fs, {
                isOpen: l,
                className: "p-1 text-sm right-0 sm:w-max bottom-8",
                position: "right",
                children: e.jsxs("div", {
                    className: "flex flex-col items-start gap-6 p-6",
                    children: [e.jsx(B, {
                        disabled: !zs(n),
                        variant: "link",
                        onClick: () => {
                            i(Kt(n)), je({
                                action_type: Be.WITHDRAW_REWARDS,
                                ...t
                            }), i(le(ie.ValidatorStakingBatchWithdrawal, {
                                validatorStakeExperience: ia.VALIDATOR_BATCH_WITHDRAW_REWARDS
                            }, {
                                content: {
                                    width: "420px"
                                }
                            }))
                        },
                        children: "Withdraw rewards only"
                    }), e.jsx(B, {
                        disabled: !Xs(n),
                        variant: "link",
                        onClick: () => {
                            i(Kt(n)), je({
                                action_type: Be.WITHDRAW_BALANCE,
                                ...t
                            }), i(le(ie.ValidatorStakingBalanceWithdrawal, void 0, {
                                content: {
                                    width: "420px"
                                }
                            }))
                        },
                        children: "Withdraw total balance"
                    })]
                })
            })]
        })
    },
    Ho = ({
        analyticsProps: t,
        batchValidators: s,
        getEthValueInFiat: n,
        nativeStakingToken: l
    }) => {
        const a = W(),
            c = Te(),
            i = _(Yt);
        return e.jsx("button", {
            className: "flex w-full justify-center rounded-lg hover:bg-hover",
            onClick: () => {
                je({ ...t
                }), a(le(ie.MobileActionMenu, {
                    title: "Rewards info",
                    children: e.jsxs("div", {
                        className: "flex flex-col gap-4",
                        children: [e.jsxs("span", {
                            className: "flex justify-between",
                            children: [e.jsx(f, {
                                children: "Account"
                            }), e.jsxs("span", {
                                className: "flex gap-2 items-center",
                                children: [e.jsx(jt, {
                                    className: "flex items-center",
                                    accountIdenticonType: i,
                                    address: s.account,
                                    size: 4
                                }, s.account), e.jsx(f, {
                                    children: lt(Ht(s.account), 13)
                                })]
                            })]
                        }), e.jsxs("span", {
                            className: "flex justify-between",
                            children: [e.jsx(f, {
                                children: "Status"
                            }), e.jsx(Ut, {
                                validator: s
                            })]
                        }), e.jsxs("span", {
                            className: "flex justify-between",
                            children: [e.jsx(f, {
                                children: "Balance"
                            }), Ct(s.status) ? null : Ve(s.status) ? e.jsx(f, {
                                subdued: !0,
                                children: "N/A"
                            }) : e.jsxs("span", {
                                className: "flex gap-2",
                                children: [e.jsxs(f, {
                                    className: "text-alternative",
                                    children: [F(J(new C(s.balance), -18), 2), " ", l]
                                }), e.jsx(f, {
                                    children: n(new C(s.balance))
                                })]
                            })]
                        }), e.jsxs("span", {
                            className: "flex justify-between",
                            children: [e.jsx(f, {
                                children: "Rewards"
                            }), qe(s.status) ? null : Ve(s.status) ? e.jsx(f, {
                                subdued: !0,
                                children: "N/A"
                            }) : e.jsxs("span", {
                                className: "flex gap-2",
                                children: [e.jsxs(f, {
                                    className: "text-success-default",
                                    children: [F(J(new C(s.availableCLRewards).plus(s.availableELRewards), -18), 4), " ", l]
                                }), e.jsx(f, {
                                    className: "text-success-default",
                                    children: n(new C(s.availableCLRewards).plus(s.availableELRewards))
                                })]
                            })]
                        }), e.jsxs("span", {
                            className: "flex justify-between",
                            children: [e.jsx(f, {
                                children: "Rate"
                            }), yt(s.status) || typeof(s == null ? void 0 : s.rate) != "string" ? null : Ve(s.status) ? e.jsx(f, {
                                subdued: !0,
                                children: "N/A"
                            }) : e.jsx(f, {
                                children: St(s.rate, {
                                    inputFormat: _t.PERCENTAGE,
                                    outputFormat: At.PERCENT_SIGN,
                                    fixed: 2
                                })
                            })]
                        })]
                    }),
                    actions: [{
                        content: e.jsx(B, {
                            disabled: !zs(s),
                            variant: "link",
                            size: "lg",
                            children: "Withdraw rewards only"
                        }),
                        onClick: () => {
                            a(Kt(s)), je({
                                action_type: Be.WITHDRAW_REWARDS,
                                ...t
                            }), c(`${Fe.ROOT}/${Fe.BATCH_REWARDS_WITHDRAWAL}`)
                        }
                    }, {
                        content: e.jsx(B, {
                            disabled: !Xs(s),
                            variant: "link",
                            size: "lg",
                            children: "Withdraw total balance"
                        }),
                        onClick: () => {
                            a(Kt(s)), je({
                                action_type: Be.WITHDRAW_BALANCE,
                                ...t
                            }), c(`${Fe.ROOT}/${Fe.BALANCE_WITHDRAWAL}`)
                        }
                    }],
                    buttonVariant: "outline",
                    actionsClassName: "flex justify-center py-2"
                }))
            },
            children: e.jsx(wa, {
                className: "w-6 h-6"
            })
        })
    },
    Tn = [{
        id: "account-header",
        name: "Account",
        className: "hidden xl:table-cell col-span-2 pr-0",
        sortId: "account",
        sortSelector: () => t => t.account
    }, {
        id: "status-header",
        name: "Status",
        className: "col-span-3 lg:col-span-2 pr-0",
        sortId: "status",
        sortSelector: () => t => ll(t),
        sortDefault: !0
    }, {
        id: "balance-header",
        name: "Balance",
        className: "col-span-3 lg:col-span-2 xl:col-span-2 pr-0",
        sortId: "balance",
        sortSelector: () => t => new C(t.balance).toNumber()
    }, {
        id: "rewards-header",
        name: "Available rewards",
        className: "hidden lg:table-cell col-span-2 pr-0",
        sortId: "rewards",
        sortSelector: () => t => qe(t.status) ? -1 : new C(t.availableCLRewards).plus(t.availableELRewards).toNumber()
    }, {
        id: "rate-header",
        name: "Rate",
        className: "hidden xl:table-cell col-span-1 pr-0",
        sortId: "rate",
        sortSelector: () => t => yt(t.status) ? 0 : t.rate ? ? 0
    }],
    Ns = "Claim",
    $o = ({
        validatorsDataFromSelectedAccounts: t
    }) => {
        const s = W(),
            n = Te(),
            {
                formatEtherWithCurrency: l
            } = _e(),
            {
                isLoadingExchangeRates: a
            } = gt(),
            {
                nativeStakingToken: c
            } = _(x => x.stake.validatorStaking),
            i = {
                app_source: "stake",
                selected_token: c,
                location: S.VALIDATOR_STAKE_REWARDS_TABLE_ACCOUNTS_VIEW
            },
            r = _(Yt),
            o = x => l(Number(J(x, -18))),
            {
                stakingChainId: m
            } = ft(Sa, Na),
            u = ps(),
            {
                data: h
            } = sl({
                env: u
            }),
            j = d.useMemo(() => t.reduce((x, v) => {
                const D = v.account;
                if (v.validators.length < 1) return x;
                const A = Ui(v.validators);
                return Object.keys(A).forEach(I => {
                    if (I === sa.NOT_ACTIVE || I === sa.REMOVED) return;
                    let O = xe,
                        Y = xe,
                        H = xe,
                        G = 0,
                        U, q, ne = !1;
                    const z = [],
                        $ = [],
                        M = [];
                    A[I].forEach(P => {
                        if (P.slashed && (ne = !0), O = O.plus(P.balance), Y = Y.plus(P.availableCLRewards), H = H.plus(P.availableELRewards), !yt(P.status) && typeof(P == null ? void 0 : P.rate) == "string") {
                            const re = P.daysActive + 1;
                            G += re, z.push({
                                rate: P.rate,
                                daysActive: re
                            })
                        }
                        P.claimableDateEstimate && new C(P.claimableDateEstimate).gt(q || 0) && (q = P.claimableDateEstimate), P.activationDateEstimate && new C(P.activationDateEstimate).gt(U || 0) ? U = P.activationDateEstimate : I === sa.ACTIVATING && !P.activationDateEstimate && (U = (h == null ? void 0 : h.activationDateEstimate) ? ? void 0), M.push(P.status), $.push(P)
                    });
                    const fe = al(z, G);
                    x.push({
                        account: D,
                        status: M[0],
                        statusText: I,
                        balance: O.toString(),
                        rate: fe ? fe.toString() : void 0,
                        slashed: ne,
                        availableCLRewards: Y.toString(),
                        availableELRewards: H.toString(),
                        activationDateEstimate: U,
                        claimableDateEstimate: q,
                        validators: $
                    })
                }), x
            }, []), [h == null ? void 0 : h.activationDateEstimate, t]),
            {
                sortType: T,
                sortDirection: g,
                handleSort: b,
                sortedData: k
            } = La({
                defaultValue: "status asc",
                columns: Tn,
                data: j
            }),
            [N, E] = d.useState(1),
            R = N * Ft,
            w = R - Ft,
            y = k.slice(w, R),
            p = ({
                nextPage: x
            }) => {
                E(x)
            };
        return e.jsxs(e.Fragment, {
            children: [e.jsxs("table", {
                id: "validator-staking-rewards-table-accounts-view",
                children: [e.jsx("thead", {
                    className: "border-y border-muted hidden md:table-header-group cursor-pointer",
                    children: e.jsx("tr", {
                        className: "grid grid-cols-8 xl:grid-cols-10",
                        children: Tn.map(x => e.jsx("th", {
                            id: x.id,
                            onClick: b(x.sortId),
                            className: at(x.className, "text-alternative", T === x.sortId && "text-primary-default font-semibold"),
                            children: e.jsxs("div", {
                                id: `${x.id}-data`,
                                className: "flex items-center",
                                children: [e.jsx("span", {
                                    className: "truncate",
                                    children: x.name
                                }), T === x.sortId && e.jsxs("div", {
                                    className: "flex flex-col items-center ml-2",
                                    children: [e.jsx(Ps, {
                                        className: at("mb-1", g === "asc" ? "!fill-primary-default" : "fill-icon-alternative")
                                    }), e.jsx(Ps, {
                                        className: at("rotate-180", g === "desc" ? "!fill-primary-default" : "fill-icon-alternative")
                                    })]
                                })]
                            })
                        }, x.id))
                    })
                }), e.jsx("tbody", {
                    className: "md:divide-y divide-border-muted",
                    children: y.map((x, v) => e.jsxs("tr", {
                        className: "items-center md:h-20 md:grid grid-cols-8 xl:grid-cols-10",
                        children: [e.jsxs("td", {
                            className: "hidden xl:table-cell col-span-2 text-sm pr-0",
                            children: [e.jsxs("span", {
                                className: "flex gap-2 items-center",
                                children: [e.jsx(jt, {
                                    className: "flex items-center",
                                    accountIdenticonType: r,
                                    address: x.account,
                                    size: 6
                                }, x.account), e.jsx("p", {
                                    className: "truncate",
                                    children: lt(Ht(x.account), 15)
                                })]
                            }), e.jsx("p", {
                                className: "text-alternative ml-8",
                                children: `${x.validators.length} ${x.validators.length>1?"validators":"validator"}`
                            })]
                        }), e.jsx("td", {
                            className: "hidden md:table-cell col-span-3 lg:col-span-2 pr-0",
                            children: e.jsx(Ut, {
                                validator: x
                            })
                        }), e.jsx("td", {
                            className: "hidden md:table-cell col-span-3 lg:col-span-2 text-sm pr-0",
                            children: Ct(x.status) ? null : Ve(x.status) ? e.jsx("p", {
                                className: "text-alternative",
                                children: "N/A"
                            }) : e.jsx(xt, {
                                className: "!text-sm",
                                symbol: c,
                                balance: F(J(new C(x.balance), -18), 4),
                                isLoadingMarketValue: a,
                                formattedMarketValue: o(new C(x.balance))
                            })
                        }), e.jsx("td", {
                            className: "hidden lg:table-cell col-span-2 text-sm pr-0",
                            children: qe(x.status) ? null : Ve(x.status) ? e.jsx("p", {
                                className: "text-alternative",
                                children: "N/A"
                            }) : e.jsx(xt, {
                                className: "!text-sm text-success-default",
                                symbol: c,
                                isLoadingMarketValue: a,
                                balance: F(J(new C(x.availableCLRewards).plus(x.availableELRewards), -18), 4),
                                formattedMarketValue: o(new C(x.availableCLRewards).plus(x.availableELRewards))
                            })
                        }), e.jsx("td", {
                            className: "hidden xl:table-cell text-sm col-span-1 pr-0",
                            children: yt(x.status) ? null : x.status === nt.REMOVED ? e.jsx("p", {
                                className: "text-alternative",
                                children: "N/A"
                            }) : typeof(x == null ? void 0 : x.rate) != "string" ? e.jsxs(e.Fragment, {
                                children: [e.jsx("p", {
                                    "data-tooltip-id": `${v}-rate-tooltip`,
                                    children: "Pending"
                                }), e.jsx(Xt, {
                                    id: `${v}-rate-tooltip`,
                                    className: "max-w-xs",
                                    content: "Rates are usually available within 2 days of your validator becoming active"
                                })]
                            }) : St(x.rate, {
                                inputFormat: _t.PERCENTAGE,
                                outputFormat: At.PERCENT_SIGN,
                                fixed: 2
                            })
                        }), e.jsx("td", {
                            className: "hidden md:table-cell col-span-2 xl:col-span-1",
                            children: e.jsx("div", {
                                className: "flex items-center justify-center w-6",
                                children: x.status === nt.CLAIMABLE ? e.jsx(B, {
                                    variant: "outline",
                                    size: "sm",
                                    onClick: () => {
                                        ve({
                                            text: Ns,
                                            ...i
                                        }), s(Kt(x)), s(le(ie.ValidatorStakingBatchWithdrawal, {
                                            validatorStakeExperience: ia.VALIDATOR_BATCH_CLAIM_BALANCE
                                        }, {
                                            content: {
                                                width: "420px"
                                            }
                                        }))
                                    },
                                    children: Ns
                                }) : e.jsx(wn, {
                                    analyticsProps: i,
                                    chainId: m,
                                    batchValidators: x
                                })
                            })
                        }), e.jsxs("td", {
                            className: "table-cell px-0 md:hidden text-sm",
                            children: [e.jsxs("span", {
                                className: "flex gap-2 items-center",
                                children: [e.jsx(jt, {
                                    className: "flex items-center",
                                    accountIdenticonType: r,
                                    address: x.account,
                                    size: 6
                                }, x.account), e.jsx("p", {
                                    children: lt(Ht(x.account), 13)
                                })]
                            }), e.jsx("div", {
                                className: "ml-8",
                                children: e.jsx(Ut, {
                                    validator: x
                                })
                            })]
                        }), e.jsx("td", {
                            className: "table-cell md:hidden w-full text-sm",
                            children: Ct(x.status) && qe(x.status) || Ve(x.status) ? null : a ? e.jsx(ae, {
                                className: "w-full h-8 float-right"
                            }) : e.jsxs(e.Fragment, {
                                children: [e.jsx("p", {
                                    className: "text-right",
                                    children: o(new C(x.balance))
                                }), qe(x.status) ? null : e.jsxs("p", {
                                    className: "text-success-default text-right",
                                    children: ["+", o(new C(x.availableCLRewards).plus(x.availableELRewards))]
                                })]
                            })
                        }), e.jsx("td", {
                            className: "table-cell md:hidden px-0 w-6",
                            children: x.status === nt.CLAIMABLE ? e.jsx(B, {
                                variant: "outline",
                                size: "sm",
                                onClick: () => {
                                    ve({
                                        text: Ns,
                                        ...i
                                    }), s(Kt(x)), ee ? n(`${Fe.ROOT}/${Fe.BATCH_BALANCE_CLAIM}`) : s(le(ie.ValidatorStakingBatchWithdrawal, {
                                        validatorStakeExperience: ia.VALIDATOR_BATCH_CLAIM_BALANCE
                                    }, {
                                        content: {
                                            width: "420px"
                                        }
                                    }))
                                },
                                children: Ns
                            }) : ee ? e.jsx(Ho, {
                                analyticsProps: i,
                                batchValidators: x,
                                getEthValueInFiat: o,
                                nativeStakingToken: c
                            }) : e.jsx(wn, {
                                analyticsProps: i,
                                batchValidators: x,
                                chainId: m
                            })
                        })]
                    }, `${x.account}-${x.statusText}-${m}`))
                })]
            }), e.jsx(va, {
                totalCount: j.length,
                pageSize: Ft,
                currentPage: N,
                onChange: p
            })]
        })
    },
    la = {
        validatorIndex: "Validator Index",
        state: "State",
        activatedAt: "Activated At",
        depositTransactionSender: "Deposit Transaction Sender",
        validatorBalance: "Validator Balance",
        rewardRatePreFee: "Reward Rate (Pre-Fee)",
        rewardRatePostFee: "Reward Rate (Post-Fee)",
        totalRewardsPreFee: "Total Rewards (Pre-Fee)",
        totalRewardsPostFee: "Total Rewards (Post-Fee)",
        consensusRewardsPreFee: "Consensus Rewards (Pre-Fee)",
        consensusRewardsPostFee: "Consensus Rewards (Post-Fee)",
        blocksProposed: "Blocks Proposed",
        executionRewardsPreFee: "Execution Rewards (Pre-Fee)",
        executionRewardsPostFee: "Execution Rewards (Post-Fee)",
        exitedAt: "Exited At",
        withdrawnAt: "Withdrawn At",
        date: "Date",
        totalBalance: "Total Balance",
        activeStakeBalance: "Active Stake Balance",
        totalRewardsFiatPostFee: "Total Rewards Fiat (Post-Fee)",
        consensusRewardsFiatPostFee: "Consensus Rewards Fiat (Post-Fee)",
        executionRewardsFiatPostFee: "Execution Rewards Fiat (Post-Fee)",
        exchangeRate: "Exchange Rate",
        fiatCurrency: "Fiat Currency",
        type: "Operation Type",
        amount: "Amount",
        block: "Block",
        txHash: "Transaction Hash",
        txSender: "Transaction Sender"
    },
    Uo = ({
        validatorsDataFromSelectedAccounts: t
    }) => {
        const s = W(),
            l = _(Kn).baseCurrency,
            {
                t: a
            } = oe(),
            c = ps(),
            [i] = Gi(),
            [r, o] = d.useState(!1),
            u = `StakingReport-${new Date().toLocaleDateString("en-US",{year:"numeric",month:"short"}).replace(" ","-")}.xlsx`,
            h = t.map(k => k.account),
            T = t.map(k => k.validators).flat().filter(k => !Ki(k.status)).map(k => k.index).length > 0,
            g = h.length > 0,
            b = async () => {
                var N, E, R, w, y, p;
                const k = await Qc(() =>
                    import ("./xlsx-75bbc624.js"), []);
                o(!0);
                try {
                    const x = await i({
                        addresses: h,
                        env: c,
                        currency: l.toLowerCase()
                    });
                    if (x.error || !((E = (N = x.data) == null ? void 0 : N.operationReportData) != null && E.length) || !((w = (R = x.data) == null ? void 0 : R.rewardReportData) != null && w.length) || !((p = (y = x.data) == null ? void 0 : y.validatorReportData) != null && p.length)) {
                        s(dt({
                            message: a("stake.downloadReportError"),
                            type: "error"
                        }));
                        return
                    }
                    const v = (U, q) => U.map(ne => {
                            const z = {};
                            for (const $ in ne) q[$] ? z[q[$]] = ne[$] : z[$] = ne[$];
                            return z
                        }),
                        D = v(x.data.validatorReportData, la),
                        A = v(x.data.rewardReportData, la),
                        I = v(x.data.operationReportData, la),
                        O = k.utils.json_to_sheet(A),
                        Y = k.utils.json_to_sheet(D),
                        H = k.utils.json_to_sheet(I),
                        G = k.utils.book_new();
                    k.utils.book_append_sheet(G, O, "Rewards"), k.utils.book_append_sheet(G, Y, "Validators"), k.utils.book_append_sheet(G, H, "Operations"), k.writeFile(G, u), Xi({
                        download_type: "xlsx",
                        app_source: "stake",
                        download_object: "validator_staking_report"
                    })
                } catch {
                    s(dt({
                        message: a("stake.downloadReportError"),
                        type: "error"
                    }))
                } finally {
                    o(!1)
                }
            };
        return e.jsxs("div", {
            "data-tooltip-id": "download-report",
            children: [e.jsx(B, {
                size: "sm",
                startIcon: e.jsx(qi, {
                    size: "12"
                }),
                variant: "outline",
                isLoading: r,
                onClick: b,
                disabled: !T || !g,
                children: a("stake.downloadReportButtonText")
            }), e.jsx(we, {
                id: "download-report",
                icon: "",
                tooltipText: e.jsx(zi, {
                    isAccountSelected: g,
                    isValidIndex: T
                })
            })]
        })
    },
    bn = [{
        id: "Accounts",
        name: "Accounts"
    }, {
        id: "Validators",
        name: "Validators"
    }],
    Ft = 10,
    Go = ({
        validatorsDataFromSelectedAccounts: t,
        selectedAccounts: s,
        allAccounts: n,
        handleItemSelect: l,
        handleAccountSelect: a
    }) => {
        const {
            data: c
        } = Jn(el), [i, r] = d.useState(0), o = m => {
            r(m), ve({
                app_source: "stake",
                location: S.VALIDATOR_STAKE_REWARDS_TABLE_TABS,
                text: bn[m].name
            })
        };
        return e.jsx("div", {
            className: "flex flex-col gap-1 rounded-lg p-0 md:p-4 md:bg-default",
            children: e.jsxs(il, {
                variant: "link",
                selectedIndex: i,
                onChange: m => o(m),
                children: [e.jsxs("div", {
                    className: "flex justify-between items-center w-full ",
                    children: [e.jsx(cl, {
                        className: "bg-inherit relative mx-1 z-0",
                        children: bn.map(({
                            id: m,
                            name: u
                        }) => e.jsx(ol, {
                            children: u
                        }, m))
                    }), ee ? null : e.jsx(Uo, {
                        validatorsDataFromSelectedAccounts: t
                    })]
                }), e.jsx(Rl, {
                    accountValues: c,
                    className: "sm:h-[42px] my-4",
                    dropdownClassName: "sm:!left-0",
                    selectedAccounts: s,
                    allAccounts: n,
                    handleItemSelect: l,
                    handleAccountSelect: a
                }), e.jsxs(rl, {
                    className: "mt-0",
                    children: [e.jsx(as, {
                        className: "mt-0",
                        children: e.jsx($o, {
                            validatorsDataFromSelectedAccounts: t
                        })
                    }, "Accounts"), e.jsx(as, {
                        className: "mt-0",
                        children: e.jsx(Vo, {
                            validatorsDataFromSelectedAccounts: t
                        })
                    }, "Validators")]
                })]
            })
        })
    },
    Ko = () => e.jsx("svg", {
        width: "32",
        height: "32",
        viewBox: "0 0 32 32",
        className: "fill-icon-muted",
        xmlns: "http://www.w3.org/2000/svg",
        children: e.jsx("g", {
            id: "money-filled",
            children: e.jsx("path", {
                id: "Vector",
                d: "M24.7899 9.35784L24.7915 9.36569L24.7934 9.37348C24.8989 9.81756 24.9482 10.3057 24.9482 10.868V17.346C24.9482 19.1835 24.4108 20.4152 23.5462 21.1949C22.6724 21.983 21.3859 22.3807 19.7496 22.3807H8.36528C7.81037 22.3807 7.29021 22.3327 6.81424 22.2287L6.79935 22.2254L6.78428 22.2231C6.49976 22.1789 6.22046 22.1006 5.95652 22.0074C5.07684 21.6881 4.39165 21.168 3.9208 20.427C3.44661 19.6807 3.16666 18.6733 3.16666 17.346V10.868C3.16666 9.0305 3.70405 7.79883 4.56864 7.0191C5.44245 6.23106 6.72896 5.83331 8.36528 5.83331H19.7366C21.1241 5.83331 22.2631 6.11971 23.1087 6.68717C23.9422 7.24657 24.535 8.10833 24.7899 9.35784ZM9.83297 25.7824L9.83299 25.7823L9.82584 25.7798C9.44986 25.6477 9.11186 25.475 8.81703 25.2673H19.7363C22.2274 25.2673 24.2751 24.5465 25.7021 23.1623C27.1311 21.7762 27.8777 19.7828 27.8777 17.3584V11.286C28.4745 12.0637 28.8333 13.1516 28.8333 14.6413V21.1194C28.8333 22.9569 28.2959 24.1919 27.4294 24.9749C26.5538 25.766 25.2641 26.1666 23.6217 26.1666H12.2504C11.3254 26.1666 10.5181 26.0348 9.83297 25.7824ZM6.64274 17.4435C7.43603 17.4435 8.1141 16.8056 8.1141 16.0001V12.2265C8.1141 11.4209 7.43603 10.7831 6.64274 10.7831C5.84945 10.7831 5.17139 11.4209 5.17139 12.2265V16.0001C5.17139 16.8056 5.84945 17.4435 6.64274 17.4435ZM10.1318 14.1133C10.1318 16.2396 11.8978 17.9341 14.051 17.9341C16.2041 17.9341 17.9701 16.2396 17.9701 14.1133C17.9701 11.987 16.2041 10.2925 14.051 10.2925C11.8978 10.2925 10.1318 11.987 10.1318 14.1133ZM21.4462 17.4435C22.2395 17.4435 22.9176 16.8056 22.9176 16.0001V12.2265C22.9176 11.4209 22.2395 10.7831 21.4462 10.7831C20.6529 10.7831 19.9749 11.4209 19.9749 12.2265V16.0001C19.9749 16.8056 20.6529 17.4435 21.4462 17.4435Z",
                className: "fill-icon-muted stroke-icon-muted"
            })
        })
    }),
    qo = ({
        className: t,
        children: s
    }) => e.jsx(Pe, {
        to: "/buy",
        className: t,
        onClick: () => ve({
            text: String(s),
            location: S.VALIDATOR_STAKE_EMPTY_STATE,
            selected_provider: "consensys"
        }),
        children: s
    }),
    zo = ({
        className: t,
        canUsePooledStaking: s,
        children: n
    }) => e.jsx(Pe, {
        className: t,
        to: `/stake?tab=${s?We.POOLED:We.THIRD_PARTY}`,
        onClick: () => ve({
            text: String(n),
            location: S.VALIDATOR_STAKE_EMPTY_STATE,
            selected_provider: "consensys"
        }),
        children: n
    }),
    Fl = ({
        buyEthLinkClassName: t,
        stakingOptionLinkClassName: s,
        canUsePooledStaking: n
    }) => {
        const {
            t: l
        } = oe(), a = l(n ? "stake.pooledStakingWithStakingUppercase" : "stake.liquidStaking");
        return e.jsx(Un, {
            i18nKey: "stake.buyOrTryStaking",
            components: {
                link1: e.jsx(qo, {
                    className: t
                }),
                link2: e.jsx(zo, {
                    className: s,
                    canUsePooledStaking: n
                })
            },
            values: {
                stakingOption: a
            }
        })
    },
    Xo = ({
        userHas32Eth: t
    }) => {
        const {
            t: s
        } = oe(), n = s("stake.learnMore"), {
            stakePooledStakingFeatureFlag: l
        } = it(), {
            isConfirmedEligible: a
        } = qt(We.POOLED), c = !!(l && a);
        return e.jsxs("div", {
            children: [e.jsxs("div", {
                className: "flex flex-col md:flex-row rounded-lg justify-center p-6 h-12 gap-6 md:h-full md:bg-default",
                children: [e.jsxs("div", {
                    className: "w-3/4 relative lg:block hidden",
                    children: [e.jsx("div", {
                        style: {
                            paddingTop: "56.25%"
                        }
                    }), e.jsx("iframe", {
                        className: "absolute top-0 left-0 w-full h-full",
                        height: "360",
                        src: "https://www.youtube.com/embed/MQRwcnQVsOE?rel=0",
                        title: "YouTube video player",
                        allow: "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen"
                    })]
                }), e.jsxs("div", {
                    className: "flex-col lg:w-1/4 md:w-full md:text-center lg:text-left",
                    children: [e.jsx(f, {
                        scale: L.HeadingXs,
                        bold: !0,
                        children: s("stake.stakeSmarter")
                    }), e.jsx(f, {
                        subdued: !0,
                        className: " mt-2",
                        children: s("stake.with32Eth")
                    }), e.jsx(Pe, {
                        href: vs,
                        target: "_blank",
                        className: "flex mt-6 md:items-center md:justify-center lg:justify-start",
                        onClick: () => {
                            ct({
                                link_text: n,
                                location: S.VALIDATOR_STAKE_EMPTY_STATE,
                                external_link: vs,
                                app_source: "stake"
                            })
                        },
                        children: e.jsxs("span", {
                            className: "flex gap-1 items-center md:text-center lg:text-left",
                            children: [n, " ", e.jsx(xs, {
                                className: "w-4 h-4"
                            })]
                        })
                    })]
                })]
            }), e.jsx("div", {
                className: "flex rounded-lg justify-center items-center text-center flex-col px-8 h-48 md:h-60 md:bg-default mt-6",
                children: t ? e.jsxs(e.Fragment, {
                    children: [e.jsx(Il, {
                        className: "stroke-icon-alternative mb-3"
                    }), e.jsx(f, {
                        subdued: !0,
                        children: s("stake.noAvailableRewards")
                    })]
                }) : e.jsxs(e.Fragment, {
                    children: [e.jsx(Ko, {}), e.jsx(f, {
                        subdued: !0,
                        className: "mt-2",
                        children: s("stake.dontHave32Eth")
                    }), e.jsx("span", {
                        className: "flex flex-wrap justify-center",
                        children: e.jsx(f, {
                            subdued: !0,
                            children: e.jsx(Fl, {
                                canUsePooledStaking: c
                            })
                        })
                    })]
                })
            })]
        })
    },
    Qo = ({
        userHas32Eth: t
    }) => {
        const {
            t: s
        } = oe(), {
            stakePooledStakingFeatureFlag: n
        } = it(), {
            isConfirmedEligible: l
        } = qt(We.POOLED), a = n && l;
        return e.jsxs("div", {
            className: "flex flex-col justify-center items-center px-4",
            children: [e.jsx("div", {
                className: "bg-primary-muted rounded-full p-2",
                children: e.jsx(rs, {
                    className: "w-4 h-4 stroke-info-default stroke-6"
                })
            }), e.jsx(f, {
                bold: !0,
                scale: L.HeadingSm,
                className: "text-center my-2",
                children: "Stake smarter"
            }), t ? e.jsx(f, {
                scale: L.ParagraphBase,
                className: "text-center",
                children: "32 ETH. Your own validator node, your own rewards, you’re in control."
            }) : e.jsxs(e.Fragment, {
                children: [e.jsx(f, {
                    subdued: !0,
                    children: s("stake.dontHave32Eth")
                }), e.jsx(f, {
                    subdued: !0,
                    children: e.jsx("span", {
                        className: "flex flex-wrap justify-center",
                        children: e.jsx(Fl, {
                            canUsePooledStaking: !!a,
                            buyEthLinkClassName: "text-sm mx-1",
                            stakingOptionLinkClassName: "text-sm mx-1"
                        })
                    })
                })]
            }), e.jsx("div", {
                className: "flex justify-center ",
                children: e.jsxs(Jt, {
                    className: "text-center text-sm mt-4",
                    variant: "outline",
                    target: "_blank",
                    href: vs,
                    onClick: () => {
                        ct({
                            link_text: en,
                            location: S.VALIDATOR_STAKE_EMPTY_STATE,
                            external_link: vs
                        })
                    },
                    children: [en, e.jsx(xs, {
                        className: "ml-2",
                        size: 14
                    })]
                })
            })]
        })
    },
    Yo = () => {
        const {
            connectedAccounts: t,
            connectedAccountAddresses: s
        } = Je(), {
            shouldUseTestnet: n
        } = ft(Sa, Na), {
            data: l = []
        } = Oe({
            accounts: t,
            tokenAddress: se.ZERO_ADDRESS,
            useTestnet: n
        }, {
            skip: !t.length
        });
        return d.useMemo(() => l.reduce((c, i) => (i.address === se.ZERO_ADDRESS && s.includes(i.account.accountAddress) && (c += i.account.balance), c), 0), [s, l]) >= 32
    };

function Bl() {
    var a;
    const {
        connectedAccountAddresses: t
    } = Je(), s = ps(), {
        data: n
    } = dl({
        publicKeys: t,
        env: s
    }, {
        refetchOnMountOrArgChange: !0
    });
    return ((a = n == null ? void 0 : n.accounts) == null ? void 0 : a.flatMap(({
        validators: c
    }) => c)) || []
}
const Zo = nt.FINISHED;

function Vl(t) {
    return !!t.find(({
        status: n
    }) => Zo === n)
}

function Jo() {
    const t = ml(ul.ON_PREVIOUS_VALIDATOR_EXIT, !0),
        s = Bl(),
        n = Vl(s);
    d.useEffect(() => {
        n && t()
    }, [n, t])
}
const er = 30;

function tr() {
    const t = ml(ul.ON_STAKER_FOR_LAST_30_DAYS, !0),
        s = Bl(),
        n = !!s.find(({
            status: c,
            daysActive: i
        }) => nt.ACTIVE === c && i > er),
        l = Vl(s),
        a = n && !l;
    d.useEffect(() => {
        a && t()
    }, [a, t])
}

function sr() {
    tr(), Jo()
}
const ar = () => {
        var b;
        const t = Te();
        Qi({
            setToValueOnUnmount: 0,
            roundWithStakeStep: !0
        });
        const {
            connectedAccountAddresses: s,
            ownedAccounts: n
        } = Je(), {
            accountsDropdownState: l,
            handleItemSelect: a,
            handleAccountGroupSelect: c
        } = Wl(), i = ps(), {
            stakeDisasterRecoveryValidatorStakingFeatureFlag: r
        } = it(), {
            data: o,
            isError: m,
            isLoading: u
        } = dl({
            publicKeys: s,
            env: i
        }, {
            refetchOnMountOrArgChange: !0
        }), h = ((b = o == null ? void 0 : o.accounts) == null ? void 0 : b.flatMap(({
            validators: k
        }) => k)) || [], j = d.useMemo(() => l.filter(k => k.selected), [l]), T = d.useMemo(() => {
            const k = new Set(j.map(N => {
                var E;
                return (E = N.address) == null ? void 0 : E.toLowerCase()
            }));
            return ((o == null ? void 0 : o.accounts) ? ? []).filter(N => k.has(N.account.toLowerCase()))
        }, [o, j]);
        sr(), tl({
            env: i
        });
        const g = Yo();
        return r ? e.jsx("div", {
            className: "w-full h-[100vh] -mt-7 -mb-20",
            children: e.jsx(Ia, {
                routeName: Ta.STAKE
            })
        }) : e.jsxs("div", {
            className: at("flex flex-col grow md:flex-row gap-6 max-w-[1344px] w-full", h.length > 0 && "max-w-[1544px]"),
            children: [ee ? e.jsx("div", {
                className: "fixed bottom-0 left-0 right-0 w-full bg-default border-t border-default p-4 z-10",
                children: e.jsx(B, {
                    width: "full",
                    onClick: () => {
                        ve({
                            text: "Stake",
                            location: S.VALIDATOR_STAKE_MOBILE_HOME,
                            selected_provider: kt
                        }), t(`${Fe.ROOT}`)
                    },
                    children: "Stake"
                })
            }) : e.jsx(Yi, {}), e.jsx("div", {
                className: "flex flex-col w-full gap-2",
                children: m ? e.jsx("div", {
                    className: "pb-12 xs:pb-0",
                    children: e.jsx(Dl, {
                        location: S.VALIDATOR_STAKE_VALIDATORS_ERROR_STATE
                    })
                }) : o === void 0 || h.length < 1 ? ee ? e.jsx("div", {
                    className: "flex items-center justify-center mt-40",
                    children: e.jsx(Qo, {
                        userHas32Eth: g
                    })
                }) : e.jsx("div", {
                    className: "hidden md:block",
                    children: e.jsx(Xo, {
                        userHas32Eth: g
                    })
                }) : e.jsxs("div", {
                    className: "pb-12 xs:pb-0",
                    children: [e.jsx(Fo, {
                        validatorsDataFromSelectedAccounts: T,
                        isLoadingValidatorData: u
                    }), e.jsx(Go, {
                        validatorsDataFromSelectedAccounts: T,
                        selectedAccounts: j,
                        allAccounts: n,
                        handleItemSelect: a,
                        handleAccountSelect: c
                    })]
                })
            })]
        })
    },
    nr = () => {
        const t = W(),
            s = Te(),
            {
                search: n
            } = us(),
            {
                stakeDirectStakingFeatureFlag: l,
                stakePooledStakingFeatureFlag: a,
                isFetchingFeatureFlag: c
            } = it(),
            {
                isConfirmedIneligible: i
            } = qt(We.VALIDATOR),
            {
                isConfirmedIneligible: r
            } = qt(We.POOLED),
            {
                stakingTypeTab: o
            } = _(b => b.stake),
            m = to();
        Zi(m);
        const u = l && !i,
            h = a && !r,
            j = [{
                id: We.THIRD_PARTY,
                name: "Liquid staking"
            }];
        u && j.unshift({
            id: We.VALIDATOR,
            name: "MetaMask Validators"
        }), h && j.unshift({
            id: We.POOLED,
            name: "MetaMask Pool"
        });
        const T = j.reduce((b, k, N) => (b[k.id] = N, b), {}),
            g = d.useMemo(() => {
                const k = new URLSearchParams(n).get("tab");
                return k ? k.toLowerCase() ? ? null : null
            }, [n]);
        return d.useEffect(() => {
            g && t(Ji(g))
        }, [g, t, u]), c ? null : e.jsxs($t, {
            children: [e.jsx(qs, {
                title: "Stake"
            }), u || h ? e.jsxs(il, {
                variant: "link",
                selectedIndex: T[o],
                onChange: b => s(`/stake?tab=${j[b].id}`),
                children: [e.jsx(cl, {
                    className: "md:border-b border-default md:-mx-14 md:px-8 lg:-mx-12 lg:px-8",
                    children: j.map(({
                        id: b,
                        name: k
                    }) => e.jsx(ol, {
                        children: k
                    }, b))
                }), e.jsxs(rl, {
                    children: [h && e.jsx(as, {
                        className: "flex justify-center",
                        children: e.jsx(Mo, {})
                    }, "pooled"), u && e.jsx(as, {
                        className: "flex justify-center",
                        children: e.jsx(ar, {})
                    }, "validator"), e.jsx(as, {
                        children: e.jsx(hn, {})
                    }, "liquid")]
                })]
            }) : e.jsx(hn, {})]
        })
    },
    lr = nr,
    ir = se.ChainId.ETHEREUM,
    be = (t = "") => {
        var m, u;
        const {
            chain: s
        } = ec(), n = s == null ? void 0 : s.id, l = tc[t], a = l ? (m = tn[l]) == null ? void 0 : m.chain : ir, c = ((u = tn[l]) == null ? void 0 : u.testnet) || {}, i = c[n] ? n : void 0, r = c[sn[a]] ? sn[a] : void 0;
        return ft(a, i || r)
    },
    cr = ({
        isMonthly: t,
        onChange: s
    }) => {
        const {
            t: n
        } = oe();
        return e.jsx("div", {
            id: "duration-toggle",
            className: "flex",
            children: e.jsxs("button", {
                onClick: s,
                "aria-label": n("stake.toggleAriaLabel"),
                className: "text-sm items-center justify-between relative inline-flex h-10 w-36 border-[1px] border-default rounded-full focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-default focus-visible:ring-opacity-75",
                children: [e.jsx("div", {
                    "aria-hidden": "true",
                    className: Ie("absolute flex items-center justify-center bg-primary-default h-9 w-[68px] mx-0.5 rounded-full transform ring-0 transition ease-in-out duration-200", {
                        "translate-x-[4.4rem]": !t,
                        "translate-x-0": t
                    }),
                    children: e.jsx("span", {
                        className: "text-primary-inverse",
                        children: n(t ? "stake.monthly" : "stake.yearly")
                    })
                }), e.jsx("span", {
                    className: "text-alternative px-3",
                    children: n("stake.monthly")
                }), e.jsx("span", {
                    className: "text-alternative px-3",
                    children: n("stake.yearly")
                })]
            })
        })
    },
    or = ({
        isLoading: t,
        provider: s,
        amountToStake: n = 0,
        amountToStakeValue: l,
        nativeStakingToken: a
    }) => {
        const [c, i] = d.useState(!1), {
            formatPriceWithCurrency: r
        } = _e(), o = n * (s == null ? void 0 : s.apy), m = o / 12, u = l * (s == null ? void 0 : s.apy), h = u / 12, j = `Estimated rewards from your ${s==null?void 0:s.tokenSymbol} after ${c?"30 days":"one year"}`;
        d.useEffect(() => {
            t && sc({
                selected_provider: s == null ? void 0 : s.providerId
            })
        }, [s, t]);
        const T = () => {
            i(!c), ac({
                selected_provider: s == null ? void 0 : s.providerId
            })
        };
        return o ? t ? e.jsxs(an, {
            className: "bg-alternative flex flex-col items-center justify-center text-alternative gap-2 min-h-[152px]",
            children: [e.jsx(Et, {
                size: "sm"
            }), e.jsx("p", {
                children: "Calculating rewards"
            })]
        }) : e.jsxs(an, {
            className: "flex flex-col items-center bg-alternative min-h-[152px]",
            children: [e.jsx(cr, {
                isMonthly: c,
                onChange: T
            }), e.jsxs("span", {
                className: "flex flex-wrap justify-center text-xl md:text-2xl mt-4 w-full",
                children: [e.jsxs("span", {
                    className: "font-bold",
                    children: [c ? Ye(F(m, 4, 9), {
                        thousandSeparator: !0
                    }) : Ye(F(o, 4, 9), {
                        thousandSeparator: !0
                    }), " ", a]
                }), e.jsxs("span", {
                    className: "text-alternative ml-1 truncate",
                    children: ["≈ ", r(c ? h : u)]
                })]
            }), e.jsx(we, {
                id: "rewards",
                className: "text-alternative",
                text: "Estimated rewards",
                tooltipText: j,
                mobileTooltip: e.jsxs(e.Fragment, {
                    children: [e.jsx("p", {
                        className: "text-base font-bold",
                        children: c ? "Estimated monthly rewards" : "Estimated yearly rewards"
                    }), e.jsx("p", {
                        className: "text-sm mt-4",
                        children: j
                    })]
                })
            })]
        }) : null
    },
    Nn = ({
        url: t,
        symbol: s
    }) => !t || !s ? e.jsx(ae, {
        className: "!w-20 !h-8"
    }) : e.jsxs("span", {
        className: "flex gap-2 items-center",
        children: [e.jsx("img", {
            src: t,
            className: "rounded-full w-6 h-6 md:w-9 md:h-9",
            alt: ""
        }), e.jsx("span", {
            className: "md:text-xl",
            children: s
        })]
    }),
    Hl = ({
        checkAllowance: t,
        getAdditionalEthRequired: s,
        getIsOverMaximum: n,
        maxEthAvailable: l,
        maxNativeTokenAvailable: a,
        nativeTokenData: c,
        provider: i
    }) => {
        const r = Te(),
            o = W(),
            {
                amountToStake: m
            } = _(ue => ue.stake.thirdPartyStaking),
            {
                selectedAccountAddress: u
            } = _(ue => ue.stake),
            h = i == null ? void 0 : i.providerId,
            j = (i == null ? void 0 : i.tokenAddress) || "",
            {
                contractConstants: T
            } = _(Qt),
            g = ss(j),
            {
                connectedAccounts: b,
                isActive: k,
                activeAccount: N
            } = Ae(),
            E = (N == null ? void 0 : N.address) || "",
            {
                stakingChainId: R,
                shouldUseTestnet: w
            } = be(j),
            [y, p] = d.useState(!1),
            x = i.nativeToken,
            {
                tokenData: v,
                isLoadingTokenData: D
            } = Bt(j, i == null ? void 0 : i.coingeckoId, w),
            A = (v == null ? void 0 : v.price) ? ? 0,
            I = (c == null ? void 0 : c.price) ? ? 0,
            {
                refetch: O
            } = Oe({
                accounts: b,
                tokenAddress: j,
                useTestnet: w
            }),
            {
                refetch: Y
            } = Oe({
                accounts: b,
                tokenAddress: bt[x].tokenAddress,
                useTestnet: w
            }),
            {
                refetch: H
            } = Oe({
                accounts: b,
                tokenAddress: _a,
                useTestnet: w
            }),
            {
                formatPriceWithCurrency: G
            } = _e(),
            {
                conversionRate: U,
                feeRate: q,
                isLoadingConversionRate: ne
            } = _(xl(j)),
            z = d.useRef(null),
            $ = d.useRef(null),
            [M, fe] = d.useState(m),
            [P, re] = d.useState(""),
            [X, Ee] = d.useState(null),
            de = new C(M).multipliedBy(q),
            Se = Tt(u, E),
            me = _(vn()),
            Z = new C(M).gt(xe) && new C(P).gt(xe),
            ge = Z && n(M),
            te = s(M),
            V = te.gt(xe),
            Ce = xa(T.metaMaskFee || 0, i == null ? void 0 : i.minimumStakeInWei),
            ke = new C((i == null ? void 0 : i.minimumStakeInWei) ? ? 0).gt(new C(0)) && Number(M) < Number(se.getDisplayAmountFromAtomicAmount(Ce, 18)),
            De = d.useMemo(() => ga(() => {
                k && (O(), Y(), H()), hl({
                    location: X === "input" ? "Send" : "Get",
                    selected_provider: h
                })
            }, 500), [X, k, H, Y, O, h]);
        d.useEffect(() => () => {
            De.cancel()
        }, [De]), d.useEffect(() => {
            u || o(Vt(E))
        }, [E, o, u]), d.useEffect(() => {
            X === "input" && z.current ? z.current.focus() : X === "output" && $.current && $.current.focus()
        }, [T, X]), d.useEffect(() => {
            o(Zt({
                chainId: R
            })), x === K.MATIC && o(wt({
                chainId: R,
                providerId: h
            }))
        }, [o, x, h, R]);
        const Me = d.useCallback((ue = "", Q) => {
            const {
                inputValue: pe,
                isValid: He
            } = dc(ue);
            He && (Number(pe) > 0 && De(), U && (Q === "input" ? (fe(pe), re(pe === "" ? "" : (Number(pe) * U).toString())) : Q === "output" && (re(pe), fe(pe === "" ? "" : (Number(pe) / U).toString()))))
        }, [U, De]);
        d.useEffect(() => {
            m && Me(m, "input")
        }, [m, Me]);
        const ye = d.useCallback(async () => {
                o(nc(F(M, 18))), t ? (p(!0), await t(M, R), p(!1)) : r(`${Le.STAKE}/${i.tokenSymbol}/review`)
            }, [t, o, r, i == null ? void 0 : i.tokenSymbol, M, R]),
            ot = d.useCallback(({
                value: ue,
                id: Q,
                isDisabled: pe
            }) => e.jsx("input", {
                ref: Q === "input" ? z : $,
                id: Q,
                placeholder: "0.0",
                className: "rounded-lg border-none py-0 px-0 placeholder-shown:w-48 w-28 md:text-xl text-right h-full cursor-text bg-transparent focus:ring-0",
                type: "text",
                inputMode: "decimal",
                value: ue,
                onChange: He => Me(He.target.value, Q),
                autoComplete: "off",
                autoCorrect: "off",
                disabled: pe,
                onFocus: () => {
                    Ee(Q), Q === "input" ? ca({
                        location: S.STAKE_INPUT_SEND,
                        selected_provider: h
                    }) : ca({
                        location: S.STAKE_INPUT_GET,
                        selected_provider: h
                    })
                }
            }), [Me, h]),
            Pt = d.useMemo(() => {
                const ue = {
                    token_to_stake: x.toLowerCase(),
                    tokens_to_stake_count: Number(M),
                    tokens_to_stake_native_value: Number(M),
                    tokens_expected_to_receive_count: Number(P)
                };
                if (I && (ue.tokens_to_stake_usd_value = new C(M).multipliedBy(I).toNumber()), i && (ue.token_to_receive = i.tokenSymbol.toLowerCase()), A) {
                    const Q = new C(P).multipliedBy(A);
                    ue.tokens_expected_to_receive_usd_value = Q.toNumber(), I && (ue.tokens_expected_to_receive_native_value = Q.dividedBy(I).toNumber())
                }
                return ue
            }, [M, P, x, I, i, A]),
            Ge = ({
                id: ue
            }) => {
                const Q = ue === "input" ? new C(M).multipliedBy(I).toNumber() : new C(P).multipliedBy(A).toNumber();
                return Z ? ge && ue === "input" ? e.jsxs("span", {
                    className: "text-xs md:text-sm text-error-default w-full text-right truncate",
                    children: ["Not enough ", x]
                }) : ke && ue === "input" ? e.jsxs("span", {
                    className: "text-xs md:text-sm text-error-default w-full text-right truncate",
                    children: ["Minimum: ", se.getDisplayAmountFromAtomicAmount(Ce, 18), " ", x]
                }) : e.jsx("span", {
                    className: `text-xs md:text-sm whitespace-nowrap text-right w-28 overflow-x-auto ${D?"text-disabled":"text-alternative"}`,
                    children: `≈ ${G(Q)}`
                }) : null
            };
        return e.jsx("div", {
            id: "stake-card",
            children: e.jsx("div", {
                className: "mt-4 sm:mt-0 rounded-2xl p-0 max-w-[400px] m-auto sm:py-5 sm:px-6 bg-inherit md:bg-default md:shadow-card",
                children: e.jsxs("div", {
                    className: "flex flex-col w-full mb-7 gap-4",
                    children: [e.jsx("h2", {
                        className: "hidden sm:flex font-bold text-xl",
                        children: "Stake"
                    }), k ? e.jsx(lc, {
                        selectedAccountAddress: u,
                        onSelectAccountAddress: ue => o(Vt(ue)),
                        chainIds: [se.ChainId.ETHEREUM],
                        activeChainId: se.ChainId.ETHEREUM
                    }) : null, e.jsxs("div", {
                        className: "rounded-2xl flex flex-col gap-2 py-3 px-4 sm:px-6 bg-alternative border border-muted md:border-0",
                        children: [e.jsx("p", {
                            className: "text-xs md:text-sm",
                            children: "Send"
                        }), e.jsxs("div", {
                            className: "flex w-full h-full gap-4 items-center justify-between rounded-lg border-none bg-alternative",
                            children: [e.jsx(Nn, {
                                url: ht[i == null ? void 0 : i.nativeToken],
                                symbol: x
                            }), e.jsx(ot, {
                                value: M,
                                id: "input",
                                isDisabled: ne
                            })]
                        }), e.jsxs("div", {
                            className: "flex justify-between",
                            children: [e.jsx(ic, {
                                balance: k ? J((c == null ? void 0 : c.rawBalance) || 0, -18).toString() : void 0,
                                maxValueAvailable: a,
                                estimatedGasFee: g,
                                handleOnClickMaximum: () => {
                                    Me(a, "input"), cc({
                                        text: "Max",
                                        app_source: "stake",
                                        selected_provider: h,
                                        location: S.STAKE_INPUT
                                    })
                                },
                                nativeStakingToken: x
                            }), e.jsx(Ge, {
                                id: "input"
                            })]
                        })]
                    }), e.jsxs("div", {
                        className: "rounded-2xl flex flex-col gap-2 py-5 px-4 sm:px-6 bg-alternative border border-muted md:border-0",
                        children: [e.jsx("p", {
                            className: "text-xs md:text-sm",
                            children: "Get"
                        }), e.jsxs("div", {
                            className: "flex w-full h-full gap-4 items-center justify-between rounded-lg border-none bg-alternative",
                            children: [e.jsx(Nn, {
                                url: i == null ? void 0 : i.logoUrl,
                                symbol: i == null ? void 0 : i.tokenSymbol
                            }), e.jsx(ot, {
                                value: P,
                                id: "output",
                                isDisabled: ne
                            })]
                        }), e.jsx("div", {
                            className: "flex w-full justify-end",
                            children: e.jsx(Ge, {
                                id: "output"
                            })
                        })]
                    }), Z && !ke && e.jsx(or, {
                        isLoading: D,
                        provider: i,
                        nativeStakingToken: x,
                        amountToStake: de.toNumber(),
                        amountToStakeValue: de.multipliedBy(I).toNumber()
                    }), h === ce.ROCKETPOOL && me && e.jsx(oc, {
                        provider: i,
                        tokenInputValue: M
                    }), V && e.jsx(Us, {
                        nativeStakingToken: x,
                        providerId: h,
                        maxEthAvailable: l,
                        additionalEthRequired: te,
                        location: S.STAKE_INPUT
                    }), (i == null ? void 0 : i.nativeToken) === "ETH" && e.jsx(rc, {
                        amountStaking: parseInt(M || "0", 10),
                        provider: i,
                        analyticsLocation: S.STAKE_INPUT
                    }), e.jsx(et, {
                        children: k ? e.jsx(B, {
                            width: "full",
                            loadingText: "Review",
                            isLoading: y,
                            onClick: () => {
                                fl({
                                    selected_provider: h,
                                    text: "Review",
                                    location: S.STAKE_INPUT,
                                    ...Pt
                                }), ye()
                            },
                            disabled: !Z || ke || ge || V || D || !Se || h === ce.ROCKETPOOL && me,
                            children: ge || V ? "Insufficient funds" : Z ? "Review" : "Stake"
                        }) : e.jsx(ja, {})
                    })]
                })
            })
        })
    },
    rr = ({
        provider: t
    }) => {
        const {
            shouldUseTestnet: s
        } = be(t == null ? void 0 : t.tokenAddress), {
            tokenData: n
        } = Bt(se.ZERO_ADDRESS, "ethereum", s), {
            maxEthAvailable: l
        } = ns(t == null ? void 0 : t.tokenAddress, t.nativeToken, s), a = i => new C(i).gt(new C(l)), c = i => new C(i || "").minus(new C(l));
        return e.jsx(Hl, {
            getAdditionalEthRequired: i => c(i),
            getIsOverMaximum: i => a(i),
            maxEthAvailable: l,
            maxNativeTokenAvailable: l.toString(),
            nativeTokenData: n,
            provider: t
        })
    },
    dr = ({
        provider: t
    }) => {
        const s = Te(),
            n = W(),
            {
                activeAccount: l
            } = Ae(),
            {
                shouldUseTestnet: a
            } = be(t == null ? void 0 : t.tokenAddress),
            {
                tokenData: c
            } = Bt(Ze, Cn, a),
            {
                estimatedGasFeeInEth: i,
                ethBalance: r,
                maxEthAvailable: o
            } = ns(t == null ? void 0 : t.tokenAddress, t == null ? void 0 : t.nativeToken, a),
            m = J((c == null ? void 0 : c.rawBalance) || 0, -18),
            u = T => new C(T).gt(m),
            h = new C(i).minus(r),
            j = d.useCallback(async (T, g) => {
                try {
                    (await new gl(oa[g] || "", kl, mc[g] || uc[g]).allowance((l == null ? void 0 : l.address) || "", pl[g])).gte(cs(T)) ? s(`${vt.STAKE}/${t.tokenSymbol}/review`) : s(`${vt.STAKE}/${t.tokenSymbol}/approve`)
                } catch {
                    n(dt({
                        message: "Cannot proceed with stake",
                        type: "error"
                    }))
                }
            }, [l == null ? void 0 : l.address, n, s, t.tokenSymbol]);
        return e.jsx(Hl, {
            checkAllowance: j,
            getAdditionalEthRequired: () => h,
            getIsOverMaximum: T => u(T),
            maxEthAvailable: o,
            maxNativeTokenAvailable: m.toString(),
            nativeTokenData: c,
            provider: t
        })
    },
    mr = ({
        provider: t
    }) => {
        switch (t.nativeToken) {
            case K.ETH:
                return e.jsx(rr, {
                    provider: t
                });
            case K.MATIC:
                return e.jsx(dr, {
                    provider: t
                })
        }
    },
    Sn = ({
        metaMaskFeeInPercentage: t
    }) => e.jsxs(e.Fragment, {
        children: [e.jsx("p", {
            className: "text-base sm:text-sm font-bold",
            children: "MetaMask fee"
        }), t > 0 ? e.jsxs("p", {
            className: "text-sm mt-4 sm:mt-2",
            children: ["MetaMask takes a ", t.toFixed(3), "% fee, which is already included with the amount sent."]
        }) : e.jsx("p", {
            className: "text-sm mt-4 sm:mt-2",
            children: "MetaMask does not currently take any software license fee."
        })]
    }),
    zt = e.jsxs(e.Fragment, {
        children: [e.jsx("p", {
            className: "text-base sm:text-sm font-bold",
            children: "Estimated gas fee"
        }), e.jsx("p", {
            className: "text-sm mt-4 sm:mt-2",
            children: "This is the estimated fee paid to the network to process your transaction, which may vary based on network volume and transaction complexity."
        })]
    }),
    $l = ({
        providerId: t,
        experience: s
    }) => {
        const {
            t: n
        } = oe(), l = s === he.STAKE ? S.STAKE_TRANSACTION_IN_PROGRESS : s === he.WITHDRAW ? S.WITHDRAWAL_TRANSACTION_IN_PROGRESS : S.WITHDRAWAL_CLAIM_TRANSACTION_IN_PROGRESS;
        return d.useEffect(() => {
            Ds({
                location: l,
                selected_provider: t
            })
        }, [l, t]), e.jsx("div", {
            id: "transaction-in-progress-card",
            children: e.jsxs("div", {
                className: "flex flex-col items-center justify-center rounded-2xl p-0 h-[432px] max-w-[400px] m-auto bg-inherit md:bg-default md:shadow-card",
                children: [e.jsx(Et, {
                    size: "sm"
                }), e.jsx("span", {
                    className: "text-sm sm:text-base mt-3 text-alternative",
                    children: n("main.transactionInProgress")
                })]
            })
        })
    },
    Zs = (t, s) => {
        const n = W(),
            {
                transactionStatus: l,
                transactionError: a
            } = _(ka),
            c = us(),
            i = (c == null ? void 0 : c.pathname) || "",
            r = i == null ? void 0 : i.includes("/withdraw"),
            o = r ? `${Le.STAKE}/withdraw/${t==null?void 0:t.tokenSymbol}/confirmed` : `${Le.STAKE}/${t==null?void 0:t.tokenSymbol}/confirmed`;
        if (d.useEffect(() => () => {
                s && l === Ke.Confirmed && n(pt())
            }, [n, s, l]), s) {
            if (l === Ke.Fetched) return e.jsx($l, {
                providerId: t == null ? void 0 : t.providerId,
                experience: r ? he.WITHDRAW : he.STAKE
            });
            if (l === Ke.Confirmed) return e.jsx($e, {
                to: s
            })
        }
        if (l === Ke.Error)
            if ((a == null ? void 0 : a.code) === pa.ACTION_REJECTED) {
                n(pt());
                return
            } else return e.jsx($e, {
                to: o
            });
        if (l === Ke.Fetched || l === Ke.Confirmed) return e.jsx($e, {
            to: o
        })
    },
    ur = "bg-[#00A3FF]",
    xr = "bg-[#FF998E]",
    hr = "bg-[#627EEA]",
    fr = "bg-[#8247E5]",
    gr = "bg-[#6f29e5]",
    os = ({
        iconUrl: t,
        isLoading: s,
        tokenAddress: n,
        tokenSymbol: l,
        tokenAmount: a,
        tokenPrice: c
    }) => {
        const {
            formatPriceWithCurrency: i
        } = _e(), r = Ye(F(a, 4), {
            thousandSeparator: !0
        }), o = i(a * c), m = () => {
            switch (n) {
                case ys:
                case yn:
                    return ur;
                case Rn:
                    return gr;
                case ls:
                    return xr;
                case Ze:
                    return fr;
                case se.ZERO_ADDRESS:
                default:
                    return hr
            }
        };
        return e.jsxs("div", {
            className: Ie("flex flex-col items-center flex-1 rounded-lg bg-opacity-20 p-3 w-full truncate", m()),
            children: [e.jsx("img", {
                src: t,
                alt: "",
                className: "rounded-full w-12 h-12 mb-2"
            }), s ? e.jsx(ae, {
                className: "!w-[140px] !h-4"
            }) : e.jsxs(f, {
                scale: L.ParagraphBase,
                bold: !0,
                center: !0,
                className: "w-full truncate",
                children: [r, " ", l]
            }), s ? e.jsx(ae, {
                className: "!w-[140px] !h-4 mt-0.5 sm:mt-1"
            }) : e.jsxs(f, {
                scale: L.ParagraphSm,
                subdued: !0,
                center: !0,
                className: "w-full truncate",
                children: ["≈ ", o]
            })]
        })
    },
    Ss = 30,
    Ul = ({
        provider: t
    }) => {
        var Ge, ue;
        const s = W(),
            n = Dt(),
            {
                formatPriceWithCurrency: l
            } = _e(),
            a = t == null ? void 0 : t.tokenAddress,
            c = t == null ? void 0 : t.providerId,
            i = bt[t == null ? void 0 : t.nativeToken].tokenAddress,
            {
                activeAccount: r,
                connectedAccounts: o
            } = Ae(),
            m = (r == null ? void 0 : r.address) || "",
            {
                selectedAccountAddress: u
            } = _(Q => Q.stake),
            h = Tt(u, m),
            {
                accountAddresses: j
            } = Je(),
            {
                contractConstants: T,
                isLoadingContractConstants: g
            } = _(Qt),
            {
                conversionRate: b
            } = _(xl(a)),
            {
                stakingChainId: k,
                shouldUseTestnet: N
            } = be(a),
            {
                isOnNetwork: E
            } = hs(k),
            R = _(Vs, rt),
            {
                refetch: w
            } = ms(void 0),
            {
                refetch: y
            } = Oe({
                accounts: o,
                tokenAddress: a,
                useTestnet: N
            }),
            {
                refetch: p
            } = Oe({
                accounts: o,
                tokenAddress: i,
                useTestnet: N
            }),
            {
                tokenBalance: x,
                isLoading: v
            } = _(Ue(i, u, o, N)),
            {
                tokenBalance: D,
                isLoading: A
            } = _(Ue(a, u, o, N)),
            I = ((Ge = x == null ? void 0 : x.value) == null ? void 0 : Ge.price) || 0,
            {
                amountToStake: O
            } = _(Q => Q.stake.thirdPartyStaking),
            Y = ((ue = D == null ? void 0 : D.value) == null ? void 0 : ue.price) || 0,
            H = Number(O) * b,
            [G, U] = d.useState(Date.now() + Ss * Wt),
            [q, ne] = d.useState(Ss),
            [z, $] = d.useState(!0),
            M = T.metaMaskFee || 0,
            fe = M > 0,
            P = M ? M / 100 * Number(O) : 0,
            re = l(P * I),
            [X, Ee] = d.useState(0),
            [de, Se] = d.useState(!1),
            me = X ? new C(X).multipliedBy(Xn).toFixed(0) : "",
            {
                estimatedGasFeeInEth: Z,
                estimatedGasFeeInFiat: ge,
                isLoadingGas: te
            } = Aa(me),
            V = d.useCallback(async () => {
                Se(!0);
                try {
                    const pe = await ut(xc)(k, a, O, m);
                    Ee(pe)
                } catch {
                    Ee(0)
                } finally {
                    Se(!1)
                }
            }, [m, O, a, k]),
            Ce = v || A,
            ke = Ce || de || g,
            De = Zs(t),
            [Me, ye] = d.useState(!1);
        d.useEffect(() => {
            $(!1)
        }, [s]), d.useEffect(() => {
            if (ke || z) return;
            if (q < 1) return $(!0);
            const Q = setInterval(() => {
                const pe = G - Date.now(),
                    He = Math.ceil(pe / Wt);
                ne(He < 0 ? 0 : He)
            }, 500);
            return () => {
                clearInterval(Q)
            }
        }, [q, G, ke, z]), d.useEffect(() => {
            ke || ($(!1), U(Date.now() + Ss * Wt), ne(Ss))
        }, [ke]), d.useEffect(() => {
            z && t && (y(), p(), w(), V(), s(Ea(se.ChainId.ETHEREUM)), jl({
                selected_provider: c,
                location: S.STAKE_REVIEW
            }), $(!1))
        }, [s, t, c, z, V, p, y, w]);
        const ot = d.useCallback(async () => {
                const Q = {
                    accountAddresses: j,
                    chainIds: R
                };
                ye(!0);
                try {
                    if (window.ethereum) {
                        const pe = new es(window.ethereum, k),
                            Ql = await new hc(k).encodeDepositData(a, O, m),
                            Js = "stake",
                            ea = S.STAKE_REVIEW;
                        s(fs({
                            provider: pe,
                            transactionData: Ql,
                            transactionSubmittedCallback: tt => {
                                fc({
                                    app_source: Js,
                                    location: ea,
                                    tx_gas_limit: tt == null ? void 0 : tt.gasLimit.toString(),
                                    tx_hash: tt == null ? void 0 : tt.hash
                                })
                            },
                            transactionFailedCallback: (tt, Oa) => {
                                Oa ? ye(!1) : is(tt), Hs({
                                    app_source: Js,
                                    location: ea,
                                    is_tx_signed: !Oa,
                                    error_message: tt.message
                                })
                            },
                            transactionConfirmedCallback: () => {
                                $s({
                                    app_source: Js,
                                    location: ea
                                })
                            },
                            request: Q,
                            tokensToUpdate: [{
                                accountAddress: m,
                                tokenAddress: a,
                                chainId: k
                            }, {
                                accountAddress: m,
                                tokenAddress: i,
                                chainId: k
                            }],
                            metadata: {
                                chainId: k,
                                transactionCategory: "MINT"
                            }
                        }))
                    } else throw Error("Ethereum provider not found")
                } catch {
                    s(dt({
                        message: "Transaction could not be submitted",
                        type: "error"
                    }))
                }
            }, [j, R, k, a, O, m, s, i]),
            Pt = d.useMemo(() => {
                var pe;
                const Q = {
                    token_to_stake: t.nativeToken.toLowerCase(),
                    token_to_receive: (pe = t == null ? void 0 : t.tokenSymbol) == null ? void 0 : pe.toLowerCase(),
                    tokens_to_stake_count: Number(O),
                    tokens_to_stake_native_value: Number(O),
                    tokens_to_receive_count: H
                };
                if (I && (Q.tokens_to_stake_usd_value = new C(O).multipliedBy(I).toNumber()), Y) {
                    const He = new C(H).multipliedBy(Y);
                    Q.tokens_to_receive_usd_value = He.toNumber(), I && (Q.tokens_to_receive_native_value = He.dividedBy(I).toNumber())
                }
                return Q
            }, [O, H, I, t, Y]);
        return !t || !O ? e.jsx($e, {
            to: `${Le.STAKE}/${n.tokenSymbol}`
        }) : De && Me ? De : e.jsxs("div", {
            id: "stake-review-card",
            children: [Me && !ee && e.jsx("div", {
                className: "fixed inset-0 bg-overlay-default z-50"
            }), e.jsx("div", {
                className: "mt-4 sm:mt-0 rounded-2xl p-0 max-w-[400px] m-auto sm:py-5 sm:px-6 bg-inherit md:bg-default md:shadow-card",
                children: e.jsxs("div", {
                    className: "flex flex-col w-full mb-7 gap-4",
                    children: [e.jsxs("div", {
                        className: "hidden md:flex justify-between items-center",
                        children: [e.jsx(Pe, {
                            to: `${Le.STAKE}/${t.tokenSymbol}`,
                            className: "w-12",
                            onClick: () => Qs({
                                text: "Left arrow icon",
                                selected_provider: c,
                                location: `${S.STAKE_REVIEW} Card Header`,
                                app_source: "stake"
                            }),
                            children: e.jsx(Ys, {})
                        }), e.jsx("h2", {
                            className: "font-bold text-xl",
                            children: "Review stake"
                        }), e.jsx(Pa, {
                            className: "w-12 text-right",
                            location: S.STAKE_REVIEW
                        })]
                    }), !E && e.jsx(ks, {
                        chainId: k,
                        analyticsProps: {
                            location: S.STAKE_REVIEW,
                            app_source: "stake"
                        }
                    }), h ? null : e.jsx(Ca, {
                        providerId: c,
                        address: u,
                        location: S.STAKE_REVIEW
                    }), e.jsx("div", {
                        className: "flex justify-center",
                        children: e.jsxs("p", {
                            className: "rounded-2xl text-sm px-3 py-1 w-fit text-alternative",
                            children: ["New quote in", " ", e.jsx("span", {
                                className: `font-semibold ${q<1&&"text-error-default"}`,
                                children: wl(q)
                            })]
                        })
                    }), e.jsxs("div", {
                        className: "flex gap-1 relative",
                        children: [e.jsx("div", {
                            className: "absolute flex items-center justify-center bg-alternative md:bg-default rounded-full h-6 w-6 left-[50%] -ml-2.5 top-[50%] -mt-2.5",
                            children: e.jsx(Tl, {
                                className: "w-5 text-icon-muted"
                            })
                        }), e.jsx(os, {
                            iconUrl: ht[t.nativeToken],
                            tokenAddress: bt[t.nativeToken].tokenAddress,
                            tokenSymbol: t.nativeToken,
                            tokenAmount: Number(O),
                            tokenPrice: I,
                            isLoading: !O || Ce
                        }), e.jsx(os, {
                            iconUrl: t.logoUrl,
                            tokenAddress: t.tokenAddress,
                            tokenSymbol: t.tokenSymbol,
                            tokenAmount: H,
                            tokenPrice: Y,
                            isLoading: !H || Ce
                        })]
                    }), e.jsxs("div", {
                        className: "flex gap-2 justify-center mb-4",
                        children: [e.jsx(rs, {
                            className: "w-4 h-4 stroke-success-default stroke-2"
                        }), e.jsxs("span", {
                            className: "text-success-default text-sm",
                            children: ["Estimated rewards ", Fn(t.apy, 2)]
                        })]
                    }), e.jsxs("div", {
                        className: "flex justify-between",
                        children: [e.jsx(we, {
                            id: "metamask-fee",
                            text: fe ? "Included MetaMask fee" : "MetaMask fee",
                            tooltipText: e.jsx(Sn, {
                                metaMaskFeeInPercentage: M
                            }),
                            mobileTooltip: e.jsx(Sn, {
                                metaMaskFeeInPercentage: M
                            })
                        }), Ce ? e.jsx(ae, {
                            className: "!w-[140px] !h-6 mt-0"
                        }) : e.jsx("span", {
                            className: "ml-2",
                            children: fe ? re : "None"
                        })]
                    }), e.jsxs("div", {
                        className: "flex justify-between",
                        children: [e.jsx(we, {
                            id: "gas-fee",
                            text: "Estimated gas fee",
                            tooltipText: zt,
                            mobileTooltip: zt
                        }), te || de || Ce ? e.jsx(ae, {
                            className: "!w-[140px] !h-6 mt-0"
                        }) : e.jsx("span", {
                            className: "ml-2",
                            children: Z ? ge : gs
                        })]
                    }), e.jsxs(et, {
                        children: [e.jsx(B, {
                            disabled: !E || !h,
                            isLoading: Me,
                            loadingText: "Confirm transaction in wallet",
                            width: "full",
                            className: "mb-1",
                            onClick: () => {
                                ot(), ya({
                                    text: Nt,
                                    selected_provider: c,
                                    location: S.STAKE_REVIEW,
                                    estimated_gas_limit: me || "none",
                                    ...Pt
                                })
                            },
                            children: Nt
                        }), e.jsx(Gs, {
                            experience: he.STAKE
                        })]
                    })]
                })
            })]
        })
    },
    kr = ({
        provider: t
    }) => {
        const s = W(),
            {
                activeAccount: n
            } = Ae(),
            l = t == null ? void 0 : t.providerId,
            a = t == null ? void 0 : t.tokenAddress,
            {
                stakingChainId: c
            } = be(a);
        return d.useEffect(() => {
            l === ce.ROCKETPOOL && s(Zt({
                chainId: c
            }))
        }, [n, s, a, l, c]), e.jsx(Ul, {
            provider: t
        })
    },
    pr = ({
        provider: t
    }) => {
        const s = W(),
            {
                activeAccount: n
            } = Ae(),
            l = t == null ? void 0 : t.providerId,
            a = t == null ? void 0 : t.tokenAddress,
            {
                stakingChainId: c
            } = be(a);
        return d.useEffect(() => {
            s(wt({
                chainId: c,
                providerId: l
            }))
        }, [n, s, a, l, c]), e.jsx(Ul, {
            provider: t
        })
    },
    jr = ({
        provider: t
    }) => {
        switch (t.nativeToken) {
            case K.ETH:
                return e.jsx(kr, {
                    provider: t
                });
            case K.MATIC:
                return e.jsx(pr, {
                    provider: t
                })
        }
    },
    wr = ({
        tokenSymbol: t,
        hash: s,
        providerId: n,
        experience: l,
        nativeStakingToken: a,
        transactionChain: c
    }) => {
        const i = Te(),
            r = gc(c, s),
            o = Rs(n),
            m = n !== ce.ROCKETPOOL && l === he.WITHDRAW,
            u = l === he.STAKE || m ? "View holdings" : "View portfolio",
            h = `View on ${kc[c].blockExplorer.name}`,
            j = l === he.STAKE ? S.STAKE_TRANSACTION_COMPLETE : l === he.WITHDRAW ? S.WITHDRAWAL_TRANSACTION_COMPLETE : S.WITHDRAWAL_CLAIM_TRANSACTION_COMPLETE;
        return d.useEffect(() => {
            Ds({
                location: j,
                selected_provider: n
            })
        }, [j, n, l]), e.jsx("div", {
            id: "transaction-success-card",
            children: e.jsxs("div", {
                className: "flex flex-col gap-2 items-center mt-4 sm:mt-0 rounded-2xl p-0 max-w-[400px] m-auto sm:py-5 sm:px-6 bg-inherit md:bg-default md:shadow-card",
                children: [e.jsx(bl, {
                    className: "w-8 h-8"
                }), e.jsx(f, {
                    scale: L.HeadingXs,
                    className: "mb-3 mt-1 font-semibold",
                    children: m ? "Withdrawal request started" : "Transaction complete"
                }), e.jsx(Tr, {
                    isWithdrawalRequest: m,
                    isWithdrawal: l === he.WITHDRAW || l === he.CLAIM,
                    providerName: o,
                    tokenSymbol: t,
                    nativeStakingToken: a
                }), e.jsx(et, {
                    children: e.jsxs("div", {
                        className: "flex flex-row-reverse items-center gap-4 xs:flex-col xs:gap-0",
                        children: [e.jsx(B, {
                            width: "full",
                            onClick: () => {
                                ve({
                                    selected_provider: n,
                                    text: u,
                                    location: j
                                }), i(l === he.STAKE || m ? Le.STAKE : Le.PORTFOLIO)
                            },
                            children: u
                        }), e.jsx(Pe, {
                            className: "flex text-sm w-full justify-center",
                            href: r,
                            target: "_blank",
                            onClick: () => ct({
                                external_link: r,
                                location: j,
                                app_source: "stake",
                                link_text: "View on Etherscan"
                            }),
                            children: e.jsxs("span", {
                                className: "flex gap-1 xs:mt-1",
                                children: [h, e.jsx(xs, {
                                    className: "w-4 h-4"
                                })]
                            })
                        })]
                    })
                })]
            })
        })
    },
    Tr = ({
        isWithdrawalRequest: t,
        isWithdrawal: s,
        providerName: n,
        tokenSymbol: l,
        nativeStakingToken: a
    }) => {
        if (t) {
            const c = Date.now() + Ts,
                i = Date.now() + Ts * 3,
                r = Date.now() + Ts * 4,
                o = Date.now() + Ts * 8;
            return e.jsxs(e.Fragment, {
                children: [e.jsxs(f, {
                    scale: L.ParagraphBase,
                    subdued: !0,
                    center: !0,
                    className: "mb-3",
                    children: [n, " estimates that your withdrawal request will be ready between", " ", e.jsxs("span", {
                        className: "text-default",
                        children: [nn(a === K.ETH ? c : i), " and", " ", nn(a === K.ETH ? o : r)]
                    }), ". This date varies based on ", n, "'s withdrawal processing queue."]
                }), e.jsxs(f, {
                    scale: L.ParagraphBase,
                    subdued: !0,
                    center: !0,
                    className: "mb-3",
                    children: ["Once your withdrawal is ready, you can ", e.jsx("span", {
                        className: "text-default",
                        children: "claim your rewards"
                    }), ". This will include a gas fee to process the transaction."]
                })]
            })
        }
        return e.jsx(f, {
            scale: L.ParagraphBase,
            subdued: !0,
            center: !0,
            className: "mb-3",
            children: s ? "Your withdrawal is now in your wallet." : `You are now eligible to receive rewards. You can also swap your ${l} for ${a} at any time.`
        })
    },
    br = "The deposit pool size after depositing exceeds the maximum size",
    Nr = ({
        tokenSymbol: t,
        transactionError: s,
        providerId: n,
        experience: l
    }) => {
        var o, m;
        const a = Te(),
            c = fa(((o = s == null ? void 0 : s.transaction) == null ? void 0 : o.value) || 0),
            i = (m = s == null ? void 0 : s.message) == null ? void 0 : m.includes(br),
            r = l === he.STAKE ? S.STAKE_TRANSACTION_FAILED : l === he.WITHDRAW ? S.WITHDRAWAL_TRANSACTION_FAILED : S.WITHDRAWAL_CLAIM_TRANSACTION_FAILED;
        return d.useEffect(() => {
            i ? Ds({
                location: S.STAKE_TRANSACTION_FAILED_RP_ERROR,
                selected_provider: n
            }) : Ds({
                location: r,
                selected_provider: n,
                error_message: s == null ? void 0 : s.message
            })
        }, [r, n, i, l, s]), e.jsx("div", {
            id: "transaction-fail-card",
            children: e.jsxs("div", {
                className: "flex flex-col gap-2 items-center mt-4 sm:mt-0 rounded-2xl p-0 max-w-[400px] m-auto sm:py-5 sm:px-6 bg-inherit md:bg-default md:shadow-card",
                children: [e.jsx(pc, {
                    className: "stroke-icon-error-inverse fill-error-default w-9 h-9"
                }), i ? e.jsxs(e.Fragment, {
                    children: [e.jsx("h2", {
                        className: "text-base sm:text-xl font-semibold mb-3 mt-1",
                        children: "Unable to stake funds"
                    }), e.jsxs("p", {
                        className: "text-sm sm:text-base text-alternative text-center mb-3",
                        children: ["Unfortunately, Rocket Pool deposits are at capacity and we were unable to complete your stake at this time. Try again later,", e.jsx(Pe, {
                            to: "/stake",
                            className: "ml-1",
                            onClick: () => jc({
                                text: "choose a different provider",
                                location: S.STAKE_TRANSACTION_FAILED_RP_ERROR,
                                selected_provider: n
                            }),
                            children: "choose a different provider"
                        }), ", or get rETH now by", e.jsx(Pe, {
                            to: ua(se.ZERO_ADDRESS, ls, c),
                            className: "ml-1",
                            onClick: () => Ln({
                                location: S.STAKE_TRANSACTION_FAILED_RP_ERROR,
                                selected_provider: n
                            }),
                            children: "swapping instead"
                        }), "."]
                    })]
                }) : e.jsxs(e.Fragment, {
                    children: [e.jsx("h2", {
                        className: "text-base sm:text-xl font-semibold mb-3 mt-1",
                        children: "Transaction failed"
                    }), e.jsx("p", {
                        className: "text-sm sm:text-base text-alternative text-center mb-3",
                        children: "Changes in network demands can sometimes cause failures, but your funds are safe. Try again later or reach out to customer support if the problem continues."
                    }), e.jsx(et, {
                        children: e.jsxs("div", {
                            className: "flex flex-row-reverse items-center gap-4 xs:flex-col xs:gap-0",
                            children: [e.jsx(B, {
                                variant: "outline",
                                width: "full",
                                onClick: () => {
                                    wc({
                                        text: ln,
                                        location: r,
                                        selected_provider: n
                                    }), a(l === he.STAKE ? `${Le.STAKE}/${t}` : l === he.WITHDRAW ? `${Le.STAKE}/withdraw/${t}` : Le.STAKE)
                                },
                                children: ln
                            }), e.jsx(Pe, {
                                className: "w-full text-center text-sm xs:mt-1",
                                href: Is,
                                target: "_blank",
                                onClick: () => {
                                    ct({
                                        external_link: Is,
                                        location: r,
                                        app_source: "stake",
                                        link_text: cn
                                    })
                                },
                                children: cn
                            })]
                        })
                    })]
                })]
            })
        })
    },
    Gl = ({
        provider: t,
        experience: s = he.STAKE
    }) => {
        const n = W(),
            {
                transactionReceipt: l,
                transactionStatus: a,
                transactionError: c
            } = _(ka),
            {
                stakingChainId: i
            } = be(t.tokenAddress);
        return d.useEffect(() => () => {
            n(pt())
        }, [n]), a === Ke.Fetched ? e.jsx($l, {
            providerId: t == null ? void 0 : t.providerId,
            experience: s
        }) : a === Ke.Confirmed && (l != null && l.transactionHash) ? e.jsx(wr, {
            tokenSymbol: t == null ? void 0 : t.tokenSymbol,
            hash: l.transactionHash,
            providerId: t == null ? void 0 : t.providerId,
            experience: s,
            nativeStakingToken: t == null ? void 0 : t.nativeToken,
            transactionChain: i
        }) : a === Ke.Error || c ? e.jsx(Nr, {
            tokenSymbol: t == null ? void 0 : t.tokenSymbol,
            transactionError: c,
            providerId: t == null ? void 0 : t.providerId,
            experience: s
        }) : e.jsx($e, {
            to: s === he.STAKE ? vt.STAKE : `${vt.STAKE}/withdraw`
        })
    },
    Kl = ({
        analyticsLocation: t,
        approvalAmount: s,
        backRoute: n,
        baseRoute: l,
        onApprove: a,
        provider: c,
        tokenIcon: i,
        tokenIconStyles: r,
        tokenToApprove: o
    }) => {
        const m = W(),
            [u, h] = d.useState(!1),
            j = c == null ? void 0 : c.providerId,
            {
                stakingChainId: T
            } = be(c == null ? void 0 : c.tokenAddress),
            {
                isOnNetwork: g
            } = hs(T),
            b = Zs(c, `${l}/review`),
            k = d.useCallback(async () => {
                h(!0);
                try {
                    await a()
                } catch (N) {
                    m(dt({
                        message: (N == null ? void 0 : N.code) === pa.ACTION_REJECTED ? "Approval rejected" : "Approval error",
                        type: "error"
                    }))
                } finally {
                    h(!1)
                }
            }, [a, m]);
        return !c || !s ? e.jsx($e, {
            to: l
        }) : b || e.jsxs("div", {
            id: "approve-card",
            children: [u && !ee && e.jsx("div", {
                className: "fixed inset-0 bg-overlay-default z-50"
            }), e.jsx("div", {
                className: "mt-4 sm:mt-0 rounded-2xl p-0 max-w-[424px] m-auto sm:py-5 sm:px-6 bg-inherit md:bg-default md:shadow-card",
                children: e.jsxs("div", {
                    className: "flex flex-col w-full gap-3",
                    children: [e.jsxs("div", {
                        className: "hidden md:flex justify-between items-center mb-5",
                        children: [e.jsx(Pe, {
                            to: n,
                            className: "w-12",
                            onClick: () => Qs({
                                text: "Left arrow icon",
                                selected_provider: j,
                                location: `${t} Header`,
                                app_source: "stake"
                            }),
                            children: e.jsx(Ys, {
                                className: "text-icon-default"
                            })
                        }), e.jsx(f, {
                            scale: L.HeadingSm,
                            bold: !0,
                            className: "hidden md:flex",
                            children: "Approve token"
                        }), e.jsx("div", {
                            className: "w-12"
                        })]
                    }), e.jsx("div", {
                        className: "flex justify-center",
                        children: e.jsxs("div", {
                            className: "relative",
                            children: [e.jsx("div", {
                                className: "absolute flex w-5 h-5 rounded-full ring-2 bg-primary-inverse ring-primary-inverse -top-1 -right-1",
                                children: e.jsx(bl, {})
                            }), e.jsx("img", {
                                src: i,
                                alt: "",
                                className: `w-12 h-12 ${r}`
                            })]
                        })
                    }), e.jsxs(f, {
                        className: "text-center mb-4",
                        children: ["Do you approve access to", e.jsxs("span", {
                            className: "font-bold ml-1",
                            children: [Ye(F(s, 4), {
                                thousandSeparator: !0
                            }), " ", o]
                        }), "?"]
                    }), !g && e.jsx(ks, {
                        analyticsProps: {
                            location: t,
                            app_source: "stake"
                        },
                        chainId: T
                    }), e.jsxs(et, {
                        children: [e.jsx(B, {
                            disabled: !g,
                            isLoading: u,
                            loadingText: "Sign in wallet",
                            onClick: () => {
                                Tc({
                                    text: "Approve",
                                    selected_provider: j,
                                    location: t
                                }), k()
                            },
                            width: "full",
                            children: "Approve"
                        }), e.jsx(f, {
                            subdued: !0,
                            center: !0,
                            scale: L.ParagraphXs,
                            className: "mt-1 text-xxs xs:text-xs",
                            children: "This only gives access to the exact amount needed for the transaction."
                        })]
                    })]
                })
            })]
        })
    },
    Sr = ({
        activeAccountAddress: t,
        provider: s
    }) => {
        const n = W(),
            l = Dt(),
            {
                amountToStake: a
            } = _(m => m.stake.thirdPartyStaking),
            c = `${vt.STAKE}/${l.tokenSymbol}`,
            i = s.nativeToken,
            {
                stakingChainId: r
            } = be(s == null ? void 0 : s.tokenAddress),
            o = d.useCallback(async () => {
                if (window.ethereum) {
                    const m = new es(window.ethereum, r);
                    if (i === K.MATIC) {
                        const h = await new gl(oa[r] || "", kl, m).interface.encodeFunctionData("approve", [pl[r], cs(a)]),
                            j = {
                                chainId: r,
                                from: t,
                                to: oa[r],
                                data: h,
                                value: 0
                            };
                        await n(fs({
                            provider: m,
                            transactionData: j,
                            metadata: {
                                chainId: r,
                                transactionCategory: Qn.Approve
                            }
                        }))
                    }
                } else throw Error("Ethereum provider not found")
            }, [t, a, n, i, r]);
        return e.jsx(Kl, {
            analyticsLocation: S.STAKE_APPROVE,
            approvalAmount: a,
            backRoute: c,
            baseRoute: c,
            onApprove: o,
            provider: s,
            tokenIcon: ht[i] || "",
            tokenToApprove: i
        })
    };
var vt = (t => (t.ROOT = "/", t.STAKE = "/stake", t.APPROVE = "/approve", t.REVIEW = "/review", t.CONFIRMED = "/confirmed", t))(vt || {});
const _s = ({
        route: t,
        provider: s
    }) => {
        const n = () => e.jsx("div", {
                className: "flex justify-center",
                children: e.jsxs("span", {
                    className: "text-sm font-bold text-center mr-6",
                    children: ["Stake with ", Rs(s == null ? void 0 : s.providerId)]
                })
            }),
            l = () => e.jsxs("div", {
                className: "flex",
                children: [e.jsx("span", {
                    className: "text-sm font-bold text-center basis-full",
                    children: "Review stake"
                }), e.jsx(Pa, {
                    className: "text-sm ml-1",
                    location: S.STAKE_REVIEW
                })]
            });
        return e.jsx(qs, {
            title: ee ? t === "/review" ? e.jsx(l, {}) : e.jsx(n, {}) : e.jsx(ha, {
                iconUrl: s == null ? void 0 : s.logoUrl,
                eyebrowText: s == null ? void 0 : s.tokenSymbol,
                text: s == null ? void 0 : s.name
            }),
            titleClassName: "w-full",
            hideGlobalActions: !0,
            pagination: [{
                title: "Go back",
                href: t === "/review" && ee ? `/stake/${s==null?void 0:s.tokenSymbol}` : "/stake"
            }, {
                title: "Staking flow",
                href: location.pathname
            }]
        })
    },
    _r = () => {
        var j;
        const {
            isFetchingFeatureFlag: t
        } = it(), s = W(), n = Dt(), {
            connectedAccounts: l,
            activeAccount: a
        } = Ae(), c = (a == null ? void 0 : a.address) || "";
        ms(void 0);
        const {
            provider: i,
            isLoadingProvider: r,
            isProviderUnfetched: o
        } = _(Nl(((j = n.tokenSymbol) == null ? void 0 : j.toLowerCase()) || "")), [m, u] = d.useState(r || o), {
            shouldUseTestnet: h
        } = be(i == null ? void 0 : i.tokenAddress);
        return d.useEffect(() => {
            !r && !o && u(!1)
        }, [r, o]), Oe({
            accounts: l,
            tokenAddress: _a,
            useTestnet: h
        }, {
            skip: !l.length
        }), d.useEffect(() => (s(Ea(se.ChainId.ETHEREUM)), s(Sl()), () => {
            s(bc())
        }), [h, s, l]), m || t ? null : i ? e.jsx("div", {
            id: "staking-flow",
            children: e.jsx($t, {
                children: e.jsxs(Ks, {
                    children: [e.jsx(Ne, {
                        path: "/",
                        element: e.jsxs(e.Fragment, {
                            children: [e.jsx(_s, {
                                route: "/",
                                provider: i
                            }), e.jsx(mr, {
                                provider: i
                            })]
                        })
                    }), e.jsx(Ne, {
                        path: "/approve",
                        element: e.jsxs(e.Fragment, {
                            children: [e.jsx(_s, {
                                route: "/approve",
                                provider: i
                            }), e.jsx(Sr, {
                                provider: i,
                                activeAccountAddress: c
                            })]
                        })
                    }), e.jsx(Ne, {
                        path: "/review",
                        element: e.jsxs(e.Fragment, {
                            children: [e.jsx(_s, {
                                route: "/review",
                                provider: i
                            }), e.jsx(jr, {
                                provider: i
                            })]
                        })
                    }), e.jsx(Ne, {
                        path: "/confirmed",
                        element: e.jsxs(e.Fragment, {
                            children: [!ee && e.jsx(_s, {
                                route: "/confirmed",
                                provider: i
                            }), e.jsx(Gl, {
                                provider: i
                            })]
                        })
                    }), e.jsx(Ne, {
                        path: "*",
                        element: e.jsx($e, {
                            to: `/stake/${n.tokenSymbol}`
                        })
                    })]
                })
            })
        }) : e.jsx($e, {
            to: "/stake"
        })
    },
    Ar = _r,
    Er = ({
        onClick: t,
        tokenSymbol: s = "",
        isDisplayingFiat: n = !1
    }) => {
        const {
            baseCurrency: l
        } = _e();
        return s ? e.jsx(B, {
            variant: "text",
            endIcon: e.jsx(Nc, {
                className: "rotate-90 w-3.5 h-3.5"
            }),
            onClick: t,
            className: "px-2.5",
            children: n ? l.toUpperCase() : s
        }) : null
    },
    Cr = ({
        provider: t
    }) => {
        var ge, te;
        const s = Te(),
            n = W(),
            l = t == null ? void 0 : t.providerId,
            a = t == null ? void 0 : t.tokenAddress,
            c = t == null ? void 0 : t.nativeToken,
            {
                stakingChainId: i,
                shouldUseTestnet: r
            } = be(t == null ? void 0 : t.tokenAddress),
            {
                exchangeRate: o,
                baseCurrency: m
            } = _e(),
            {
                activeAccount: u,
                connectedAccounts: h,
                isActive: j
            } = Ae(),
            {
                selectedAccountAddress: T
            } = _(V => V.stake),
            {
                refetch: g
            } = Oe({
                accounts: h,
                tokenAddress: a,
                useTestnet: r
            }),
            {
                refetch: b
            } = Oe({
                accounts: h,
                tokenAddress: c === K.ETH ? se.ZERO_ADDRESS : Ze,
                useTestnet: r
            }),
            {
                tokenBalance: k,
                isLoading: N
            } = _(Ue(Ze, T, h, r)),
            {
                tokenBalance: E,
                isLoading: R
            } = _(Ue(a, T, h, r)),
            w = N || R,
            y = d.useMemo(() => {
                var V;
                return E ? J(((V = E.account) == null ? void 0 : V.rawBalance) || 0, -18) : xe
            }, [E]),
            p = ((ge = E == null ? void 0 : E.value) == null ? void 0 : ge.price) ? ? 0,
            x = y.multipliedBy(p).multipliedBy(o),
            {
                withdrawalAmount: v
            } = _(V => V.stake.thirdPartyStaking),
            D = !!(u != null && u.address) && Tt(T, u == null ? void 0 : u.address),
            [A, I] = d.useState(!1),
            [O, Y] = d.useState(""),
            [H, G] = d.useState(""),
            U = A ? H : O,
            [q, ne] = d.useState(!1),
            z = A ? x : y,
            $ = Re(O).gt(xe),
            M = A ? $ && Re(H).gt(x) : $ && Re(O).gt(y),
            [fe, P] = d.useState({}),
            {
                transformWithExchangeRates: re,
                isLoadingExchangeRates: X
            } = gt(),
            {
                convertToNativeToken: Ee
            } = ds(a),
            de = d.useMemo(() => ga(V => {
                h.length && (g(), b()), hl({
                    location: S.WITHDRAWAL_INPUT,
                    selected_provider: l,
                    ...V
                })
            }, 300), [h.length, g, b, l]),
            Se = d.useCallback((V = "") => {
                P({}), V && de({}), V === "" ? (G(""), Y("")) : A ? (G(V), Y(Re(V).dividedBy(p).toString())) : (Y(V), G(Re(V).multipliedBy(p).toString()))
            }, [A, p, de]),
            me = V => {
                P({
                    selected_percentage: `${V*100}%`
                }), de({
                    selected_percentage: `${V*100}%`
                }), G(x.multipliedBy(V).toString()), Y(y.multipliedBy(V).toString())
            };
        d.useEffect(() => {
            v && p && (Se(v), n(_l()))
        }, [n, p, v, Se]), d.useEffect(() => {
            n(Zt({
                chainId: i
            })), c === K.MATIC && n(wt({
                chainId: i,
                providerId: l
            }))
        }, [n, c, l, i]);
        const Z = d.useMemo(() => {
            var De, Me;
            const V = O ? Number(O) : 0,
                {
                    nativeTokenAmount: Ce
                } = Ee(O || 0),
                ke = {
                    token_to_receive: c.toLowerCase(),
                    tokens_to_withdraw_count: V,
                    tokens_to_receive_count: Ce.toNumber(),
                    tokens_to_receive_native_value: Ce.toNumber()
                };
            if (t && (ke.token_to_withdraw = t.tokenSymbol.toLowerCase()), !w) {
                const ye = new C(V).multipliedBy(p);
                ke.tokens_to_withdraw_usd_value = ye.toNumber(), X || (c === K.ETH ? (ke.tokens_to_withdraw_native_value = re(ye, "usd", "eth").toNumber(), ke.tokens_to_receive_usd_value = re(Ce, "eth", "usd").toNumber()) : c === K.MATIC && (ke.tokens_to_withdraw_native_value = ye.dividedBy((De = k == null ? void 0 : k.value) == null ? void 0 : De.price).toNumber(), ke.tokens_to_receive_usd_value = Ce.multipliedBy((Me = k == null ? void 0 : k.value) == null ? void 0 : Me.price).toNumber()))
            }
            return ke
        }, [O, Ee, c, t, w, X, p, re, (te = k == null ? void 0 : k.value) == null ? void 0 : te.price]);
        return e.jsx("div", {
            id: "withdrawal-input-card",
            className: "mt-4 sm:mt-0 rounded-2xl p-0 max-w-[424px] m-auto sm:py-5 sm:px-6 bg-inherit md:bg-default md:shadow-card",
            children: e.jsxs("div", {
                className: "flex flex-col w-full mb-7 gap-4 items-center",
                children: [e.jsx(f, {
                    scale: L.HeadingSm,
                    bold: !0,
                    className: "hidden md:flex mb-4",
                    children: "Withdraw"
                }), e.jsx("div", {
                    className: "flex flex-col items-center w-full",
                    children: e.jsx(Yn, {
                        location: S.WITHDRAWAL_INPUT,
                        providerId: l
                    })
                }), e.jsxs("div", {
                    className: Ie("flex gap-2 rounded-2xl text-xl md:text-3xl items-center w-full py-3 px-4 border border-transparent justify-between", {
                        "bg-alternative border-default": q
                    }),
                    children: [e.jsx(Sc, {
                        placeholder: A ? "00.00" : "0.0000",
                        className: "border-none overflow-hidden text-3xl md:text-[40px] py-0 px-0 h-full w-full cursor-text bg-transparent focus:ring-0 placeholder:text-muted truncate",
                        disabled: !(t != null && t.tokenSymbol),
                        value: U || void 0,
                        onValueChange: V => Se(V.value),
                        valueIsNumericString: !0,
                        onFocus: () => {
                            ca({
                                location: S.WITHDRAWAL_INPUT,
                                selected_provider: l
                            }), ne(!0)
                        },
                        onBlur: () => ne(!1),
                        thousandSeparator: !0,
                        allowNegative: !1,
                        decimalScale: A ? 2 : void 0
                    }), e.jsx(Er, {
                        onClick: () => {
                            I(!A), ve({
                                location: `${S.WITHDRAWAL_INPUT} Currency Conversion`,
                                selected_provider: l,
                                text: A ? "fiat" : "native"
                            })
                        },
                        tokenSymbol: t == null ? void 0 : t.tokenSymbol,
                        isDisplayingFiat: A
                    })]
                }), e.jsxs("div", {
                    className: "flex gap-2 w-full",
                    children: [e.jsx(B, {
                        onClick: () => me(.5),
                        variant: "outline",
                        width: "full",
                        size: "md",
                        disabled: y.eq(0),
                        children: "50%"
                    }), e.jsx(B, {
                        onClick: () => me(.75),
                        variant: "outline",
                        width: "full",
                        size: "md",
                        disabled: y.eq(0),
                        children: "75%"
                    }), e.jsx(B, {
                        onClick: () => me(1),
                        variant: "outline",
                        width: "full",
                        size: "md",
                        disabled: y.eq(0),
                        children: e.jsxs(e.Fragment, {
                            children: [e.jsx(Yc, {}), "Max"]
                        })
                    })]
                }), e.jsxs(f, {
                    scale: L.ParagraphSm,
                    subdued: !0,
                    className: "mb-5",
                    children: [e.jsx("span", {
                        className: "mr-1",
                        children: "Balance:"
                    }), A ? `≈ ${_c(z.toNumber(),m)}` : `${Ye(F(z,4),{thousandSeparator:!0})} ${(t==null?void 0:t.tokenSymbol)||""}`]
                }), e.jsx(et, {
                    children: j ? e.jsx(B, {
                        onClick: () => {
                            n(Ac(Re(O).decimalPlaces(18, C.ROUND_HALF_DOWN).toString())), Ec({
                                selected_provider: l,
                                location: S.WITHDRAWAL_INPUT,
                                text: "Withdraw",
                                active_currency_format: A ? "fiat" : "native",
                                ...fe,
                                ...Z
                            }), s(`/stake/withdraw/${t==null?void 0:t.tokenSymbol}/method`)
                        },
                        disabled: !$ || M || !D || w,
                        width: "full",
                        children: "Withdraw"
                    }) : e.jsx(ja, {})
                })]
            })
        })
    },
    yr = (t = !1, s, n) => {
        var x, v, D;
        const l = W(),
            {
                activeAccount: a
            } = Ae(),
            c = (a == null ? void 0 : a.address) || "",
            {
                exchangeRate: i,
                exchangeRates: r
            } = _e(),
            {
                withdrawalAmount: o
            } = _(A => A.stake.thirdPartyStaking),
            {
                gasPrices: m,
                chainId: u
            } = _(Cc, rt),
            {
                quotes: h,
                isLoadingSwapQuotes: j,
                isErrorSwapQuotes: T
            } = _(yc),
            g = d.useMemo(() => h.filter(A => A.trade), [h]),
            b = Al[Cs.chainId],
            k = (v = (x = b.nativeCurrency) == null ? void 0 : x.symbol) == null ? void 0 : v.toLowerCase(),
            N = 1 / ((D = r[k]) == null ? void 0 : D.value) || 0;
        d.useEffect(() => {
            if (t && s && o) {
                const A = {
                    chainId: Cs.chainId,
                    sourceAmount: se.getAtomicAmountFromDisplayAmount(o.toString(), 18),
                    sourceToken: s,
                    destinationToken: n,
                    walletAddress: c,
                    slippage: 2
                };
                l(Rc(A)), l(Ic(A))
            }
            l(Ea(Cs.chainId))
        }, [l, t, c, s, n, o]), d.useEffect(() => () => {
            l(Lc())
        }, [l]);
        const E = d.useMemo(() => g.map(A => vc(b, A, N, i, m, u, "")), [b, g, N, i, m, u]),
            w = d.useMemo(() => Dc(g, E), [g, E])[0],
            y = (w == null ? void 0 : w.destinationTokenRate) * N || 0,
            p = Re((w == null ? void 0 : w.destinationAmount) || 0).dividedBy(Pc(18));
        return {
            swapTokensToReceiveAmount: p,
            swapWithdrawalAmountInFiat: p.multipliedBy(y),
            swapFee: (w == null ? void 0 : w.fee.toString()) || "--",
            isLoadingSwapQuotes: j,
            hasFetchedFirstQuotes: h.length > 0 || T
        }
    },
    ma = ({
        providerId: t,
        providerToken: s,
        conversionRate: n,
        feePercentage: l,
        method: a,
        nativeStakingToken: c = K.ETH
    }) => {
        const i = W(),
            {
                t: r
            } = oe();
        return e.jsx(B, {
            variant: "link",
            className: "mt-2",
            onClick: () => {
                i(le(ie.WithdrawalInfo, {
                    method: a,
                    providerId: t,
                    providerToken: s,
                    conversionRate: n,
                    feePercentage: l,
                    nativeStakingToken: c
                }, {
                    content: {
                        width: "428px"
                    }
                })), Ms({
                    text: r("stake.learnMore"),
                    selected_provider: t,
                    location: `${S.WITHDRAWAL_METHOD}: ${a}`
                })
            },
            children: r("stake.learnMore")
        })
    },
    _n = ({
        method: t,
        selectedMethod: s,
        onClick: n,
        providerId: l,
        children: a
    }) => {
        const c = () => {
            ve({
                selected_provider: l,
                location: `${S.WITHDRAWAL_METHOD}: ${t}`,
                text: t
            }), n(t)
        };
        return e.jsx("div", {
            className: Ie("rounded-lg py-4 px-3 flex flex-col gap-2 items-center border border-default hover:cursor-pointer hover:bg-info-muted", {
                "shadow-[0_0_0_2px] shadow-primary-default border-transparent": s === t
            }),
            onClick: c,
            onKeyDown: c,
            role: "button",
            tabIndex: 0,
            children: a
        })
    },
    Rr = ({
        providerId: t,
        providerToken: s,
        tokenExchangeRate: n
    }) => {
        const {
            t: l
        } = oe();
        return e.jsxs("div", {
            className: "rounded-lg p-4 flex flex-col gap-1 items-center justify-between border border-transparent",
            children: [e.jsx(f, {
                scale: L.HeadingXs,
                bold: !0,
                className: "text-disabled mb-3",
                children: l("stake.withdraw")
            }), e.jsx(f, {
                scale: L.ParagraphXs,
                className: "text-disabled text-center text-xs",
                children: l("stake.rocketPoolUnavailable")
            }), e.jsx(ma, {
                providerId: t,
                providerToken: s,
                conversionRate: F(1 / n, 4),
                method: "Withdraw"
            })]
        })
    },
    Ir = () => {
        const {
            t
        } = oe();
        return e.jsxs("div", {
            className: "rounded-lg p-4 flex flex-col gap-1 items-center justify-between border border-disabled",
            children: [e.jsx(f, {
                scale: L.HeadingXs,
                bold: !0,
                className: "text-disabled mb-3",
                children: t("stake.swap")
            }), e.jsx(f, {
                scale: L.ParagraphXs,
                className: "text-disabled text-center text-xs",
                children: t("stake.noQuotesAvailable")
            }), e.jsx("div", {
                className: "h-5"
            })]
        })
    },
    As = 30,
    ql = ({
        nativeCurrencyExchangeRate: t,
        provider: s,
        withdrawalTime: n
    }) => {
        var Se, me;
        const l = W(),
            a = Te(),
            c = Dt(),
            i = s == null ? void 0 : s.providerId,
            r = s == null ? void 0 : s.tokenSymbol,
            o = s == null ? void 0 : s.tokenAddress,
            {
                stakingChainId: m,
                shouldUseTestnet: u
            } = be(s == null ? void 0 : s.tokenAddress),
            [h, j] = d.useState(null),
            T = s.nativeToken,
            g = bt[T].tokenAddress,
            {
                selectedAccountAddress: b
            } = _(Z => Z.stake),
            {
                connectedAccounts: k
            } = Ae(),
            [N, E] = d.useState(Date.now() + As * Wt),
            [R, w] = d.useState(As),
            [y, p] = d.useState(!0),
            {
                tokenBalance: x
            } = _(Ue(s == null ? void 0 : s.tokenAddress, b, k, u)),
            {
                withdrawalAmount: v
            } = _(Z => Z.stake.thirdPartyStaking),
            D = ((Se = x == null ? void 0 : x.value) == null ? void 0 : Se.price) || 0,
            A = Re(v).multipliedBy(D).toNumber(),
            {
                contractConstants: I,
                isLoadingContractConstants: O
            } = _(Qt),
            {
                convertToNativeToken: Y
            } = ds(o),
            {
                tokenExchangeRate: H,
                nativeTokenAmount: G
            } = Y(v),
            {
                formatPriceWithCurrency: U
            } = _e(),
            {
                transformWithExchangeRates: q,
                isLoadingExchangeRates: ne
            } = gt(),
            {
                swapTokensToReceiveAmount: z,
                swapFee: $,
                swapWithdrawalAmountInFiat: M,
                isLoadingSwapQuotes: fe,
                hasFetchedFirstQuotes: P
            } = yr(y, o, g),
            re = Re(((me = I == null ? void 0 : I.rocketPoolConstants) == null ? void 0 : me.currentDeposits) || 0).lt(G),
            X = O || fe;
        d.useEffect(() => {
            p(!1)
        }, []), d.useEffect(() => {
            if (X || y) return;
            if (R < 1) return p(!0);
            const Z = setInterval(() => {
                const ge = N - Date.now(),
                    te = Math.ceil(ge / Wt);
                w(te < 0 ? 0 : te)
            }, 500);
            return () => {
                clearInterval(Z)
            }
        }, [R, N, X, y]), d.useEffect(() => {
            X || (p(!1), E(Date.now() + As * Wt), w(As))
        }, [X]), d.useEffect(() => {
            y && s && (l(Sl()), i === ce.ROCKETPOOL ? l(Zt({
                chainId: m
            })) : T === K.MATIC && l(wt({
                chainId: m,
                providerId: i
            })), jl({
                selected_provider: s.providerId,
                location: S.WITHDRAWAL_METHOD
            }), p(!1))
        }, [l, T, s, i, y, m]);
        const Ee = d.useCallback(() => {
                a(o === ys ? `${Le.STAKE}/withdraw/${r}/approve` : `${Le.STAKE}/withdraw/${r}/review`)
            }, [a, o, r]),
            de = d.useMemo(() => {
                const Z = G.toNumber(),
                    ge = z.toNumber(),
                    te = {
                        token_to_receive: T.toLowerCase(),
                        withdrawal_tokens_to_receive_count: Z,
                        withdrawal_tokens_to_receive_native_value: Z,
                        swap_tokens_to_receive_count: ge,
                        swap_tokens_to_receive_native_value: ge
                    };
                return T === K.ETH ? (ne || (te.swap_tokens_to_receive_usd_value = q(ge, "eth", "usd").toNumber()), te.withdrawal_tokens_to_receive_usd_value = q(G, "eth", "usd").toNumber()) : T === K.MATIC && (ne || (te.swap_tokens_to_receive_usd_value = q(ge, {
                    exchangeRate: t,
                    perOne: "usd"
                }, "usd").toNumber()), te.withdrawal_tokens_to_receive_usd_value = q(G, {
                    exchangeRate: t,
                    perOne: "usd"
                }, "usd").toNumber()), te
            }, [z, T, ne, G, q, t]);
        return !s || !v ? e.jsx($e, {
            to: `${Le.STAKE}/withdraw/${c.tokenSymbol}`,
            replace: !0
        }) : e.jsx("div", {
            id: "withdrawal-method-card",
            children: e.jsx("div", {
                className: "mt-4 sm:mt-0 rounded-2xl p-0 max-w-[424px] m-auto sm:py-5 sm:px-6 bg-inherit md:bg-default md:shadow-card",
                children: e.jsxs("div", {
                    className: "flex flex-col w-full mb-7 gap-4",
                    children: [e.jsxs("div", {
                        className: "hidden md:flex justify-between items-center mb-4",
                        children: [e.jsx(Pe, {
                            to: `${Le.STAKE}/withdraw/${r}`,
                            className: "w-12",
                            onClick: () => Qs({
                                text: "Left arrow icon",
                                selected_provider: i,
                                location: `${S.WITHDRAWAL_METHOD} Header`,
                                app_source: "stake"
                            }),
                            children: e.jsx(Ys, {
                                className: "text-icon-default"
                            })
                        }), e.jsx(f, {
                            scale: L.HeadingSm,
                            bold: !0,
                            className: "hidden md:flex",
                            children: "Select a method"
                        }), e.jsx("div", {
                            className: "w-12"
                        })]
                    }), e.jsxs("div", {
                        children: [e.jsx(f, {
                            center: !0,
                            children: "How do you want to exchange your"
                        }), e.jsxs(f, {
                            bold: !0,
                            className: "flex flex-wrap gap-1 justify-center mb-4",
                            children: [Ye(F(v, 4), {
                                thousandSeparator: !0
                            }), " ", r, A ? e.jsxs(f, {
                                bold: !0,
                                as: "span",
                                className: "truncate",
                                children: ["(≈", U(A), ")"]
                            }) : null, e.jsx(f, {
                                as: "span",
                                children: "?"
                            })]
                        })]
                    }), e.jsxs("div", {
                        className: "grid grid-cols-2 w-full gap-2",
                        children: [re && i === ce.ROCKETPOOL ? e.jsx(Rr, {
                            providerId: i,
                            providerToken: s == null ? void 0 : s.tokenSymbol,
                            tokenExchangeRate: H
                        }) : e.jsxs(_n, {
                            method: "Withdraw",
                            selectedMethod: h,
                            onClick: j,
                            providerId: i,
                            children: [e.jsx(f, {
                                scale: L.HeadingXs,
                                bold: !0,
                                className: "mb-3",
                                children: "Withdraw"
                            }), e.jsx(f, {
                                scale: L.ParagraphXs,
                                subdued: !0,
                                className: "text-xs",
                                children: n
                            }), e.jsx(f, {
                                scale: L.ParagraphXs,
                                subdued: !0,
                                className: "text-xs",
                                children: "No fee"
                            }), X ? e.jsx(ae, {
                                className: "!w-[140px] !h-8 mt-0"
                            }) : e.jsxs("div", {
                                className: "flex flex-col text-center w-full",
                                children: [e.jsxs(f, {
                                    scale: L.ParagraphXs,
                                    subdued: !0,
                                    className: "text-xs truncate",
                                    children: [Ye(F(G, 4), {
                                        thousandSeparator: !0
                                    }), " ", T]
                                }), e.jsxs(f, {
                                    scale: L.ParagraphXs,
                                    subdued: !0,
                                    className: "text-xs truncate",
                                    children: ["(≈", U(G.multipliedBy(1 / t).toNumber()), ") received"]
                                })]
                            }), e.jsx(ma, {
                                providerId: i,
                                providerToken: s == null ? void 0 : s.tokenSymbol,
                                conversionRate: F(1 / H, 4),
                                method: "Withdraw",
                                nativeStakingToken: T
                            })]
                        }), z.eq(xe) && P ? e.jsx(Ir, {}) : e.jsxs(_n, {
                            method: "Swap",
                            selectedMethod: h,
                            onClick: j,
                            providerId: i,
                            children: [e.jsx(f, {
                                scale: L.HeadingXs,
                                bold: !0,
                                className: "mb-3",
                                children: "Swap"
                            }), e.jsx(f, {
                                scale: L.ParagraphXs,
                                subdued: !0,
                                className: "text-xs",
                                children: "Instant"
                            }), X ? e.jsx(ae, {
                                className: "!w-[140px] !h-4 mt-0"
                            }) : e.jsxs(f, {
                                scale: L.ParagraphXs,
                                subdued: !0,
                                className: "text-xs",
                                children: [$, "% fee"]
                            }), X ? e.jsx(ae, {
                                className: "!w-[140px] !h-8 mt-0"
                            }) : e.jsxs("div", {
                                className: "flex flex-col text-center w-full",
                                children: [e.jsxs(f, {
                                    scale: L.ParagraphXs,
                                    subdued: !0,
                                    className: "text-xs truncate",
                                    children: [Ye(F(z, 4), {
                                        thousandSeparator: !0
                                    }), " ", T]
                                }), e.jsxs(f, {
                                    scale: L.ParagraphXs,
                                    subdued: !0,
                                    className: "text-xs truncate",
                                    children: ["(≈", U(M.toNumber()), ") received"]
                                })]
                            }), e.jsx(ma, {
                                providerId: i,
                                providerToken: s == null ? void 0 : s.tokenSymbol,
                                feePercentage: $,
                                method: "Swap"
                            })]
                        })]
                    }), e.jsxs(f, {
                        scale: L.ParagraphSm,
                        center: !0,
                        className: "mb-3",
                        children: ["New quote in", " ", e.jsx("span", {
                            className: `font-semibold ${R<1&&"text-error-default"}`,
                            children: wl(R)
                        })]
                    }), e.jsx(et, {
                        children: h === "Swap" ? e.jsx(Jt, {
                            to: ua(o, g, v),
                            width: "full",
                            onClick: () => Oc({
                                text: "Swap",
                                selected_provider: i,
                                location: S.WITHDRAWAL_METHOD,
                                ...de
                            }),
                            children: "Swap"
                        }) : e.jsx(B, {
                            disabled: !h,
                            width: "full",
                            onClick: () => {
                                fl({
                                    text: "Review",
                                    selected_provider: i,
                                    location: S.WITHDRAWAL_METHOD,
                                    ...de
                                }), Ee()
                            },
                            children: "Review"
                        })
                    })]
                })
            })
        })
    },
    Lr = ({
        provider: t
    }) => {
        var r, o, m;
        const {
            t: s
        } = oe(), n = t == null ? void 0 : t.providerId, {
            exchangeRates: l
        } = _e(), c = (o = (r = Al[Cs.chainId].nativeCurrency) == null ? void 0 : r.symbol) == null ? void 0 : o.toLowerCase(), i = ((m = l[c]) == null ? void 0 : m.value) || 0;
        return e.jsx(ql, {
            nativeCurrencyExchangeRate: i,
            provider: t,
            withdrawalTime: n === ce.ROCKETPOOL ? s("stake.withdrawalTimeInstant") : s("stake.withdrawalTime1To8Days")
        })
    },
    vr = ({
        provider: t
    }) => {
        var i;
        const {
            t: s
        } = oe(), {
            selectedAccountAddress: n
        } = _(r => r.stake), {
            connectedAccounts: l
        } = Ae(), {
            shouldUseTestnet: a
        } = be(t == null ? void 0 : t.tokenAddress);
        Oe({
            accounts: l,
            tokenAddress: Ze,
            useTestnet: a
        });
        const {
            tokenBalance: c
        } = _(Ue(Ze, n, l, a));
        return e.jsx(ql, {
            nativeCurrencyExchangeRate: 1 / (((i = c == null ? void 0 : c.value) == null ? void 0 : i.price) || 1 / 0),
            provider: t,
            withdrawalTime: s("stake.withdrawalTime3-4")
        })
    },
    Dr = ({
        provider: t
    }) => {
        switch (t.nativeToken) {
            case K.ETH:
                return e.jsx(Lr, {
                    provider: t
                });
            case K.MATIC:
                return e.jsx(vr, {
                    provider: t
                })
        }
    },
    Pr = ({
        activeAccountAddress: t,
        provider: s
    }) => {
        const n = W(),
            l = Te(),
            a = Dt(),
            {
                stakingChainId: c
            } = be(s == null ? void 0 : s.tokenAddress),
            i = s == null ? void 0 : s.providerId,
            r = s == null ? void 0 : s.tokenSymbol,
            {
                withdrawalAmount: o
            } = _(h => h.stake.thirdPartyStaking),
            m = `${vt.STAKE}/withdraw/${a.tokenSymbol}`,
            u = d.useCallback(async () => {
                if (window.ethereum) {
                    if (i === ce.LIDO) {
                        const h = new es(window.ethereum, c),
                            T = await new Ra(c, h).signStakedEthPermit(t, cs(o).toString());
                        n(Mc(T)), l(`${m}/review`)
                    }
                } else throw Error("Ethereum provider not found")
            }, [t, o, m, n, l, i, c]);
        return e.jsx(Kl, {
            analyticsLocation: S.WITHDRAWAL_APPROVE,
            approvalAmount: o,
            backRoute: `${m}/method`,
            baseRoute: m,
            onApprove: u,
            provider: s,
            tokenIcon: s == null ? void 0 : s.logoUrl,
            tokenIconStyles: i === ce.LIDO ? "border rounded-full border-default" : "",
            tokenToApprove: r
        })
    },
    zl = ({
        gasLimit: t,
        getTransactionData: s,
        isLoadingGasLimit: n,
        nativeTokenPrice: l,
        provider: a
    }) => {
        var $, M, fe;
        const c = W(),
            i = Dt(),
            r = a == null ? void 0 : a.providerId,
            o = `/stake/withdraw/${i.tokenSymbol}`,
            m = a.nativeToken,
            {
                activeAccount: u,
                connectedAccounts: h
            } = Ae(),
            {
                selectedAccountAddress: j
            } = _(P => P.stake),
            {
                accountAddresses: T
            } = Je(),
            {
                stakingChainId: g,
                shouldUseTestnet: b
            } = be(a == null ? void 0 : a.tokenAddress),
            {
                isOnNetwork: k
            } = hs(g),
            N = _(Vs, rt),
            {
                isLoading: E,
                tokenBalance: R
            } = _(Ue(se.ZERO_ADDRESS, j, h, b)),
            w = (($ = R == null ? void 0 : R.account) == null ? void 0 : $.balance) || 0,
            {
                withdrawalAmount: y
            } = _(P => P.stake.thirdPartyStaking) || "0",
            {
                tokenBalance: p
            } = _(Ue(a == null ? void 0 : a.tokenAddress, j, h, b)),
            x = ((M = p == null ? void 0 : p.value) == null ? void 0 : M.price) || 0,
            v = Tt(j, u == null ? void 0 : u.address),
            {
                convertToNativeToken: D
            } = ds(a == null ? void 0 : a.tokenAddress),
            {
                nativeTokenAmount: A
            } = D(y),
            {
                estimatedGasFeeInEth: I,
                estimatedGasFeeInFiat: O,
                isLoadingGas: Y
            } = Aa(t),
            H = Re(I).minus(Re(w)),
            [G, U] = d.useState(!1),
            q = Zs(a),
            ne = d.useCallback(async () => {
                const P = {
                    accountAddresses: T,
                    chainIds: N
                };
                U(!0);
                try {
                    if (window.ethereum) {
                        const re = "stake",
                            X = S.WITHDRAWAL_REVIEW,
                            Ee = new es(window.ethereum, g),
                            de = Z => c(fs({
                                provider: Ee,
                                transactionData: Z,
                                transactionFailedCallback: (ge, te) => {
                                    te ? U(!1) : is(ge), Hs({
                                        app_source: re,
                                        location: X,
                                        is_tx_signed: !te
                                    })
                                },
                                transactionConfirmedCallback: () => {
                                    $s({
                                        app_source: re,
                                        location: X
                                    })
                                },
                                request: P,
                                tokensToUpdate: [{
                                    accountAddress: j,
                                    tokenAddress: a.tokenAddress,
                                    chainId: g
                                }, {
                                    accountAddress: j,
                                    tokenAddress: se.ZERO_ADDRESS,
                                    chainId: g
                                }],
                                metadata: me
                            })),
                            {
                                transactionData: Se,
                                metadata: me
                            } = await s() || {};
                        Se && de(Se)
                    } else throw Error("Ethereum provider not found")
                } catch {
                    c(dt({
                        message: "Transaction could not be submitted",
                        type: "error"
                    }))
                }
            }, [T, N, c, s, a.tokenAddress, j, g]),
            z = d.useMemo(() => {
                const P = {
                    tokens_to_withdraw_count: Number(y),
                    tokens_to_receive_count: A.toNumber(),
                    tokens_to_receive_native_value: A.toNumber(),
                    token_to_receive: m.toLowerCase()
                };
                if (p && (P.token_to_withdraw = p.symbol.toLowerCase()), l && (P.tokens_to_receive_usd_value = new C(A).multipliedBy(l).toNumber()), x) {
                    const re = new C(y).multipliedBy(x);
                    P.tokens_to_withdraw_usd_value = re.toNumber(), l && (P.tokens_to_withdraw_native_value = re.div(l).toNumber())
                }
                return P
            }, [y, A, p, l, m, x]);
        return !a || !y || y === "0" ? e.jsx($e, {
            to: o
        }) : q || e.jsxs("div", {
            id: "withdrawal-review-card",
            children: [G && !ee && e.jsx("div", {
                className: "fixed inset-0 bg-overlay-default z-50"
            }), e.jsx("div", {
                className: "mt-4 sm:mt-0 rounded-2xl p-0 max-w-[424px] m-auto sm:py-5 sm:px-6 bg-inherit md:bg-default md:shadow-card",
                children: e.jsxs("div", {
                    className: "flex flex-col w-full mb-7",
                    children: [e.jsxs("div", {
                        className: "hidden md:flex justify-between items-center mb-8",
                        children: [e.jsx(Wc, {
                            to: r === ce.ROCKETPOOL || m === K.MATIC ? `${o}/method` : `${o}/approve`,
                            className: "w-12",
                            onClick: () => Qs({
                                text: "Left arrow icon",
                                selected_provider: r,
                                location: `${S.WITHDRAWAL_REVIEW} Header`,
                                app_source: "stake"
                            }),
                            children: e.jsx(Ys, {
                                className: "text-icon-default"
                            })
                        }), e.jsx(f, {
                            scale: L.HeadingSm,
                            bold: !0,
                            className: "hidden md:flex",
                            children: "Review"
                        }), e.jsx("div", {
                            className: "w-12"
                        })]
                    }), e.jsxs("div", {
                        className: "flex flex-col w-full gap-7",
                        children: [e.jsxs("div", {
                            className: "flex gap-1 relative",
                            children: [e.jsx("div", {
                                className: "absolute flex items-center justify-center bg-alternative md:bg-default rounded-full h-6 w-6 left-[50%] -ml-2.5 top-[50%] -mt-2.5",
                                children: e.jsx(Tl, {
                                    className: "w-5 text-icon-muted"
                                })
                            }), e.jsx(os, {
                                iconUrl: a.logoUrl,
                                tokenAddress: a.tokenAddress,
                                tokenSymbol: a.tokenSymbol,
                                tokenAmount: Number(y),
                                tokenPrice: ((fe = p == null ? void 0 : p.value) == null ? void 0 : fe.price) || 0
                            }), e.jsx(os, {
                                iconUrl: ht[m],
                                tokenAddress: bt[m].tokenAddress,
                                tokenSymbol: m,
                                tokenAmount: A.toNumber(),
                                tokenPrice: l
                            })]
                        }), e.jsxs("span", {
                            className: "flex justify-between",
                            children: [e.jsx(we, {
                                id: "gas-fee",
                                text: e.jsx(f, {
                                    scale: L.ParagraphSm,
                                    children: "Estimated gas fee"
                                }),
                                tooltipText: zt,
                                mobileTooltip: zt
                            }), Y || n ? e.jsx(ae, {
                                className: "!w-[140px] !h-5 mt-0"
                            }) : I ? e.jsxs(f, {
                                scale: L.ParagraphSm,
                                children: [e.jsxs("span", {
                                    className: "text-alternative",
                                    children: [F(I, 4), " ETH"]
                                }), e.jsxs("span", {
                                    className: "bold ml-1",
                                    children: ["≈ ", O]
                                })]
                            }) : gs]
                        }), !E && H.gt(xe) ? e.jsx(Us, {
                            nativeStakingToken: m,
                            providerId: r,
                            maxEthAvailable: Re(w),
                            additionalEthRequired: H,
                            location: S.WITHDRAWAL_REVIEW
                        }) : null, !k && e.jsx(ks, {
                            chainId: g,
                            analyticsProps: {
                                location: S.WITHDRAWAL_REVIEW,
                                app_source: "stake"
                            }
                        }), v ? null : e.jsx(Ca, {
                            providerId: r,
                            address: j,
                            location: S.WITHDRAWAL_REVIEW
                        }), e.jsxs(et, {
                            children: [e.jsx(B, {
                                width: "full",
                                isLoading: G,
                                loadingText: "Confirm transaction in wallet",
                                className: "mb-1",
                                disabled: H.gt(xe) || Y || n || !k || !v,
                                onClick: () => {
                                    ne(), ya({
                                        text: Nt,
                                        selected_provider: a.providerId,
                                        location: S.WITHDRAWAL_REVIEW,
                                        ...z
                                    })
                                },
                                children: Nt
                            }), e.jsx(Gs, {
                                experience: he.WITHDRAW
                            })]
                        })]
                    })]
                })
            })]
        })
    },
    Or = ({
        provider: t,
        activeAccountAddress: s
    }) => {
        var w;
        const n = W(),
            {
                connectedAccounts: l
            } = Ae(),
            a = t == null ? void 0 : t.providerId,
            c = t == null ? void 0 : t.tokenAddress,
            {
                stakingChainId: i,
                shouldUseTestnet: r
            } = be(c),
            {
                withdrawalAmount: o
            } = _(y => y.stake.thirdPartyStaking) || "0",
            {
                selectedAccountAddress: m
            } = _(y => y.stake),
            {
                tokenBalance: u
            } = _(Ue(se.ZERO_ADDRESS, m, l, r)),
            h = ((w = u == null ? void 0 : u.value) == null ? void 0 : w.price) || 0,
            {
                permitSignature: j
            } = _(y => y.stake.thirdPartyStaking),
            T = d.useMemo(() => j ? {
                signature: j.signature,
                amount: cs(o).toString(),
                owner: s,
                deadline: j == null ? void 0 : j.deadline
            } : {}, [s, j, o]),
            g = d.useCallback(async () => {
                if (a === ce.ROCKETPOOL) return {
                    transactionData: await new Fc(i).encodeBurnData(s, cs(o)),
                    metadata: {
                        chainId: i,
                        transactionCategory: "MINT"
                    }
                };
                if (a === ce.LIDO && T.signature && typeof T.deadline == "number") return {
                    transactionData: await new Ra(i).encodeRequestWithdrawalData(T),
                    metadata: {
                        chainId: i,
                        transactionCategory: "NFT_MINT"
                    }
                }
            }, [s, a, T, i, o]),
            [b, k] = d.useState(0),
            [N, E] = d.useState(!1),
            R = d.useCallback(async () => {
                E(!0);
                try {
                    if (a === ce.ROCKETPOOL) {
                        const p = await ut(Bc)(s, o, i);
                        k(p)
                    } else if (a === ce.LIDO && T.signature && T.deadline) {
                        const p = await ut(Vc)(T, i);
                        k(p)
                    }
                } catch {
                    k(0)
                } finally {
                    E(!1)
                }
            }, [s, a, T, i, o]);
        return d.useEffect(() => {
            n(Zt({
                chainId: i
            })), R()
        }, [n, R, i]), e.jsx(zl, {
            gasLimit: b,
            getTransactionData: g,
            isLoadingGasLimit: N,
            nativeTokenPrice: h,
            provider: t
        })
    },
    Mr = ({
        provider: t,
        activeAccountAddress: s
    }) => {
        var E;
        const n = W(),
            {
                connectedAccounts: l
            } = Ae(),
            a = t == null ? void 0 : t.providerId,
            c = t == null ? void 0 : t.tokenAddress,
            {
                stakingChainId: i,
                shouldUseTestnet: r
            } = be(c),
            {
                withdrawalAmount: o
            } = _(R => R.stake.thirdPartyStaking) || "0",
            {
                selectedAccountAddress: m
            } = _(R => R.stake);
        Oe({
            accounts: l,
            tokenAddress: Ze,
            useTestnet: r
        });
        const {
            tokenBalance: u
        } = _(Ue(Ze, m, l, r)), h = ((E = u == null ? void 0 : u.value) == null ? void 0 : E.price) || 0, [j, T] = d.useState(0), [g, b] = d.useState(!1), k = d.useCallback(async () => {
            b(!0);
            try {
                if (a === ce.LIDO) {
                    const w = await ut(Hc)(o, s, i);
                    T(w)
                } else if (a === ce.STADER) {
                    const w = await ut($c)(o, s, i);
                    T(w)
                }
            } catch {
                T(0)
            } finally {
                b(!1)
            }
        }, [s, a, i, o]);
        d.useEffect(() => {
            n(wt({
                chainId: i,
                providerId: a
            })), k()
        }, [n, k, a, i]);
        const N = d.useCallback(async () => {
            const R = Uc(o);
            if (a === ce.LIDO) return {
                transactionData: await new El(i).encodeRequestWithdrawData(R, se.ZERO_ADDRESS, s),
                metadata: {
                    chainId: i,
                    transactionCategory: "NFT_MINT"
                }
            };
            if (a === ce.STADER) return {
                transactionData: await new Cl(i).encodeRequestWithdrawData(R, s),
                metadata: {
                    chainId: i,
                    transactionCategory: "MINT"
                }
            }
        }, [s, a, i, o]);
        return e.jsx(zl, {
            gasLimit: j,
            getTransactionData: N,
            isLoadingGasLimit: g,
            nativeTokenPrice: h,
            provider: t
        })
    },
    Wr = ({
        activeAccountAddress: t,
        provider: s
    }) => {
        switch (s.nativeToken) {
            case K.ETH:
                return e.jsx(Or, {
                    activeAccountAddress: t,
                    provider: s
                });
            case K.MATIC:
                return e.jsx(Mr, {
                    activeAccountAddress: t,
                    provider: s
                })
        }
    },
    Xl = ({
        gasLimit: t,
        getTransactionData: s,
        isLoadingGasLimit: n,
        provider: l,
        withdrawal: a
    }) => {
        var Ee, de, Se;
        const c = W(),
            i = l == null ? void 0 : l.providerId,
            {
                activeAccount: r,
                connectedAccounts: o
            } = Ae(),
            m = (r == null ? void 0 : r.address) || "",
            u = l.nativeToken,
            h = bt[u].tokenAddress,
            {
                accountAddresses: j
            } = Je(),
            T = (a == null ? void 0 : a.owner) || "",
            g = Tt(T, m),
            {
                stakingChainId: b,
                shouldUseTestnet: k
            } = be(l == null ? void 0 : l.tokenAddress),
            {
                isOnNetwork: N
            } = hs(b),
            E = _(Vs, rt),
            {
                tokenBalance: R,
                isLoading: w
            } = _(Ue(se.ZERO_ADDRESS, m, o, k)),
            {
                tokenBalance: y,
                isLoading: p
            } = _(Ue(l == null ? void 0 : l.tokenAddress, m, o, k)),
            {
                tokenBalance: x,
                isLoading: v
            } = _(Ue(h, m, o, k)),
            D = ((Ee = R == null ? void 0 : R.account) == null ? void 0 : Ee.balance) || 0,
            A = ((de = y == null ? void 0 : y.value) == null ? void 0 : de.price) || 0,
            I = ((Se = x == null ? void 0 : x.value) == null ? void 0 : Se.price) || 0,
            O = w || p || v,
            {
                convertToNativeToken: Y
            } = ds(l == null ? void 0 : l.tokenAddress),
            H = fa((a == null ? void 0 : a.amountOfStakedToken) || 0),
            {
                nativeTokenAmount: G
            } = Y(H),
            U = G.toNumber(),
            {
                estimatedGasFeeInEth: q,
                estimatedGasFeeInFiat: ne,
                isLoadingGas: z
            } = Aa(t),
            $ = Re(q).minus(Re(D)),
            [M, fe] = d.useState(!1),
            P = Zs(l),
            re = d.useCallback(async () => {
                const me = {
                    accountAddresses: j,
                    chainIds: E
                };
                fe(!0);
                try {
                    if (window.ethereum) {
                        const Z = new es(window.ethereum, b),
                            ge = Ce => c(fs({
                                provider: Z,
                                transactionData: Ce,
                                transactionFailedCallback: (ke, De) => {
                                    De ? fe(!1) : is(ke), Hs({
                                        app_source: "stake",
                                        location: S.WITHDRAWAL_REVIEW_CLAIM,
                                        is_tx_signed: !De
                                    })
                                },
                                transactionConfirmedCallback: () => {
                                    $s({
                                        app_source: "stake",
                                        location: S.WITHDRAWAL_REVIEW_CLAIM
                                    })
                                },
                                request: me,
                                tokensToUpdate: [{
                                    accountAddress: m,
                                    tokenAddress: l.tokenAddress,
                                    chainId: b
                                }, {
                                    accountAddress: m,
                                    tokenAddress: se.ZERO_ADDRESS,
                                    chainId: b
                                }],
                                metadata: V
                            })),
                            {
                                transactionData: te,
                                metadata: V
                            } = await s() || {};
                        te && ge(te)
                    } else throw Error("Ethereum provider not found")
                } catch {
                    c(dt({
                        message: "Transaction could not be submitted",
                        type: "error"
                    }))
                }
            }, [j, E, b, s, c, m, l.tokenAddress]),
            X = d.useMemo(() => {
                const me = {
                    tokens_to_withdraw_count: Number(H),
                    tokens_to_receive_count: U,
                    tokens_to_receive_native_value: U,
                    token_to_receive: u.toLowerCase()
                };
                if (y && (me.token_to_withdraw = y.symbol.toLowerCase()), I && (me.tokens_to_receive_usd_value = new C(U).multipliedBy(I).toNumber()), A) {
                    const Z = new C(H).multipliedBy(A);
                    me.tokens_to_withdraw_usd_value = Z.toNumber(), I && (me.tokens_to_withdraw_native_value = Z.div(I).toNumber())
                }
                return me
            }, [H, U, u, y, I, A]);
        return !l || !a ? e.jsx($e, {
            to: "/stake"
        }) : P || e.jsxs("div", {
            id: "withdrawal-review-claim-card",
            children: [M && !ee && e.jsx("div", {
                className: "fixed inset-0 bg-overlay-default z-50"
            }), e.jsx("div", {
                className: "mt-4 sm:mt-0 rounded-2xl p-0 max-w-[424px] m-auto sm:py-5 sm:px-6 bg-inherit md:bg-default md:shadow-card",
                children: e.jsxs("div", {
                    className: "flex flex-col w-full mb-7",
                    children: [e.jsx("div", {
                        className: "flex justify-center mb-8",
                        children: e.jsx(f, {
                            scale: L.HeadingSm,
                            bold: !0,
                            className: "hidden md:flex",
                            children: "Review Claim"
                        })
                    }), e.jsxs("div", {
                        className: "flex flex-col w-full gap-7",
                        children: [e.jsx(os, {
                            iconUrl: ht[u],
                            tokenAddress: h,
                            tokenSymbol: u,
                            tokenAmount: U,
                            tokenPrice: I
                        }), e.jsxs("span", {
                            className: "flex justify-between",
                            children: [e.jsx(we, {
                                id: "gas-fee",
                                text: e.jsx(f, {
                                    scale: L.ParagraphSm,
                                    children: "Estimated gas fee"
                                }),
                                tooltipText: zt,
                                mobileTooltip: zt
                            }), z || n ? e.jsx(ae, {
                                className: "!w-[140px] !h-5 mt-0"
                            }) : q ? e.jsxs(f, {
                                scale: L.ParagraphSm,
                                children: [e.jsxs("span", {
                                    className: "text-alternative",
                                    children: [F(q, 4), " ETH"]
                                }), e.jsxs("span", {
                                    className: "bold ml-1",
                                    children: ["≈ ", ne]
                                })]
                            }) : gs]
                        }), $.gt(xe) && !O ? e.jsx(Us, {
                            nativeStakingToken: u,
                            providerId: i,
                            maxEthAvailable: Re(D),
                            additionalEthRequired: $,
                            location: S.WITHDRAWAL_REVIEW_CLAIM
                        }) : null, g ? null : e.jsx(Ca, {
                            providerId: i,
                            address: T,
                            location: S.WITHDRAWAL_REVIEW_CLAIM
                        }), !N && e.jsx(ks, {
                            analyticsProps: {
                                location: S.WITHDRAWAL_REVIEW_CLAIM,
                                app_source: "stake"
                            },
                            chainId: b
                        }), e.jsxs(et, {
                            children: [e.jsx(B, {
                                width: "full",
                                isLoading: M,
                                loadingText: "Confirm transaction in wallet",
                                className: "mb-1",
                                disabled: $.gt(xe) || n || !g || !N,
                                onClick: () => {
                                    re(), ya({
                                        text: Nt,
                                        selected_provider: l.providerId,
                                        location: S.WITHDRAWAL_REVIEW_CLAIM,
                                        ...X
                                    })
                                },
                                children: Nt
                            }), e.jsx(Gs, {
                                experience: he.CLAIM
                            })]
                        })]
                    })]
                })
            })]
        })
    },
    Fr = ({
        provider: t
    }) => {
        const {
            state: s
        } = us(), {
            stakingChainId: n
        } = be(t == null ? void 0 : t.tokenAddress), l = s == null ? void 0 : s.requestId, a = _(yl(l)), c = (a == null ? void 0 : a.requestId.toNumber()) || 0, i = (a == null ? void 0 : a.owner) || "", r = d.useCallback(async () => ({
            transactionData: await new Ra(n).encodeClaimData(c, i),
            metadata: {
                chainId: n,
                transactionCategory: "NFT_MINT"
            }
        }), [i, n, c]), [o, m] = d.useState(0), [u, h] = d.useState(!1), j = d.useCallback(async () => {
            h(!0);
            try {
                const g = await ut(Gc)(c, i, n);
                m(g)
            } catch {
                m(0)
            } finally {
                h(!1)
            }
        }, [n, i, c]);
        return d.useEffect(() => {
            j()
        }, [j]), e.jsx(Xl, {
            gasLimit: o,
            getTransactionData: r,
            isLoadingGasLimit: u,
            provider: t,
            withdrawal: a
        })
    },
    Br = ({
        provider: t
    }) => {
        const {
            state: s
        } = us(), {
            stakingChainId: n,
            shouldUseTestnet: l
        } = be(t == null ? void 0 : t.tokenAddress), {
            connectedAccounts: a
        } = Ae(), c = t == null ? void 0 : t.providerId, i = s == null ? void 0 : s.requestId, r = _(yl(i)), o = (r == null ? void 0 : r.requestId.toNumber()) || 0, m = (r == null ? void 0 : r.owner) || "";
        Oe({
            accounts: a,
            tokenAddress: Ze,
            useTestnet: l
        });
        const u = d.useCallback(async () => {
                if (c === ce.LIDO) return {
                    transactionData: await new El(n).encodeClaimTokensData(o, m),
                    metadata: {
                        chainId: n,
                        transactionCategory: "NFT_MINT"
                    }
                };
                if (c === ce.STADER) return {
                    transactionData: await new Cl(n).encodeClaimWithdrawalData(o, m),
                    metadata: {
                        chainId: n,
                        transactionCategory: "TRANSFER"
                    }
                }
            }, [m, c, o, n]),
            [h, j] = d.useState(0),
            [T, g] = d.useState(!1),
            b = d.useCallback(async () => {
                g(!0);
                try {
                    if (c === ce.LIDO) {
                        const N = await ut(Kc)(o, m, n);
                        j(N)
                    } else if (c === ce.STADER) {
                        const N = await ut(qc)(o, m, n);
                        j(N)
                    }
                } catch {
                    j(0)
                } finally {
                    g(!1)
                }
            }, [c, n, m, o]);
        return d.useEffect(() => {
            b()
        }, [b]), e.jsx(Xl, {
            gasLimit: h,
            getTransactionData: u,
            isLoadingGasLimit: T,
            provider: t,
            withdrawal: r
        })
    },
    Vr = ({
        provider: t
    }) => {
        switch (t.nativeToken) {
            case K.ETH:
                return e.jsx(Fr, {
                    provider: t
                });
            case K.MATIC:
                return e.jsx(Br, {
                    provider: t
                })
        }
    },
    Ot = () => e.jsx(qs, {
        title: e.jsx("div", {
            className: "flex justify-center md:hidden",
            children: e.jsx("span", {
                className: "text-base font-bold text-center mr-6",
                children: "Withdraw"
            })
        }),
        titleClassName: "w-full",
        hideGlobalActions: !0,
        pagination: [{
            title: "Go back",
            href: "/stake"
        }, {
            title: "Withdrawal flow",
            href: location.pathname
        }]
    }),
    Hr = () => {
        var j;
        const t = W(),
            s = Dt(),
            {
                withdrawalAmount: n
            } = _(T => T.stake.thirdPartyStaking),
            {
                activeAccount: l,
                connectedAccounts: a
            } = Ae(),
            c = (l == null ? void 0 : l.address) || "";
        ms(void 0);
        const {
            provider: i,
            isLoadingProvider: r,
            isProviderUnfetched: o
        } = _(Nl(((j = s.tokenSymbol) == null ? void 0 : j.toLowerCase()) || "")), [m, u] = d.useState(r || o), {
            shouldUseTestnet: h
        } = be(i == null ? void 0 : i.tokenAddress);
        return Oe({
            accounts: a,
            tokenAddress: i == null ? void 0 : i.tokenAddress,
            useTestnet: h
        }), Oe({
            accounts: a,
            tokenAddress: _a,
            useTestnet: h
        }), d.useEffect(() => {
            !r && !o && u(!1)
        }, [r, o]), d.useEffect(() => () => {
            t(_l())
        }, [t]), m ? null : i ? e.jsx("div", {
            id: "withdrawal-flow",
            children: e.jsx($t, {
                children: e.jsxs(Ks, {
                    children: [e.jsx(Ne, {
                        path: "/",
                        element: e.jsxs(e.Fragment, {
                            children: [e.jsx(Ot, {}), e.jsx(Cr, {
                                provider: i
                            })]
                        })
                    }), e.jsx(Ne, {
                        path: "/method",
                        element: e.jsxs(e.Fragment, {
                            children: [e.jsx(Ot, {}), e.jsx(Dr, {
                                provider: i
                            })]
                        })
                    }), e.jsx(Ne, {
                        path: "/approve",
                        element: e.jsxs(e.Fragment, {
                            children: [e.jsx(Ot, {}), e.jsx(Pr, {
                                provider: i,
                                activeAccountAddress: c
                            })]
                        })
                    }), e.jsx(Ne, {
                        path: "/review",
                        element: e.jsxs(e.Fragment, {
                            children: [e.jsx(Ot, {}), e.jsx(Wr, {
                                provider: i,
                                activeAccountAddress: c
                            })]
                        })
                    }), e.jsx(Ne, {
                        path: "/claim",
                        element: e.jsxs(e.Fragment, {
                            children: [e.jsx(Ot, {}), e.jsx(Vr, {
                                provider: i
                            })]
                        })
                    }), e.jsx(Ne, {
                        path: "/confirmed",
                        element: e.jsxs(e.Fragment, {
                            children: [e.jsx(Ot, {}), e.jsx(Gl, {
                                provider: i,
                                experience: n ? he.WITHDRAW : he.CLAIM
                            })]
                        })
                    }), e.jsx(Ne, {
                        path: "*",
                        element: e.jsx($e, {
                            to: `/stake/withdraw/${s.tokenSymbol}`
                        })
                    })]
                })
            })
        }) : e.jsx($e, {
            to: "/stake"
        })
    },
    $r = Hr;

function Yr() {
    zc("Stake");
    const {
        stakePageFeatureFlag: t,
        isFetchingFeatureFlag: s
    } = it(), {
        isConfirmedIneligible: n
    } = qt(We.VALIDATOR), {
        isConfirmedIneligible: l
    } = qt(We.POOLED);
    return s ? null : t ? e.jsxs(Ks, {
        children: [e.jsx(Ne, {
            path: ":tokenSymbol/*",
            element: e.jsx(Ar, {})
        }), e.jsx(Ne, {
            path: "withdraw/:tokenSymbol/*",
            element: e.jsx($r, {})
        }), ee && !n && e.jsx(Ne, {
            path: `${Fe.ROOT}/*`,
            element: e.jsx(Xc, {})
        }), ee && !l && e.jsx(Ne, {
            path: `${Rt.ROOT}/*`,
            element: e.jsx(Ao, {})
        }), e.jsx(Ne, {
            path: "*",
            element: e.jsx(lr, {})
        })]
    }) : e.jsx(Ia, {
        routeName: Ta.STAKE
    })
}
export {
    Yr as
    default
};